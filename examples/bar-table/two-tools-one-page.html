<!-- @@include('../assets/_header.tpl', {"title": "Two tools, one page"}) -->

<div class="container">
    <div class="buttons">
        <label>Language:</label>
        <button onclick="setLanguage('bar-chart','en'); setLanguage('table','en')">ENGLISH</button>
        <button onclick="setLanguage('bar-chart','pt'); setLanguage('table','pt')">PORTUGUESE</button>
    </div>

    <div id="bar-chart" class="placeholder"></div>
    <div id="table" class="placeholder"></div>

</div>
<div class="aux">
    <p>Current State:</p>
    <pre id="state" class="json_box" contentEditable="true"></pre>
    <button onclick="setCurrentState('bar-chart'); setCurrentState('table')">SET STATE</button>
    <p>Current Query:</p>
    <pre id="query" class="json_box"></pre>
</div>

<script>
var options = {
    //state
    state: {
        language: 'en',
        show: {
            geo : ['swe', 'nor', 'world'],
            'geo.categories': ['country', 'planet']
        },
        timeRange: ["2000-2009"],
        time: 2005,
        indicator: 'gdp',
        scale: 'linear',
        unit: 1000000,
        columns: ['entity', 'year', 'gdp']
    },
    //path
    data: {
        reader: 'local-json',
        path: '../../data-waffles/hello-world/{{LANGUAGE}}/response.json'
    },

    bind: {
        'change:state': function(state) {
            showState(state);
        },
        'change:query': function(query) {
            showQuery(query);
        }
    },
    ready: ready
};

var myVizabi = new Vizabi("bar-chart", "#bar-chart", options);
var myVizabi2;

function ready() {
    myVizabi2 = new Vizabi("table", "#table", options);
    options.ready = null;
}
</script>

<!-- @@include('../assets/_footer.tpl') -->
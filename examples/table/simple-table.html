<!-- @@include('../assets/_header.tpl', {"title": "Table - Simple Example"}) -->
<div class="container">

    <div class="buttons">
        <button onclick="randomSize('table_tool')">RANDOM SIZE</button>
        <label>State:</label>
        <button onclick="setState()">GDP and LEX of NOR and SWE: 2001 - 2009)</button>
        <button onclick="setState2()">GDP of SWE: 2002 - 2007)</button>
        <button onclick="setState3()">WORLD: 2002 - 2007</button>
        <label>Language:</label>
        <button onclick="setLanguage('table_tool','en')">ENGLISH</button>
        <button onclick="setLanguage('table_tool','pt')">PORTUGUESE</button>
    </div>

    <div id="table_tool" class="placeholder"></div>

</div>
<div class="aux">
    <p>Current State:</p>
    <pre id="state" class="json_box" contentEditable="true"></pre>
    <button onclick="setCurrentState('table_tool')">SET STATE</button>
    <p>Current Query:</p>
    <pre id="query" class="json_box"></pre>
</div>

<script>
var options = {
    //state
    state: {
        /*TODO:
        This format:
        entity: {
            country: ['swe', 'nor'],
            planet: ['world'],
        }
        */
        entity: ['country/swe'],
        timeRange: ["2002-2007"],
        //TODO: improve how we express which columns to show
        columns: ['entity', 'year', 'gdp']
    },
    //path
    data: {
        reader: 'local-json',
        path: '../../data-waffles/hello-world/{{LANGUAGE}}/waffle.json'
    },

    /*
     * i18n strings are passed as an object to Vizabi
     */

    language: "en",
    ui_strings: {
        en: {
            "title": "Table Title",
            "timeslider/play": "Play",
            "timeslider/pause": "Pause"
        },
        pt: {
            "title": "TÃ­tulo da Tabela",
            "timeslider/play": "Iniciar",
            "timeslider/pause": "Parar"
        }
    },

    bind: {
        'change:state': function(state) {
            showState(state);
        },
        'change:query': function(query) {
            showQuery(query);
        }
    }
};

var myVizabi = new Vizabi("table", "#table_tool", options);

function setState() {
    var newOption = {
        state: {
            entity: ['country/swe', 'country/nor'],
            timeRange: ["2002-2007"],
            //TODO: improve how we express which columns to show
            columns: ['entity', 'year', 'gdp', 'lex']
        }
    };
    myVizabi.setOptions("#table_tool", newOption);
}

function setState2() {
    var newOption = {
        state: {
            entity: ['country/swe'],
            timeRange: ["2002-2007"],
            //TODO: improve how we express which columns to show
            columns: ['entity', 'year', 'gdp']
        }
    };
    myVizabi.setOptions("#table_tool", newOption);
}

function setState3() {
    var newOption = {
        state: {
            entity: ['planet/world'],
            timeRange: ["2002-2007"],
            //TODO: improve how we express which columns to show
            columns: ['entity', 'year', 'gdp']
        }
    };
    myVizabi.setOptions("#table_tool", newOption);
}
</script>

<!-- @@include('../assets/_footer.tpl') -->
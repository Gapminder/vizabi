<html>

<head>
    <title>Test page for Vizabi</title>
    <!-- Includes vizabi main file -->
    <script src="../../dist/vizabi.js"></script>
    <!-- Includes vizabi css -->
    <link rel="stylesheet" href="../../dist/vizabi.css">

    <style>
    body {
        margin: 10px;
        padding: 0;
        font-family: Arial, sans-serif;
    }
    #table_tool {
        position: relative;
        width: 300px;
        height: 500px;
        margin: 20px auto;
        border: 1px solid #ccc;
        overflow: hidden;
        overflow-y: scroll;
    }
    p {
        margin-top: 10px;
    }
    </style>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

</head>

<body>

    <p align="center">
        <button onclick="randomSize()">RANDOM SIZE</button>
        <button onclick="setState()">GDP and LEX of NOR and SWE: 2001 - 2009)</button>
        <button onclick="setState2()">GDP of SWE: 2002 - 2007)</button>
        <button onclick="setState3()">WORLD: 2002 - 2007</button>

        <button onclick="setLanguage('en')">ENGLISH</button>
        <button onclick="setLanguage('pt')">PORTUGUESE</button>

    </p>

    <div id="table_tool"></div>
</body>
<script>
var ready = function(err) {
    console.log("Vizabi is ready!");
};

var options = {
    //state
    state: {
        language: 'en',
        /*TODO:
        This format:
        entity: {
            country: ['swe', 'nor'],
            planet: ['world'],
        }
        */
        entity: ['country/swe'],
        timeRange: ["2002-2007"],
        //TODO: improve how we express which columns to show
        columns: ['entity', 'year', 'gdp']
    },
    //path
    data: {
        reader: 'local-json',
        path: '../../data-waffles/hello-world/{{LANGUAGE}}/waffle.json'
    },

    ready: ready
};

var myVizabi = new Vizabi("table", "#table_tool", options);

function randomSize() {
    var width = Math.floor(Math.random() * 800) + 300;
    var height = Math.floor(Math.random() * 500) + 300;
    var container = document.getElementById("table_tool");
    container.style.width = width + "px";
    container.style.height = height + "px";

    //force resize
    event = document.createEvent("HTMLEvents");
    event.initEvent("resize", true, true);
    event.eventName = "resize";
    window.dispatchEvent(event);
}

function setLanguage(language) {
    var newOption = {
        state: {
            language: language
        }
    };
    myVizabi.setOptions("#table_tool", newOption);
}


function setState() {
    var newOption = {
        state: {
            entity: ['country/swe', 'country/nor'],
            timeRange: ["2002-2007"],
            //TODO: improve how we express which columns to show
            columns: ['entity', 'year', 'gdp', 'lex']
        }
    };
    myVizabi.setOptions("#table_tool", newOption);
}

function setState2() {
    var newOption = {
        state: {
            entity: ['country/swe'],
            timeRange: ["2002-2007"],
            //TODO: improve how we express which columns to show
            columns: ['entity', 'year', 'gdp']
        }
    };
    myVizabi.setOptions("#table_tool", newOption);
}

function setState3() {
    var newOption = {
        state: {
            entity: ['planet/world'],
            timeRange: ["2002-2007"],
            //TODO: improve how we express which columns to show
            columns: ['entity', 'year', 'gdp']
        }
    };
    myVizabi.setOptions("#table_tool", newOption);
}
</script>

</html>
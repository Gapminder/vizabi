(function(){"use strict";function a(a,b,d){var e=c.Tool.get(a);if(e){var f=new e(b,d);return c._instances[f._id]=f,f}c.utils.error('Tool "'+a+'" was not found.')}var b=this,c=(b.Vizabi,function(b,c,d){return a(b,c,d)});c._instances={},c.clearInstances=function(a){a?delete c._instances[a]:c._instances={}},c._require=function(a){return"undefined"==typeof b[a]?(c.utils.warn(a+" is required and could not be found."),!1):!0},"function"==typeof define&&define.amd?define(function(){return c}):"object"==typeof module&&module.exports&&(module.exports=c),b.Vizabi=c}).call(this),function(){"use strict";var a=this,b=a.Vizabi;b.utils={uniqueId:function(){var a=0;return function(b){return b?b+a++:a++}}(),isElement:function(a){return!(!a||1!==a.nodeType)},isArray:Array.isArray||function(a){return"[object Array]"===toString.call(a)},isObject:function(a){var b=typeof a;return"object"===b&&!!a},isDate:function(a){return a instanceof Date},isString:function(a){return"string"==typeof a},isNaN:function(a){return this.isNumber(a)&&a!=+a},isNumber:function(a){return"number"==typeof a||!!a&&"object"==typeof a&&"[object Number]"==Object.prototype.toString.call(a)},isPlainObject:function(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)},forEach:function(a,b,c){if(a){var d;if(this.isArray(a)){if(!a.length)return;for(d=0;d<a.length&&b.apply(c,[a[d],d])!==!1;d++);}else{var e=Object.keys(a),f=e.length;for(d=0;f>d&&b.apply(c,[a[e[d]],e[d]])!==!1;d++);}}},extend:function(a){var b=Array.prototype.slice.call(arguments,1),c=this;return this.forEach(b,function(b,d){c.forEach(b,function(c,d){b.hasOwnProperty(d)&&(a[d]=c)})}),a},merge:function(a){var b=Array.prototype.slice.call(arguments,1),c=this;return this.forEach(b,function(b,d){c.forEach(b,function(d,e){b.hasOwnProperty(e)&&(a.hasOwnProperty(e)?(c.isArray(a[e])||(a[e]=[a[e]]),a[e].push(d)):a[e]=d)})}),a},clone:function(a,b){if(this.isArray(a))return a.slice(0);var c={};return this.forEach(a,function(d,e){b&&-1===b.indexOf(e)||a.hasOwnProperty(e)&&(c[e]=d)}),c},deepClone:function(a){var b={},c=this;return this.forEach(a,function(d,e){a.hasOwnProperty(e)&&(c.isObject(d)||c.isArray(d)?b[e]=c.deepClone(d):b[e]=d)}),b},without:function(a,b){var c=a.indexOf(b);return-1!==c&&a.splice(c,1),a},unique:function(a,b){var c={},d=[];b||(b=function(a){return a});for(var e=0,f=a.length;f>e;++e){var g=b(a[e]);c.hasOwnProperty(g)||(d.push(a[e]),c[g]=1)}return d},uniqueLast:function(a,b){var c={},d=[];b||(b=function(a){return a});for(var e=0,f=a.length;f>e;++e){var g=b(a[e]);c.hasOwnProperty(g)&&d.splice(c[g],1),d.push(a[e]),c[g]=d.length-1}return d},find:function(a,b){var c;return this.forEach(a,function(a){return b(a)?(c=a,!1):void 0}),c},filter:function(a,b){for(var c,d,e=-1,f=a.length,g=-1,h=[],i=Object.keys(b),j=i.length;++e<f;){var k=a[e],l=!0;for(c=0;j>c;c++)if(d=i[c],!k.hasOwnProperty(d)||k[d]!==b[d]){l=!1;break}l&&(h[++g]=k)}return h},radiusToArea:function(a){return a*a*Math.PI},areaToRadius:function(a){return Math.sqrt(a/Math.PI)},timeStamp:function(b){a.console&&"function"==typeof a.console.timeStamp&&a.console.timeStamp(b)},warn:function(b){a.console&&"function"==typeof a.console.warn&&a.console.warn(b)},groupCollapsed:function(b){a.console&&"function"==typeof a.console.groupCollapsed&&a.console.groupCollapsed(b)},groupEnd:function(){a.console&&"function"==typeof a.console.groupEnd&&a.console.groupEnd()},error:function(b){a.console&&"function"==typeof a.console.error&&a.console.error(b)},countDecimals:function(a){return Math.floor(a.valueOf())===a.valueOf()?0:a.toString().split(".")[1].length||0},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")},classed:function(a,b,c){if(c===!0)this.addClass(a,b);else{if(c!==!1)return this.hasClass(a,b);this.removeClass(a,b)}},hasClass:function(a,b){return a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(a.className)},throttle:function(){var a={};return function(b,c){a[b]||(a[b]=!0,setTimeout(function(){a[b]=!1},c),b())}}(),keys:function(a){return Object.keys(a)},values:function(a){for(var b,c=Object.keys(a),d=c.length,e=0;d>e;e++)(b=b||[]).push(a[c[e]]);return b},defer:function(a){setTimeout(a,1)},ajax:function(a){var b=new XMLHttpRequest;b.open(a.method,a.url,!0),"POST"===a.method&&b.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),b.onload=function(){if(b.status>=200&&b.status<400){var c=a.json?JSON.parse(b.responseText):b.responseText;a.success&&a.success(c)}else a.error&&a.error()},b.onerror=function(){a.error&&a.error()},b.send(a.data)},get:function(a,b,c,d,e){var b=[];this.forEach(b,function(a,c){b.push(c+"="+a)}),a=b.length?a+"?"+b.join("&"):a,this.ajax({method:"GET",url:a,success:c,error:d,json:e})},post:function(a,b,c,d,e){this.ajax({method:"POST",url:a,success:c,error:d,json:e,data:b})}}}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils;!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Promise=b.call(a)}(b,function(){function a(b){return this instanceof a?(this.status="pending",this.value,this.reason,this._resolves=[],this._rejects=[],g(b)&&b(this.resolve.bind(this),this.reject.bind(this)),this):new a(b)}function b(b,c){return c===b&&b.reject(new Error("TypeError")),c instanceof a?d(b,c):i(c)?e(b,c):b.resolve(c)}function d(a,b){var c=b.status;return"pending"===c&&b.then(a.resolve.bind(a),a.reject.bind(a)),"resolved"===c&&a.resolve(b.value),"rejected"===c&&a.reject(b.reason),promise}function e(a,c){var d,e=j(function(c){d||(b(a,c),d=!0)}),f=j(function(b){d||(a.reject(b),d=!0)});try{c.then.call(c,e,f)}catch(g){if(!d)throw g;a.reject(g)}return a}function f(a){for(var c,d,e=a.status,f=a["resolved"===e?"_resolves":"_rejects"],g=a["resolved"===e?"value":"reason"];c=f.shift();)d=c.call(a,g),d&&b(a._next,d);return a}function g(a){return"function"===h(a)}function h(a){var b={};return b.toString.call(a).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function i(a){return a&&a.then&&g(a.then)}function j(a){var b,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}}return a.prototype.then=function(c,d){var e,f=this._next||(this._next=a()),h=this.status;if("pending"===h)return g(c)&&this._resolves.push(c),g(d)&&this._rejects.push(d),f;if("resolved"===h){if(g(c))try{e=c(this.value),b(f,e)}catch(i){this.reject(i)}else f.resolve(c);return f}if("rejected"===h){if(g(d))try{e=d(this.reason),b(f,e)}catch(i){this.reject(i)}else f.reject(d);return f}},a.prototype.resolve=function(a){if("rejected"===this.status)throw Error("Illegal call.");return this.status="resolved",this.value=a,this._resolves.length&&f(this),this},a.prototype.reject=function(a){if("resolved"===this.status)throw Error("Illegal call. "+a);return this.status="rejected",this.reason=a,this._rejects.length&&f(this),this},a.prototype["catch"]=function(a){return this.then(void 0,a)},a.cast=function(b){var c=a();return b instanceof a?d(c,b):a.resolve(b)},a.resolve=function(b){var c=a();return i(b)?e(c,b):c.resolve(b)},a.all=function(b){var d,e=b.length,f=a(),g=[],h=0;return c.forEach(b,function(a,b){a.then(function(a){g[b]=a,++h!==e||d||f.resolve(g)},function(a){d=!0,f.reject(a)})}),f},a.any=function(b){var d,e=a();return c.forEach(b,function(a,b){a.then(function(a){d||(e.resolve(a),d=!0)},function(a){d=!0,e.reject(a)})}),e},a.reject=function(b){if(!(b instanceof Error))throw Error("reason must be an instance of Error");var c=a();return c.reject(b),c},a})}.call(this),function(){"use strict";function a(b,f){function g(){!d&&this.init&&this.init.apply(this,arguments)}f=1===arguments.length?b:f;var h=this.prototype;d=!0;var i=new this;return d=!1,c.utils.forEach(f,function(a,b){"function"==typeof f[b]&&"function"==typeof h[b]&&e.test(f[b])?i[b]=function(a,b){return function(){var c=this._super;this._super=h[a];var d=b.apply(this,arguments);return this._super=c,d}}(b,f[b]):i[b]=a}),g.prototype=i,g.prototype.constructor=g,g.extend=a,g._collection={},g.register=function(a,b){"undefined"!=typeof this._collection[a]&&c.utils.warn('"'+a+'" is already registered. Overwriting...'),this._collection[a]=b},g.unregister=function(a){delete this._collection[a]},g.getCollection=function(){return this._collection},g.get=function(a,b){return this._collection.hasOwnProperty(a)?this._collection[a]:(b||c.utils.warn('"'+a+'" was not found.'),!1)},arguments.length>1&&this.register&&this.register(b,g),g}var b=this,c=b.Vizabi,d=!1,e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;c.Class=function(){},c.Class.extend=a,c.Helper=c.Class.extend({})}.call(this),function(){"use strict";function a(a,b,c){return JSON.stringify(a)+b+JSON.stringify(c)}var b=this,c=b.Vizabi,d=c.utils,e=c.Promise,f=c.Class.extend({init:function(){this._data={}},load:function(a,b,c,f){var g=this,h=new e,i=(new e).resolve(),j=a===!0?!0:this.isCached(a,b,c),k=!1;return j||(d.timeStamp("Vizabi Data: Loading Data"),f&&"function"==typeof f.load_start&&f.load_start(),i=new e,this.loadFromReader(a,b,c).then(function(a){k=!0,j=a,i.resolve()})),i.then(function(){var a=g.get(j);k&&f&&"function"==typeof f.load_end&&f.load_end(),h.resolve(a)},function(){k&&f&&"function"==typeof f.load_end&&f.load_end(),h.reject("Error loading file...")}),h},loadFromReader:function(b,d,f){var g=this,h=new e,i=f.reader,j=a(b,d,f),k=c.Reader.get(i),l=new k(f);return l.read(b,d).then(function(){var a=l.getData(),c=b,d=-1!==c.select.indexOf("geo.region");a=a.map(function(a){for(var b=0;b<c.select.length;b++){var d=c.select[b];"undefined"==typeof a[d]&&(a[d]=null)}return a}),a=a.map(function(a){return null===a.geo&&(a.geo=a["geo.name"]),d&&null===a["geo.region"]&&(a["geo.region"]=a.geo),a}),a=a.map(function(a){return a.time=new Date(a.time),a.time.setHours(0),a}),a.sort(function(a,b){return a.time-b.time}),g._data[j]=a,h.resolve(j)},function(a){h.reject(a)}),h},get:function(a){return a?this._data[a]:this._data},isCached:function(b,c,d){var e=a(b,c,d);return-1!==Object.keys(this._data).indexOf(e)?e:!1},clear:function(){this._data={}}}),g=c.Class.extend({init:function(a){this._name=this._name||a.reader,this._data=a.data||[],this._basepath=this._basepath||a.path||null},read:function(a,b){return new e.resolve(this._data)},getData:function(){return this._data}});c.Reader=g,c.Data=f}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils,d=!1,e=[],f={},g=b.Class.extend({init:function(a,b){this._id=this._id||c.uniqueId("e"),this._events={},this._freeze=!1,this._freezer=[],this._freezeExceptions={}},on:function(a,b){var d;if(c.isArray(b))for(d=0;d<b.length;d++)this.on(a,b[d]);else if(c.isArray(a))for(d=0;d<a.length;d++)this.on(a[d],b);else if(c.isObject(a))for(d in a)this.on(d,a[d]);else this._events[a]=this._events[a]||[],"function"==typeof b?this._events[a].push(b):c.warn("Can't bind event '"+a+"'. It must be a function.")},unbind:function(a){if(c.isArray(a))for(var b=0;b<a.length;b++)this.unbind(a[b]);else this._events.hasOwnProperty(a)&&(this._events[a]=[])},unbindAll:function(){this._events={}},trigger:function(a,b,g){var h,i;if(c.isArray(a))for(h=0,i=a.length;i>h;h++)this.trigger(a[h],b);else{if(!this._events.hasOwnProperty(a))return;for(h=0;h<this._events[a].length;h++){var j=this._events[a][h],k=this,l=function(){var d="Vizabi Event: "+a+" - "+g;c.timeStamp(d),j.apply(k,[g||a,b])};this._freeze||d?d&&f.hasOwnProperty(a)||!d&&this._freeze&&this._freezeExceptions.hasOwnProperty(a)?l():(this._freezer.push(l),d&&!e[this._id]&&(this.freeze(),e[this._id]=this)):l()}}},triggerAll:function(a,b,d){var e=[];c.isArray(a)||(a=[a]);var f,g,h;for(f=0,g=a.length;g>f;f++){h=a[f];for(var d=h,i=h.split(":");i.length;)e.push([h,b,d]),i.pop(),h=i.join(":")}var j=c.unique(e,function(a){return a[0]});for(f=0;f<j.length;f++)this.trigger.apply(this,j[f])},freeze:function(a){if(this._freeze=!0,a){c.isArray(a)||(a=[a]);for(var b=0;b<a.length;b++)this._freezeExceptions[a[b]]=!0}},unfreeze:function(){for(this._freeze=!1,this._freezeExceptions={};this._freezer.length;){var a=this._freezer.shift();a()}}});g.freezeAll=function(a){d=!0,a&&(c.isArray(a)||(a=[a]),c.forEach(a,function(a){f[a]=!0}))},g.unfreezeAll=function(){d=!1,f={};for(var a in e){var b=e[a];b.unfreeze(),delete e[a]}},b.Events=g}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=(b.utils,b.Class.extend({init:function(){this.intervals={}},setInterval:function(a,b,c){this.clearInterval(a),this.intervals[a]=setInterval(b,c)},clearInterval:function(a){return a?clearInterval(this.intervals[a]):this.clearAllIntervals()},clearAllIntervals:function(){for(var a in this.intervals)this.clearInterval(a)}}));b.Intervals=c}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils,d="vzb-",e="vzb-portrait",f="vzb-landscape",g={small:{min_width:0,max_width:749},medium:{min_width:750,max_width:969},large:{min_width:970,max_width:1/0}},h=b.Events.extend({init:function(){this._container=null,this._curr_profile=null,this._prev_size={};var b=this;a.addEventListener("resize",function(){b._container&&b.setSize()}),this._super()},setSize:function(){var a=this,b=this._container.clientWidth,h=this._container.clientHeight;this._prev_size&&this._prev_size.width===b&&this._prev_size.height===h||(c.forEach(g,function(e,f){c.removeClass(a._container,d+f),b>=e.min_width&&b<=e.max_width&&(a._curr_profile=f)}),c.addClass(this._container,d+this._curr_profile),h>b?(c.addClass(this._container,e),c.removeClass(this._container,f)):(c.addClass(this._container,f),c.removeClass(this._container,e)),this._prev_size.width=b,this._prev_size.height=h,this.trigger("resize"))},setContainer:function(a){this._container=a,this.setSize()},currentProfile:function(){return this._curr_profile}});b.Layout=h}.call(this),function(){"use strict";function a(a){return a.hasOwnProperty("_data")}function b(a){for(var b in a._data)Object.defineProperty(a,b,{configurable:!0,get:function(b){return function(){return a.get(b)}}(b),set:function(b){return function(c){return a.set(b,c)}}(b)})}function c(b,c,d){var e=b.split("_")[0],f={change:function(a,b){a=a.replace("change","change:"+e),d.triggerAll(a,d.getObject())},hook_change:function(a,b){d.trigger(a,d.getObject()),d.setReady(!1)},load_start:function(a,b){a=a.replace("load_start","load_start:"+e),d.triggerAll(a,d.getObject()),d.setReady(!1)},load_error:function(a,b){a=a.replace("load_error","load_error:"+e),d.triggerAll(a,b)},ready:function(a,b){a=a.replace("ready","ready:"+e),d.trigger(a,b),d.setReady()}};if(a(c))return c.on(f),c;var g=j.Model.get(e,!0)||n;return new g(c,d,f,!0)}function d(a){return a._intervals?a._intervals:a._parent?d(a._parent):new j.Intervals}function e(a,b){var c=f(a,b);return c?c:a._parent?e(a._parent,b):void 0}function f(b,c){for(var d in b._data)if(d===c&&a(b._data[d]))return b._data[d]}function g(a){return l.isArray(a.dimensions)?a.dimensions:a._parent?g(a._parent):void l.error('ERROR: dimensions not found.\n You must specify the objects this hook will use under the dimensions attribute in the state.\n Example:\n dimensions: ["entities", "time"]')}function h(a,b,c,d){if(null==a._items||0==a._items.length)return l.warn("interpolateValue returning NULL because items array is empty"),null;var e=new Date(b.time);delete b.time;var f=a._getFilteredItems(b);if("value"==c)return f[0][a[HOOK_VALUE]];var g=d3.bisectLeft(f.map(function(a){return a.time}),e);if("property"==c&&0==g)return f[0][d];if("property"==c)return f[g-1][d];if(0==g)return f[0][d];if(g==f.length)return f[f.length-1][d];if(null==f[g][d]||null==f[g-1][d])return null;var h=(e-f[g-1].time)/(f[g].time-f[g-1].time),d=+f[g-1][d]+(f[g][d]-f[g-1][d])*h;return"[object Date]"===Object.prototype.toString.call(f[0][d])&&(d=new Date(d)),d}var i=this,j=i.Vizabi,k=j.Promise,l=j.utils,m={year:d3.time.format("%Y"),month:d3.time.format("%Y-%m"),week:d3.time.format("%Y-W%W"),day:d3.time.format("%Y-%m-%d"),hour:d3.time.format("%Y-%m-%d %H"),minute:d3.time.format("%Y-%m-%d %H:%M"),second:d3.time.format("%Y-%m-%d %H:%M:%S")};j._require("d3");var n=j.Events.extend({init:function(a,b,c,e){this._type=this._type||"model",this._id=this._id||l.uniqueId("m"),this._data={},this._parent=b,this._set=!1,this._ready=!1,this._readyOnce=!1,this._loadedOnce=!1,this._loading=[],this._intervals=d(this),this._deps={parent:[],children:[]},this._hooks={},this._items=[],this._unique={},this._filtered={},this._limits={},this._super(),c&&this.on(c),e&&this.freeze(),a&&this.set(a)},get:function(a){return a?this._data[a]:this._data},set:function(d,e,f){var g,h=[],i=this._setting,j=this;l.isPlainObject(d)?(g=d,f=e):(g={})[d]=e,i||(this._prevData=l.clone(this._data),this._changedData={}),this._setting=!0;for(var k in g){var e=g[k],m=this._data[k],n=this._prevData[k];if(!l.isPlainObject(e)||l.isArray(e)){if(m!==e||f||JSON.stringify(m)!==JSON.stringify(e)){var o="undefined"==typeof m?"init":"change";h.push(o+":"+k)}n!==e||f||JSON.stringify(n)!==JSON.stringify(e)?this._changedData[k]=e:delete this._changedData[k],this._data[k]=e}else m&&a(m)?(h.push("change:"+k),this._data[k].set(e,f)):(h.push("init:"+k),this._data[k]=c(k,e,this),this._data[k].unfreeze())}b(this),this.validate&&!i&&this.validate(),(!i||f)&&(this._set?h.length&&h.push("change"):(this._set=!0,h.push("set")),j.triggerAll(h,j.getObject()),j._setting=!1,this.isHook()||this.setReady())},getType:function(){return this._type},getSubmodels:function(){var a=[];return l.forEach(this._data,function(b){b&&"undefined"!=typeof b._id&&a.push(b)}),a},getObject:function(){var a={};for(var b in this._data)this._data[b]&&"function"==typeof this._data[b].getObject?a[b]=this._data[b].getObject():a[b]=this._data[b];return a},clear:function(){var a=this.getSubmodels();for(var b in a)a[b].clear();this.setReady(!1),this.unbindAll(),this._intervals.clearAllIntervals(),this._data={}},validate:function(){},isLoading:function(a){if(this.isHook()&&!this._loadedOnce)return!0;if(a)return-1!==this._loading.indexOf(a);if(this._loading.length>0)return!0;var b,c=this.getSubmodels();for(b=0;b<c.length;b++)if(c[b].isLoading())return!0;for(b=0;b<this._deps.children.length;b++){var d=this._deps.children[b];if(d.isLoading()||!d._ready)return!0}return!1},setLoading:function(a){this.isLoading()||this.trigger("load_start"),this._loading.push(a)},setLoadingDone:function(a){this._loading=l.without(this._loading,a),this.setReady()},setReady:function(a){if(a===!1)return this._ready=!1,void(this._parent&&this._parent.setReady&&this._parent.setReady(!1));var b=this._ready;if(this._ready=!this.isLoading()&&!this._setting&&!this._loadCall,this._ready&&b!==this._ready){this._readyOnce||(this._readyOnce=!0,this.trigger("readyOnce")),this.trigger("ready");for(var c=0;c<this._deps.parent.length;c++)this._deps.parent[c].setReady()}},load:function(){var a=this,b=this.getSubmodels(),c=this._dataModel,d=this._languageModel,e=this.getQuery(),f=new k,g=[];if(this._loadCall=!0,this.isHook()&&c&&e){this.trigger("hook_change");var h=c.getObject(),i=d?d.id:"en",m=new k,n={load_start:function(){a.setLoading("_hook_data"),j.Events.freezeAll(["load_start","resize","dom_ready"])},load_end:function(){j.Events.unfreezeAll(),a.setLoadingDone("_hook_data")}};l.timeStamp("Vizabi Model: Loading Data: "+a._id),this._dataManager.load(e,i,h,n).then(function(b){a._items=b,l.timeStamp("Vizabi Model: Data loaded: "+a._id),a._unique={},a._filtered={},a._limits={},a.afterLoad(),m.resolve()},function(b){a.trigger("load_error",e),m.reject(b)}),g.push(m)}for(var o in b)g.push(b[o].load());var p=g.length?k.all(g):new k.resolve;return p.then(function(){a.validate&&a.validate(),l.timeStamp("Vizabi Model: Model loaded: "+a._id),a._loadedOnce=!0,a._loadCall=!1,a.setReady(),f.resolve()}),f},afterLoad:function(){},resetDeps:function(){this._deps.children=[]},addDep:function(a){this._deps.children.push(a),a._deps.parent.push(this)},isHook:function(){return this.use?!0:!1},setHooks:function(){this.isHook()&&(this.dimensions=g(this),this.hookModel());var a=this.getSubmodels();l.forEach(a,function(a){a.setHooks()})},hookModel:function(){var a=this;this._dataManager=new j.Data,this._dataModel=e(this,"data"),this._languageModel=e(this,"language"),l.forEach(this.dimensions,function(b){a._hooks[b]=e(a,b),a._hooks[b].show&&a._hooks[b].on("change:show",function(b){a.load()})}),this.on("change",function(){a.load()})},getHook:function(a){return this._hooks[a]},getHookValues:function(a){var b=[];return this.use&&this.use===a&&b.push(this.which),l.forEach(this.getSubmodels(),function(c){b=l.unique(b.concat(c.getHookValues(a)))}),b},getIndicators:function(){return this.getHookValues("indicator")},getProperties:function(){return this.getHookValues("property")},getAllDimensions:function(){var a,b=[];return l.forEach(this._hooks,function(c){(a=c.getDimension())&&b.push(a)}),b},getAllFilters:function(){var a={};return l.forEach(this._hooks,function(b){a=l.extend(a,b.getFilter())}),a},getValue:function(a){var b=l.clone(a,this.getAllDimensions());return this.mapValue(this._getHookedValue(b))},getValues:function(a){var b=l.clone(a,this.getAllDimensions());return this._getHookedValues(b)},mapValue:function(a){return a},getItems:function(a){if(this.isHook()&&this._dataModel){var b=l.without(this.getAllDimensions(),"time");return this.getUnique(b).map(function(b){return a&&a.time&&(b.time=a.time),b})}return[]},getDimension:function(){return!1},getFilter:function(){return{}},getQuery:function(){var a=["property","indicator"];if(this.isHook()&&-1!==a.indexOf(this.use)){if(Object.keys(this._hooks).length<1)return l.error("Error:",this._id,"can't find any dimension"),!0;var b=this.getAllDimensions(),c=l.unique(b.concat([this.which])),d=this.getAllFilters();return{from:"data",select:c,where:d}}return!0},tickFormatter:function(a,b){if(l.isDate(a))return m.year(a);if(l.isString(a))return a;var c="f",d=0;Math.abs(a)<1&&(d=1,c="r");var e="";if(b)return d3.format("."+d+c)(a);switch(Math.floor(Math.log10(Math.abs(a)))){case-13:a=1e12*a,e="p";break;case-10:a=1e9*a,e="n";break;case-7:a=1e6*a,e="µ";break;case-6:a=1e6*a,e="µ";break;case-5:a=1e6*a,e="µ";break;case-4:break;case-3:break;case-2:break;case-1:break;case 0:break;case 1:break;case 2:break;case 3:break;case 4:break;case 5:a/=1e3,e="k";break;case 6:a/=1e6,e="M",d=1;break;case 7:a/=1e6,e="M";break;case 8:a/=1e6,e="M";break;case 9:a/=1e9,e="B",d=1;break;case 10:a/=1e9,e="B";break;case 11:a/=1e9,e="B";break;case 12:a/=1e12,e="T",d=1;break;default:return d3.format("."+d+"s")(a).replace("G","B")}return(d3.format("."+d+c)(a)+e).replace("G","B")},getScale:function(){return null==this.scale&&this.buildScale(),this.scale},buildScale:function(){if(this.isHook()){var a,b=this.scaleType||"linear";switch(this.use){case"indicator":var c=this.getLimits(this.which);a=[c.min,c.max];break;case"property":a=this.getUnique(this.which);break;case"value":default:a=[this.which]}this.scale=d3.scale[b]().domain(a)}},getLimits:function(a){if(this.isHook()){if(a||(a="time"),this._limits[a])return this._limits[a];for(var b,c,d=this._items.map(function(b){return"time"!==a?parseFloat(b[a]):new Date(b[a].toString())}),e={},f=0;f<d.length;f++){var g=d[f];("undefined"==typeof b||b>g)&&(b=g),("undefined"==typeof c||g>c)&&(c=g)}return e.min=b||0,e.max=c||0,this._limits[a]=e,e}},getUnique:function(a){if(this.isHook()){a||(a="time");var b,c=JSON.stringify(a);if(this._unique[c])return this._unique[c];if(l.isArray(a)){var d=this._items.map(function(b){return l.clone(b,a)});if(-1!==a.indexOf("time"))for(var e=0;e<d.length;e++)d[e].time=new Date(d[e].time);b=l.unique(d,function(a){return JSON.stringify(a)})}else{var d=this._items.map(function(b){return"time"!==a?b[a]:new Date(b[a])});b=l.unique(d)}return this._unique[c]=b,b}},_getHookedValue:function(a){if(!this.isHook())return void l.warn("_getHookedValue method needs the model to be hooked to data.");var b;return b="value"===this.use?this.which:this._hooks.hasOwnProperty(this.use)?this.getHook(this.use)[this.which]:h(this,a,this.use,this.which)},_getHookedValues:function(a){var b=this;if(!this.isHook())return void l.warn("_getHookedValue method needs the model to be hooked to data.");var c;if("value"===this.use)c=[this.which];else if(this._hooks.hasOwnProperty(this.use))c=[this.getHook(this.use)[this.which]];else if(a&&a.hasOwnProperty("time")){var d=new Date(a.time),e=h(this,a,this.use,this.which);c=l.filter(this._items,a).filter(function(a){return a.time<=d}).map(function(a){return a[b.which]}).concat(e)}else c=this._items.filter(a).map(function(a){return a[b.which]});return c},getMaxMinMean:function(a){var b=this,c={};return d3.nest().key(function(b){return a(b.time)}).entries(b._items).forEach(function(a){var d=a.values.filter(function(a){return null!=a[b.which]}).map(function(a){return+a[b.which]});c[a.key]={max:d3.max(d),min:d3.min(d),mean:d3.mean(d)}}),c},_getFilteredItems:function(a){var b=(JSON.stringify(a),JSON.stringify(a));return this._filtered[b]?this._filtered[b]:this._filtered[b]=l.filter(this._items,a)}});j.Model=n}.call(this),function(){"use strict";function a(b,d){var e=/<[a-z][\s\S]*>/i.test(b)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+b.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):f[b]=f[b]||a(c.document.getElementById(b).innerHTML);return d?e(d):e}var b="vzb-loading",c=this,d=c.Vizabi,e=d.utils,f={},g=d.Events.extend({init:function(a,b){if(this._id=this._id||e.uniqueId("c"),this._ready=!1,this._readyOnce=!1,this.name=this.name||a.name,this.template=this.template||"<div></div>",this.placeholder=this.placeholder||a.placeholder,this.template_data=this.template_data||{name:this.name},this.placeholder&&!e.isElement(this.placeholder))try{this.placeholder=b.placeholder.querySelector(this.placeholder)}catch(c){e.error("Error finding placeholder '"+this.placeholder+"' for component '"+this.name+"'")}this.parent=b||this,this.components=this.components||[],this._components_config=this.components.map(function(a){return e.clone(a)}),this._frameRate=10,this.model_expects=this.model_expects||[],this.model_binds=this.model_binds||{},this.ui=this.ui||a.ui,this._super();var d=this;this.on({readyOnce:function(){"function"==typeof d.readyOnce&&d.readyOnce()},ready:function(){"function"==typeof d.ready&&d.ready()},resize:function(){"function"==typeof d.resize&&d.resize()}})},render:function(){function a(){e.removeClass(c.placeholder,b),c.setReady()}var c=this;this.loadTemplate(),this.loadComponents(),e.forEach(this.components,function(a){a.render(),c.on("resize",function(){a.trigger("resize")})}),this.isRoot()&&this.model?(this.model.on("ready",function(){a()}),this.model.setHooks(),this.model.load()):this.model&&this.model.isLoading()?this.model.on("ready",function(){a()}):a()},setReady:function(){this._readyOnce||(this.trigger("readyOnce"),this._readyOnce=!0),this._ready=!0,this.trigger("ready")},loadTemplate:function(){var c=this.template,d=this.template_data,f=this,g="";if(this.placeholder){if(d=e.extend(d,{t:this.getTranslationFunction(!0)}),this.template)try{g=a(c,d)}catch(h){e.error("Templating error for component: '"+this.name+"' - Check if path to template is correct. E.g.: 'src/components/...'")}e.addClass(this.placeholder,b),this.placeholder.innerHTML=g,this.element=this.placeholder.children[0],this.layout&&(this.layout.setContainer(this.element),this.layout.on("resize",function(){f._ready&&e.throttle(function(){f.trigger("resize")},f._frameRate)}))}},loadComponents:function(){var a,b,c=this;this.components=[],this.model&&this.model.resetDeps(),e.forEach(this._components_config,function(f){if(!f.component)return void e.error("Error loading component: name not provided");if(b=d.Component.get(f.component)){a=e.extend(f,{name:f.component,ui:c._uiMapping(f.placeholder,f.ui)});var g=new b(a,c),h=f.model||[];g.model=c._modelMapping(g.name,h,g.model_expects,g.model_binds),g.model.unfreeze(),c.components.push(g)}})},isRoot:function(){return this.parent===this},getLayoutProfile:function(){return this.layout?this.layout.currentProfile():this.parent.getLayoutProfile()},_uiMapping:function(a,b){if(b)return new d.Model(b);if(a&&this.ui){a=a.replace(".","");var c=this.ui[a];if(c)return c}return this.ui},_modelMapping:function(a,b,c,f){function g(a){for(var b=a.split("."),c=h.model,d="";b.length;)d=b.shift(),c=c[d];return{name:a,model:c,type:c?c.getType():null}}var h=this,i={};if(e.isArray(b)&&e.isArray(c)){c.length!==b.length&&(e.groupCollapsed("DIFFERENCE IN NUMBER OF MODELS EXPECTED AND RECEIVED"),e.warn("Please, configure the 'model_expects' attribute accordingly in '"+a+"' or check the models passed in '"+h.name+"'. [ADD LINK TO DOCUMENTATION]\n\nComponent: '"+h.name+"'\nSubcomponent: '"+a+"'\nNumber of Models Expected: "+c.length+"\nNumber of Models Received: "+b.length),e.groupEnd()),e.forEach(b,function(d,f){var j,k=g(d);c[f]?(j=c[f].name,c[f].type&&k.type!==c[f].type&&(e.groupCollapsed("UNEXPECTED MODEL TYPE: '"+k.type+"' instead of '"+c[f].type+"'"),e.warn("Please, configure the 'model_expects' attribute accordingly in '"+a+"' or check the models passed in '"+h.name+"'. [ADD LINK TO DOCUMENTATION]\n\nComponent: '"+h.name+"'\nSubcomponent: '"+a+"'\nExpected Model: '"+c[f].type+"'\nReceived Model'"+k.type+"'\nModel order: "+f),e.groupEnd())):(e.groupCollapsed("UNEXPECTED MODEL: '"+b[f]+"'"),e.warn("Please, configure the 'model_expects' attribute accordingly in '"+a+"' or check the models passed in '"+h.name+"'. [ADD LINK TO DOCUMENTATION]\n\nComponent: '"+h.name+"'\nSubcomponent: '"+a+"'\nNumber of Models Expected: "+c.length+"\nNumber of Models Received: "+b.length),e.groupEnd(),j=k.name),i[j]=k.model});var j=b.length,k=c.length;return k>j&&(c.splice(0,j),e.forEach(k,function(a){i[a.name]={}})),new d.Model(i,null,f,!0)}},getTranslationFunction:function(a){var b;try{b=this.model.get("language").getTFunction()}catch(c){this.parent&&this.parent!=this&&(b=this.parent.getTranslationFunction())}return b||(b=function(a){return a}),a?this._translatedStringFunction(b):b},_translatedStringFunction:function(a){return function(b){var c=a(b);return'<span data-vzb-translate="'+b+'">'+c+"</span>"}},translateStrings:function(){var a=this.getTranslationFunction(),b=this.placeholder.querySelectorAll("[data-vzb-translate]");0!==b.length&&e.forEach(b,function(b){b.innerHTML=a(b.getAttribute("data-vzb-translate"))})},isTool:function(){return"t"===this._id[0]},readyOnce:function(){},ready:function(){},resize:function(){}});g.isComponent=function(a){return a._id&&("t"===a._id[0]||"c"===a._id[0])},d.Component=g}.call(this),function(){"use strict";function a(a,b){function c(){var e=JSON.stringify(a.getObject()),f=arguments[0]||0;this._readyOnce?b():b(this);var g=JSON.stringify(a.getObject());f>=d?i.error("Max validation loop."):e!==g&&c.call(this,[++f])}var d=10;return c}function b(a,c){for(var d,e,f,g,h=Object.keys(c),j=h.length,k=0;j>k;k++)d=h[k],"_defs_"!==d&&(e=c[d],f=a[d],g=typeof e,"object"===g&&(g=i.isPlainObject(e)&&e._defs_?"object":i.isArray(e)?"array":"model"),"undefined"==typeof f&&("object"!==g&&"model"!==g?a[d]=e:a[d]=b({},e)),f=a[d],"number"===g&&isNaN(f)?a[d]=0:"string"===g&&"string"!=typeof f?a[d]="":"array"!==g||i.isArray(f)?"model"===g?(i.isObject(f)||(a[d]={}),a[d]=b(a[d],e)):"object"===g&&(i.isObject(f)||(a[d]={}),i.isObject(e._defs_)||(e._defs_={}),a[d]=i.extend(e._defs_,a[d])):a[d]=[]);return a}var c="vzb-loading",d="vzb-loading-error",e="vzb-placeholder",f="vzb-buttonlist-off",g=this,h=g.Vizabi,i=h.utils,j=h.Model.extend({init:function(c,d,e,f){if(this._id=i.uniqueId("tm"),this._type="tool",this.validate=a(this,f),c=c||{},d=d||{},c=b(c,d),this._super(c,null,e,!0),c.language){var g=this;this.on("change:language",function(){g.trigger("translate")})}}}),k=h.Component.extend({init:function(a,b){this._id=i.uniqueId("t"),
this.layout=new h.Layout,this.template=this.template||'<div class="vzb-tool vzb-tool-'+this.name+'"><div class="vzb-tool-content"><div class="vzb-tool-stage"><div class="vzb-tool-viz"></div><div class="vzb-tool-timeslider"></div></div><div class="vzb-tool-buttonlist"></div></div></div>',this.model_binds=this.model_binds||{},this.default_options=this.default_options||{};var c=this.validate.bind(this),d=this,e=i.merge({change:function(a,b){d._ready&&(d.model.validate(),d.triggerAll(a,b))},translate:function(a,b){d._ready&&d.model.load().then(function(){d.model.validate(),d.translateStrings()})},load_start:function(){d.beforeLoading()},load_error:function(){d.errorLoading()},ready:function(a){d._ready&&d.afterLoading()}},this.model_binds);b=b||{},this.model=new j(b,this.default_options,e,c),this.model.unfreeze(),this.ui=this.model.ui,this._super({name:this.name||this._id,placeholder:a},this),this._bindEvents(),this.render(),this._setUIOptions()},_bindEvents:function(){this.model.bind&&this.on(this.model.bind.get())},setOptions:function(a,b,c){b?this.model.reset(a):this.model.set(a),this._setUIOptions()},getOptions:function(){return this.model.getObject()||{}},beforeLoading:function(){i.hasClass(this.placeholder,c)||i.addClass(this.placeholder,c)},afterLoading:function(){i.removeClass(this.placeholder,c)},errorLoading:function(){i.addClass(this.placeholder,d)},validate:function(){},_setUIOptions:function(){i.addClass(this.placeholder,e),this.ui&&this.ui.buttons&&this.ui.buttons.length?i.removeClass(this.element,f):i.addClass(this.element,f)}});k.isTool=function(a){return a._id&&"t"===a._id[0]},h.Tool=k}.call(this),function(){var a=this,b=a.document.createElement("script");b.type="text/template",b.setAttribute("id","src/components/_gapminder/bubblesize/bubblesize.html"),b.innerHTML='<div class="vzb-bs-holder"> <input type="range" id="vzb-bs-slider" class="vzb-bs-slider" step="1"> </div>',a.document.body.appendChild(b)}.call(this),function(){var a=this,b=a.document.createElement("script");b.type="text/template",b.setAttribute("id","src/components/_gapminder/buttonlist/dialogs/axes/axes.html"),b.innerHTML='<div class="vzb-dialog-modal"> <div class="vzb-dialog-title"> <%=t ( "buttons/axes") %> </div> <div class="vzb-dialog-content"> <p>X axis</p> <div class="vzb-xaxis-container"></div> <p>Y axis</p> <div class="vzb-yaxis-container"></div> <div class="vzb-axes-options"></div> </div> <div class="vzb-dialog-buttons"> <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary"> OK </div> </div> </div>',a.document.body.appendChild(b)}.call(this),function(){var a=this,b=a.document.createElement("script");b.type="text/template",b.setAttribute("id","src/components/_gapminder/buttonlist/dialogs/colors/colors.html"),b.innerHTML='<div class="vzb-dialog-modal"> <div class="vzb-dialog-title"> <%=t ( "buttons/colors") %> </div> <div class="vzb-dialog-content"> <span class="vzb-caxis-container"></span> <div class="vzb-clegend-container"></div> </div> <div class="vzb-dialog-buttons"> <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary"> OK </div> </div> </div>',a.document.body.appendChild(b)}.call(this),function(){var a=this,b=a.document.createElement("script");b.type="text/template",b.setAttribute("id","src/components/_gapminder/buttonlist/dialogs/find/find.html"),b.innerHTML='<div class="vzb-dialog-modal"> <div class="vzb-dialog-title"> <%=t ( "buttons/find") %> </div> <div class="vzb-dialog-content vzb-find-filter"> <input id="vzb-find-search" class="vzb-dialog-input" type="text" placeholder="Search..." /> </div> <div class="vzb-dialog-content vzb-dialog-content-fixed"> <div class="vzb-find-list">  </div> </div> <div class="vzb-dialog-buttons"> <div class="vzb-dialog-bubbleopacity vzb-dialog-control"></div> <div id="vzb-find-deselect" class="vzb-dialog-button"> <%=t ( "buttons/deselect") %> </div> <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary"> <%=t ( "buttons/ok") %> </div> </div> </div>',a.document.body.appendChild(b)}.call(this),function(){var a=this,b=a.document.createElement("script");b.type="text/template",b.setAttribute("id","src/components/_gapminder/buttonlist/dialogs/moreoptions/moreoptions.html"),b.innerHTML='<div class="vzb-dialog-modal"> <div class="vzb-dialog-title"> <%=t ( "buttons/more_options") %> </div> <div class="vzb-dialog-content"> <p>Regular opacity</p> <div class="vzb-dialog-bubbleopacity-regular"></div> <p>Opacity of non-selected</p> <div class="vzb-dialog-bubbleopacity-selectdim"></div> <div class = "vzb-dialog-br"></div> <p>X axis</p> <div class="vzb-xaxis-container"></div> <p>Y axis</p> <div class="vzb-yaxis-container"></div> <div class="vzb-axes-options"></div> <div class = "vzb-dialog-br"></div> <p>Size</p> <div class="vzb-saxis-container"></div> <div class="vzb-dialog-bubblesize"></div> <div class = "vzb-dialog-br"></div> <p>Colors</p> <div class="vzb-caxis-container"></div> <div class="vzb-clegend-container"></div> </div> <div class="vzb-dialog-buttons"> <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary"> OK </div> </div> </div>',a.document.body.appendChild(b)}.call(this),function(){var a=this,b=a.document.createElement("script");b.type="text/template",b.setAttribute("id","src/components/_gapminder/buttonlist/dialogs/size/size.html"),b.innerHTML='<div class="vzb-dialog-modal"> <div class="vzb-dialog-title"> <%=t ( "buttons/size") %> </div> <div class="vzb-dialog-content"> <p>Chose what to display as size</p> <div class="vzb-saxis-container"></div> <p>Choose maximum size of bubbles:</p> <div class="vzb-dialog-bubblesize"></div> </div> <div class="vzb-dialog-buttons"> <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary"> OK </div> </div> </div>',a.document.body.appendChild(b)}.call(this),function(){var a=this,b=a.document.createElement("script");b.type="text/template",b.setAttribute("id","src/components/_gapminder/timeslider/timeslider.html"),b.innerHTML='<div class="vzb-timeslider"> <div class="vzb-ts-slider-wrapper"> <svg class="vzb-ts-slider"> <g> <g class="vzb-ts-slider-axis"></g> <g class="vzb-ts-slider-slide"> <circle class="vzb-ts-slider-handle"></circle> <text class="vzb-ts-slider-value"></text> </g> </g> </svg> </div>  <div class="vzb-ts-btns"> <button class="vzb-ts-btn-play vzb-ts-btn"> <svg class="vzb-icon vzb-icon-play" width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1576 927l-1328 738q-23 13-39.5 3t-16.5-36v-1472q0-26 16.5-36t39.5 3l1328 738q23 13 23 31t-23 31z"/></svg> </button> <button class="vzb-ts-btn-pause vzb-ts-btn"> <svg class="vzb-icon vzb-icon-pause" width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1664 192v1408q0 26-19 45t-45 19h-512q-26 0-45-19t-19-45v-1408q0-26 19-45t45-19h512q26 0 45 19t19 45zm-896 0v1408q0 26-19 45t-45 19h-512q-26 0-45-19t-19-45v-1408q0-26 19-45t45-19h512q26 0 45 19t19 45z"/></svg> </button> </div> </div>',a.document.body.appendChild(b)}.call(this),function(){var a=this,b=a.document.createElement("script");b.type="text/template",b.setAttribute("id","src/tools/barchart/barchart.html"),b.innerHTML=' <svg class="vzb-barchart"> <g class="vzb-bc-graph"> <g class="vzb-bc-bars"></g> <g class="vzb-bc-bar-labels"></g> <text class="vzb-bc-axis-y-title"></text> <g class="vzb-bc-axis-x"></g> <g class="vzb-bc-axis-y"></g> <g class="vzb-bc-axis-labels">  </g> </g> </svg>',a.document.body.appendChild(b)}.call(this),function(){var a=this,b=a.document.createElement("script");b.type="text/template",b.setAttribute("id","src/tools/bubblechart/bubblechart.html"),b.innerHTML=' <div class="vzb-bubblechart"> <svg class="vzb-bubblechart-svg"> <g class="vzb-bc-graph"> <text class="vzb-bc-year"></text> <svg class="vzb-bc-axis-x"><g></g></svg> <svg class="vzb-bc-axis-y"><g></g></svg> <line class="vzb-bc-projection-x"></line> <line class="vzb-bc-projection-y"></line> <svg class="vzb-bc-bubbles-crop"> <g class="vzb-bc-trails"></g> <g class="vzb-bc-bubbles"></g> <g class="vzb-bc-labels"></g> </svg> <g class="vzb-bc-axis-y-title"></g> <g class="vzb-bc-axis-x-title"></g> <g class="vzb-bc-axis-s-title"></g> <g class="vzb-bc-axis-c-title"></g> <rect class="vzb-bc-zoomRect"></rect> </g> <filter id="vzb-bc-blur-effect"> <feGaussianBlur stdDeviation="2" /> </filter> </svg>  <div class="vzb-tooltip vzb-hidden"></div> </div>',a.document.body.appendChild(b)}.call(this),function(){var a=this,b=a.document.createElement("script");b.type="text/template",b.setAttribute("id","src/tools/linechart/linechart.html"),b.innerHTML=' <div class="vzb-linechart"> <svg class="vzb-lc-graph"> <g> <g class="vzb-lc-axis-x"></g> <text class="vzb-lc-axis-x-value"></text> <text class="vzb-lc-axis-y-value"></text> <svg class="vzb-lc-lines"></svg> <g class="vzb-lc-axis-y"></g> <line class="vzb-lc-projection-x"></line>; <line class="vzb-lc-projection-y"></line>; <g class="vzb-lc-labels"> <line class="vzb-lc-vertical-now"></line>; </g> <g class="vzb-lc-axis-y-title"></g> </g>  </svg> <div class="vzb-tooltip vzb-hidden"></div> </div>',a.document.body.appendChild(b)}.call(this),function(){"use strict";var a=this.Vizabi;a.utils;a._require("d3")&&a.Component.extend("gapminder-bubbleopacity",{init:function(a,b){this.template='<div class="vzb-bo-holder"><input type="range" id="vzb-bo-slider" class="vzb-bo-slider" step="1"></div>',this.model_expects=[{name:"entities",type:"entities"}];var c=this;this.arg=a.arg,this.model_binds={"change:entities:select":function(a){c.updateView()}},this.model_binds["change:entities:"+this.arg]=function(a){c.updateView()},this._super(a,b)},readyOnce:function(){var a=this;this.element=d3.select(this.element),this.slider=this.element.selectAll("#vzb-bo-slider"),this.slider.attr("min",0).attr("max",1).attr("step",.1).on("input",function(){a._setModel()}),this.updateView()},updateView:function(){var a=(this.model.entities.select.length,this.model.entities[this.arg]);this.slider.attr("value",a)},_setModel:function(){this.model.entities[this.arg]=+d3.event.target.value}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi;b.utils;if(b._require("d3")){b.Component.extend("gapminder-bubblesize",{init:function(a,b){this.template=this.template||"src/components/_gapminder/bubblesize/bubblesize.html",this.model_expects=[{name:"size",type:"size"}],this._super(a,b)},readyOnce:function(){var a=this.model.size.max,b=this;this.element=d3.select(this.element),this.indicatorEl=this.element.select("#vzb-bs-indicator"),this.sliderEl=this.element.selectAll("#vzb-bs-slider"),this.sliderEl.attr("min",0).attr("max",1).attr("step",.01).attr("value",a).on("input",function(){b.slideHandler()})},modelReady:function(){this.indicatorEl.text(this.model.size.max)},resize:function(){},slideHandler:function(){this._setValue(+d3.event.target.value)},_setValue:function(a){var b=50,c=new Date;null!=this._updTime&&c-this._updTime<b||(this._updTime=c,this.model.size.max=a)}})}}.call(this),function(){"use strict";function a(a){a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()}function b(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}var c=this,d=c.Vizabi,e=(d.Promise,d.utils);if(d._require("d3")){var f="vzb-active",g="vzb-unavailable",h="vzb-force-fullscreen";d.Component.extend("gapminder-buttonlist",{init:function(a,b){var c=this;this.name="buttonlist",this.template='<div class="vzb-buttonlist"></div>',this.model_expects=[{name:"state",type:"model"},{name:"ui",type:"model"},{name:"language",type:"language"}],this._available_buttons={find:{title:"buttons/find",icon:"search",dialog:!0},moreoptions:{title:"buttons/more_options",icon:"gear",dialog:!0},colors:{title:"buttons/colors",icon:"paint-brush",dialog:!0},size:{title:"buttons/size",icon:"circle",dialog:!0},fullscreen:{title:"buttons/expand",icon:"expand",dialog:!1,func:this.toggleFullScreen.bind(this)},trails:{title:"buttons/trails",icon:"trails",dialog:!1,func:this.toggleBubbleTrails.bind(this)},lock:{title:"buttons/lock",icon:"lock",dialog:!1,func:this.toggleBubbleLock.bind(this)},axes:{title:"buttons/axes",icon:"axes",dialog:!0},_default:{title:"Button",icon:"asterisk",dialog:!1}},this._active_comp=!1,this.model_binds={"change:state:entities:select":function(){c._readyOnce&&(0===c.model.state.entities.select.length&&(c.model.state.time.lockNonSelected=0),c.setBubbleTrails(),c.setBubbleLock(),c.entitiesSelected_1!==c.model.state.entities.select.length>0&&c.scrollToEnd(),c.entitiesSelected_1=c.model.state.entities.select.length>0)}},this._super(a,b)},readyOnce:function(){var a=this;this.element=d3.select(this.element),this.buttonContainerEl=this.element.append("div").attr("class","vzb-buttonlist-container-buttons"),this.dialogContainerEl=this.element.append("div").attr("class","vzb-buttonlist-container-dialogs"),this.model.ui.buttons&&this._addButtons();var b=this.element.selectAll(".vzb-buttonlist-btn");b.on("click",function(){var b=d3.select(this),c=b.attr("data-btn"),d=b.attr("class"),e=a._available_buttons[c];e&&e.dialog?-1!==d.indexOf(f)?a.closeDialog(c):a.openDialog(c):e.func&&e.func(c)});var c=this.element.selectAll("[data-click='closeDialog']");c.on("click",function(){a.closeAllDialogs()}),this._prev_body_overflow=document.body.style.overflow,this.setBubbleTrails(),this.setBubbleLock()},_addButtons:function(){this._components_config=[];var a=this.model.ui.buttons,b=[];if(a.length){for(var c=0;c<a.length;c++){var d=a[c],f=this._available_buttons[d];if(f&&f.dialog){var g=this._components_config;g.push({component:"gapminder-buttonlist-"+d,placeholder:'.vzb-buttonlist-dialog[data-btn="'+d+'"]',model:["state","ui","language"]}),f.component=g.length-1}var h=f?d:"_default",i=this._available_buttons[h];i.id=d,i.icon=this._icons[i.icon],b.push(i)}var j=this.getTranslationFunction(!0);this.buttonContainerEl.selectAll("button").data(b).enter().append("button").attr("class","vzb-buttonlist-btn").attr("data-btn",function(a){return a.id}).html(function(a){return"<span class='vzb-buttonlist-btn-icon fa'>"+a.icon+"</span><span class='vzb-buttonlist-btn-title'>"+j(a.title)+"</span>"}),this.dialogContainerEl.selectAll("div").data(b).enter().append("div").attr("class","vzb-buttonlist-dialog").attr("data-btn",function(a){return a.id}),this.loadComponents();var k=this;e.forEach(this.components,function(a){a.render(),k.on("resize",function(){a.trigger("resize")})})}},scrollToEnd:function(){var a=0,b=d3.select(".vzb-tool");b.classed("vzb-portrait")&&b.classed("vzb-small")?(this.model.state.entities.select.length>0&&(a=this.buttonContainerEl[0][0].scrollWidth),this.buttonContainerEl[0][0].scrollLeft=a):(this.model.state.entities.select.length>0&&(a=this.buttonContainerEl[0][0].scrollHeight),this.buttonContainerEl[0][0].scrollTop=a)},resize:function(){},openDialog:function(a){this.closeAllDialogs();var b=this.element.selectAll(".vzb-buttonlist-btn[data-btn='"+a+"']"),c=this.element.selectAll(".vzb-buttonlist-dialog[data-btn='"+a+"']");b.classed(f,!0),c.classed(f,!0),this._active_comp=this.components[this._available_buttons[a].component],this._active_comp.open()},closeDialog:function(a){var b=this.element.selectAll(".vzb-buttonlist-btn[data-btn='"+a+"']"),c=this.element.selectAll(".vzb-buttonlist-dialog[data-btn='"+a+"']");b.classed(f,!1),c.classed(f,!1),this._active_comp&&this._active_comp.close(),this._active_comp=!1},closeAllDialogs:function(){var a=this.element.selectAll(".vzb-buttonlist-btn"),b=this.element.selectAll(".vzb-buttonlist-dialog");a.classed(f,!1),b.classed(f,!1),this._active_comp&&this._active_comp.close(),this._active_comp=!1},toggleBubbleTrails:function(){this.model.state.time.trails=!this.model.state.time.trails,this.setBubbleTrails()},setBubbleTrails:function(){var a="trails",b=this.element.selectAll(".vzb-buttonlist-btn[data-btn='"+a+"']");b.classed(f,this.model.state.time.trails),b.style("display",0==this.model.state.entities.select.length?"none":"inline-block")},toggleBubbleLock:function(a){if(0!=this.model.state.entities.select.length){var b=d3.time.format(this.model.state.time.formatInput),c=this.model.state.time.lockNonSelected;c=c?0:b(this.model.state.time.value),this.model.state.time.lockNonSelected=c,this.setBubbleLock()}},setBubbleLock:function(){var a="lock",b=this.element.selectAll(".vzb-buttonlist-btn[data-btn='"+a+"']"),c=this.model.language.getTFunction(),d=this.model.state.time.lockNonSelected;b.classed(g,0==this.model.state.entities.select.length),b.style("display",0==this.model.state.entities.select.length?"none":"inline-block"),b.classed(f,d),b.select(".vzb-buttonlist-btn-title").text(d?d:c("buttons/lock")),b.select(".vzb-buttonlist-btn-icon").html(this._icons[d?"lock":"unlock"])},toggleFullScreen:function(d){for(var g=this,i=g.placeholder,j=!1,k=this.element.selectAll(".vzb-buttonlist-btn[data-btn='"+d+"']"),l=!this.model.ui.fullscreen,m=l?"hidden":this._prev_body_overflow;!(j=e.hasClass(i,"vzb-placeholder"));)g=this.parent,i=g.placeholder;l?a(i):b(),e.classed(i,h,l),this.model.ui.fullscreen=l;var n=this.model.language.getTFunction();k.classed(f,l),k.select(".vzb-buttonlist-btn-icon").html(this._icons[l?"unexpand":"expand"]),k.select(".vzb-buttonlist-btn-title").text(n("buttons/"+(l?"unexpand":"expand"))),document.body.style.overflow=m,function(){event=c.document.createEvent("HTMLEvents"),event.initEvent("resize",!0,!0),event.eventName="resize",c.dispatchEvent(event)}()},_icons:{"paint-brush":'<svg class="vzb-icon vzb-icon-paint-brush" width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1615 0q70 0 122.5 46.5t52.5 116.5q0 63-45 151-332 629-465 752-97 91-218 91-126 0-216.5-92.5t-90.5-219.5q0-128 92-212l638-579q59-54 130-54zm-909 1034q39 76 106.5 130t150.5 76l1 71q4 213-129.5 347t-348.5 134q-123 0-218-46.5t-152.5-127.5-86.5-183-29-220q7 5 41 30t62 44.5 59 36.5 46 17q41 0 55-37 25-66 57.5-112.5t69.5-76 88-47.5 103-25.5 125-10.5z"/></svg>',search:'<svg class="vzb-icon vzb-icon-search" width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"/></svg>',circle:'<svg class="vzb-icon vzb-icon-circle" width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1664 896q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"/></svg>',expand:'<svg class="vzb-icon vzb-icon-expand" width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M883 1056q0 13-10 23l-332 332 144 144q19 19 19 45t-19 45-45 19h-448q-26 0-45-19t-19-45v-448q0-26 19-45t45-19 45 19l144 144 332-332q10-10 23-10t23 10l114 114q10 10 10 23zm781-864v448q0 26-19 45t-45 19-45-19l-144-144-332 332q-10 10-23 10t-23-10l-114-114q-10-10-10-23t10-23l332-332-144-144q-19-19-19-45t19-45 45-19h448q26 0 45 19t19 45z"/></svg>',asterisk:'<svg class="vzb-icon vzb-icon-asterisk" width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1546 1050q46 26 59.5 77.5t-12.5 97.5l-64 110q-26 46-77.5 59.5t-97.5-12.5l-266-153v307q0 52-38 90t-90 38h-128q-52 0-90-38t-38-90v-307l-266 153q-46 26-97.5 12.5t-77.5-59.5l-64-110q-26-46-12.5-97.5t59.5-77.5l266-154-266-154q-46-26-59.5-77.5t12.5-97.5l64-110q26-46 77.5-59.5t97.5 12.5l266 153v-307q0-52 38-90t90-38h128q52 0 90 38t38 90v307l266-153q46-26 97.5-12.5t77.5 59.5l64 110q26 46 12.5 97.5t-59.5 77.5l-266 154z"/></svg>',trails:'<svg class="vzb-icon vzb-icon-trails" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1344 1024q133 0 226.5 93.5t93.5 226.5-93.5 226.5-226.5 93.5-226.5-93.5-93.5-226.5q0-12 2-34l-360-180q-92 86-218 86-133 0-226.5-93.5t-93.5-226.5 93.5-226.5 226.5-93.5q126 0 218 86l360-180q-2-22-2-34 0-133 93.5-226.5t226.5-93.5 226.5 93.5 93.5 226.5-93.5 226.5-226.5 93.5q-126 0-218-86l-360 180q2 22 2 34t-2 34l360 180q92-86 218-86z"/></svg>',lock:'<svg class="vzb-icon vzb-icon-lock" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M640 768h512v-192q0-106-75-181t-181-75-181 75-75 181v192zm832 96v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h32v-192q0-184 132-316t316-132 316 132 132 316v192h32q40 0 68 28t28 68z"/></svg>',unlock:'<svg class="vzb-icon vzb-icon-unlock" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1376 768q40 0 68 28t28 68v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h32v-320q0-185 131.5-316.5t316.5-131.5 316.5 131.5 131.5 316.5q0 26-19 45t-45 19h-64q-26 0-45-19t-19-45q0-106-75-181t-181-75-181 75-75 181v320h736z"/></svg>',unexpand:'<svg class="vzb-icon vzb-icon-unexpand" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M896 960v448q0 26-19 45t-45 19-45-19l-144-144-332 332q-10 10-23 10t-23-10l-114-114q-10-10-10-23t10-23l332-332-144-144q-19-19-19-45t19-45 45-19h448q26 0 45 19t19 45zm755-672q0 13-10 23l-332 332 144 144q19 19 19 45t-19 45-45 19h-448q-26 0-45-19t-19-45v-448q0-26 19-45t45-19 45 19l144 144 332-332q10-10 23-10t23 10l114 114q10 10 10 23z"/></svg>',axes:'<svg class="vzb-icon vzb-icon-axes" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg"><path d="M430.25,379.655l-75.982-43.869v59.771H120.73V151.966h59.774l-43.869-75.983L92.767,0L48.898,75.983L5.029,151.966h59.775 v271.557c0,15.443,12.52,27.965,27.963,27.965h261.5v59.773l75.982-43.869l75.982-43.867L430.25,379.655z"/></svg>',gear:'<svg class="vzb-icon vzb-icon-gear" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z"/></svg>'}})}}.call(this),function(){"use strict";var a=this,b=a.Vizabi;b._require("d3")&&b.Component.extend("gapminder-buttonlist-dialog",{init:function(a,b){this.name=this.name||"",this.model_expects=this.model_expects||[{name:"state",type:"model"},{name:"ui",type:"model"},{name:"language",type:"language"}],this.template="src/components/_gapminder/buttonlist/dialogs/"+this.name+"/"+this.name+".html",this._super(a,b)},readyOnce:function(){this.element=d3.select(this.element)},open:function(){},close:function(){}})}.call(this),function(){"use strict";var a=this.Vizabi,b=a.Component.get("gapminder-buttonlist-dialog");a.Component.register("gapminder-buttonlist-axes",b.extend({init:function(a,b){this.name="axes";this.components=[{component:"gapminder-indicatorpicker",placeholder:".vzb-xaxis-container",model:["state.marker.axis_x","language"]},{component:"gapminder-indicatorpicker",placeholder:".vzb-yaxis-container",model:["state.marker.axis_y","language"]},{component:"gapminder-simplecheckbox",placeholder:".vzb-axes-options",model:["state","language"],submodel:"time",checkbox:"adaptMinMaxZoom"}],this._super(a,b)}}))}.call(this),function(){"use strict";var a=this.Vizabi,b=(a.utils,a.Component.get("gapminder-buttonlist-dialog"));a._require("d3")&&a.Component.register("gapminder-buttonlist-colors",b.extend({init:function(a,b){this.name="colors",this.components=[{component:"gapminder-indicatorpicker",placeholder:".vzb-caxis-container",model:["state.marker.color","language"]},{component:"gapminder-colorlegend",placeholder:".vzb-clegend-container",model:["state.marker.color","state.entities","language"]}],this._super(a,b)}}))}.call(this),function(){"use strict";var a=this.Vizabi,b=(a.utils,a.Component.get("gapminder-buttonlist-dialog"));a._require("d3")&&a.Component.register("gapminder-buttonlist-find",b.extend({init:function(a,b){this.name="find";var c=this;this.components=[{component:"gapminder-bubbleopacity",placeholder:".vzb-dialog-bubbleopacity",model:["state.entities"],arg:"opacitySelectDim"}],this.model_binds={"change:state:entities:select":function(a){c.update()},ready:function(a){c._readyOnce&&c.update()}},this._super(a,b)},readyOnce:function(){this.element=d3.select(this.element),this.list=this.element.select(".vzb-find-list"),this.input_search=this.element.select("#vzb-find-search"),this.deselect_all=this.element.select("#vzb-find-deselect"),this.opacity_nonselected=this.element.select(".vzb-dialog-bubbleopacity");var a=this;this.input_search.on("input",function(){a.showHideSearch()}),this.deselect_all.on("click",function(){a.deselectEntities()}),this._super(),this.update()},open:function(){this.input_search.node().value="",this.showHideSearch()},update:function(){var a=this,b=this.model.state.entities.getSelected(),c=this.model.state.marker.label,d=c.getItems().map(function(a){return{geo:a.geo,name:c.getValue(a)}});d.sort(function(a,b){return a.name<b.name?-1:1}),this.list.html("");var e=this.list.selectAll(".vzb-find-item").data(d).enter().append("div").attr("class","vzb-find-item vzb-dialog-checkbox");e.append("input").attr("type","checkbox").attr("class","vzb-find-item").attr("id",function(a){return"-find-"+a.geo}).property("checked",function(a){return-1!==b.indexOf(a.geo)}).on("change",function(b){a.model.state.entities.selectEntity(b)}),e.append("label").attr("for",function(a){return"-find-"+a.geo}).text(function(a){return a.name}).on("mouseover",function(b){a.model.state.entities.highlightEntity(b)}).on("mouseout",function(b){a.model.state.entities.clearHighlighted()}),this.showHideSearch(),this.showHideDeselect()},showHideSearch:function(){var a=this.input_search.node().value||"";a=a.toLowerCase(),this.list.selectAll(".vzb-find-item").classed("vzb-hidden",function(b){var c=b.name.toLowerCase();return-1===c.indexOf(a)})},showHideDeselect:function(){var a=!!this.model.state.entities.select.length;this.deselect_all.classed("vzb-hidden",!a),this.opacity_nonselected.classed("vzb-hidden",!a)},deselectEntities:function(){this.model.state.entities.clearSelected()}}))}.call(this),function(){"use strict";var a=this.Vizabi,b=a.Component.get("gapminder-buttonlist-dialog");a.Component.register("gapminder-buttonlist-moreoptions",b.extend({init:function(a,b){this.name="moreoptions",this.components=[{component:"gapminder-indicatorpicker",placeholder:".vzb-xaxis-container",model:["state.marker.axis_x","language"]},{component:"gapminder-indicatorpicker",placeholder:".vzb-yaxis-container",model:["state.marker.axis_y","language"]},{component:"gapminder-simplecheckbox",placeholder:".vzb-axes-options",model:["state","language"],submodel:"time",checkbox:"adaptMinMaxZoom"},{component:"gapminder-bubblesize",placeholder:".vzb-dialog-bubblesize",model:["state.marker.size"]},{component:"gapminder-indicatorpicker",placeholder:".vzb-saxis-container",model:["state.marker.size","language"]},{component:"gapminder-indicatorpicker",placeholder:".vzb-caxis-container",model:["state.marker.color","language"]},{component:"gapminder-colorlegend",placeholder:".vzb-clegend-container",model:["state.marker.color","state.entities","language"]},{component:"gapminder-bubbleopacity",placeholder:".vzb-dialog-bubbleopacity-regular",model:["state.entities"],arg:"opacityRegular"},{component:"gapminder-bubbleopacity",placeholder:".vzb-dialog-bubbleopacity-selectdim",model:["state.entities"],arg:"opacitySelectDim"}],this._super(a,b)},readyOnce:function(){this.element=d3.select(this.element)}}))}.call(this),function(){"use strict";var a=this.Vizabi,b=a.Component.get("gapminder-buttonlist-dialog");a.Component.register("gapminder-buttonlist-size",b.extend({init:function(a,b){this.name="size",this.components=[{component:"gapminder-bubblesize",placeholder:".vzb-dialog-bubblesize",model:["state.marker.size"],ui:{show_button:!1}},{component:"gapminder-indicatorpicker",placeholder:".vzb-saxis-container",model:["state.marker.size","language"],ui:{selectIndicator:!0,selectScaletype:!1}}],this._super(a,b)}}))}.call(this),function(){"use strict";var a=this.Vizabi,b=a.utils,c="which";a._require("d3")&&a.Component.extend("gapminder-colorlegend",{init:function(a,b){var c=this;this.template='<div class="vzb-cl-holder"></div>',this.model_expects=[{name:"color",type:"color"},{name:"entities",type:"entities"},{name:"language",type:"language"}],this.needsUpdate=!1,this.which_1=!1,this.scaleType_1=!1,this.model_binds={"change:color":function(a){(c.model.color.which!=c.which_1||c.model.color.scaleType!=c.scaleType_1)&&(c.needsUpdate=!0,c.which_1=c.model.color.which,c.scaleType_1=c.model.color.scaleType)},"change:language":function(a){c.updateView()},ready:function(a){c._readyOnce&&c.needsUpdate&&(c.updateView(),c.needsUpdate=!1)}},this._super(a,b)},readyOnce:function(){this.element=d3.select(this.element),this.listColorsEl=this.element.append("div").attr("class","vzb-cl-colorList"),this.rainbowEl=this.listColorsEl.append("div").attr("class","vzb-cl-rainbow"),this.worldmapEl=this.listColorsEl.append("div").attr("class","vzb-cl-worldmap"),this.colorPicker=d3.svg.colorPicker(),this.element.call(this.colorPicker),this.worldMap=d3.svg.worldMap(),this.worldmapEl.call(this.worldMap),this.updateView()},updateView:function(){var a=this;this.translator=this.model.language.getTFunction();var d=this.model.color.palette,e="_default";Object.keys(this.model.color.getPalettes()).indexOf(this.model.color[c])>-1&&(e=this.model.color[c]);var f=this.model.color.getPalettes()[e],g=this.listColorsEl.selectAll(".vzb-cl-option").data(b.keys(f),function(a){return a});if(g.exit().remove(),g.enter().append("div").attr("class","vzb-cl-option").each(function(){d3.select(this).append("div").attr("class","vzb-cl-color-sample"),d3.select(this).append("div").attr("class","vzb-cl-color-legend")}).on("mouseover",function(){if(a.model.color.isUserSelectable(e)){var b=d3.select(this).select(".vzb-cl-color-sample");b.style("border-width","5px"),b.style("background-color","transparent")}}).on("mouseout",function(b){if(a.model.color.isUserSelectable(e)){var c=d3.select(this).select(".vzb-cl-color-sample");c.style("border-width","0px"),c.style("background-color",a.model.color.palette[b])}}).on("click",function(b){a.model.color.isUserSelectable(e)&&a.colorPicker.colorOld(d[b]).colorDef(f[b]).callback(function(c){a.model.color.setColor(c,b)}).show(!0)}),"indicator"==this.model.color.use?this.rainbowEl.classed("vzb-hidden",!1).style("height",25*b.keys(f).length+5+"px").style("background","linear-gradient("+b.values(d._data).join(", ")+")"):this.rainbowEl.classed("vzb-hidden",!0),"geo.region"==this.model.color[c]){var h=this.worldmapEl.classed("vzb-hidden",!1).select("svg").selectAll("g");h.each(function(){var a=d3.select(this),b=d[a.attr("id")];a.selectAll("path").style("fill",b)}).style("opacity",.8).on("mouseover",function(){var c=d3.select(this),d=c.attr("id");h.selectAll("path").style("opacity",.5),c.selectAll("path").style("opacity",1);var e=b.values(a.model.color._filtered).map(function(a){return a[a.length-1]}).filter(function(a){return a["geo.region"]==d}).map(function(a){return{geo:a.geo}});a.model.entities.setHighlighted(e)}).on("mouseout",function(){h.selectAll("path").style("opacity",.8),a.model.entities.clearHighlighted()}).on("click",function(b){
if(a.model.color.isUserSelectable(e)){var c=d3.select(this),g=c.attr("id");a.colorPicker.colorOld(d[g]).colorDef(f[g]).callback(function(b){a.model.color.setColor(b,g)}).show(!0)}}),g.classed("vzb-hidden",!0)}else this.worldmapEl.classed("vzb-hidden",!0),g.classed("vzb-hidden",!1);g.each(function(b,e){if(d3.select(this).select(".vzb-cl-color-sample").style("background-color",d[b]).style("border","1px solid "+d[b]),"indicator"==a.model.color.use){var f=a.model.color.getScale().domain();d3.select(this).select(".vzb-cl-color-legend").text(a.model.color.tickFormatter(f[e]))}else d3.select(this).select(".vzb-cl-color-legend").text(a.translator("color/"+a.model.color[c]+"/"+b))})}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils,d="which",e="scaleType";if(b._require("d3")){var f={"geo.region":{use:"property",unit:"",scales:["ordinal"]},geo:{use:"property",unit:"",scales:["ordinal"]},time:{use:"indicator",unit:"year",scales:["time"]},lex:{use:"indicator",unit:"years",scales:["linear"]},gdp_per_cap:{use:"indicator",unit:"$/year/person",scales:["log","linear"]},pop:{use:"indicator",unit:"",scales:["linear","log"]},_default:{use:"value",unit:"",scales:["linear","log"]}};b.Component.extend("gapminder-indicatorpicker",{init:function(a,b){this.template='<span class="vzb-ip-holder"><select class="vzb-ip-indicator"></select><select class="vzb-ip-scaletype"></select></span>';var d=this;this.model_expects=[{name:"axis"},{name:"language",type:"language"}],this.model_binds={"change:axis":function(a){d.updateView()},"change:language":function(a){d.updateView()}},this._super(a,b),this.ui=c.extend({selectIndicator:!0,selectScaletype:!0},this.ui)},ready:function(){this.updateView()},readyOnce:function(){var a=this;this.element=d3.select(this.element),this.el_select_indicator=this.element.select(".vzb-ip-indicator"),this.el_select_scaletype=this.element.select(".vzb-ip-scaletype"),this.el_select_indicator.on("change",function(){a._setModel(d,this.value)}),this.el_select_scaletype.on("change",function(){a._setModel(e,this.value)})},updateView:function(){var a=this;this.translator=this.model.language.getTFunction();var b="_default",c={};c[d]=Object.keys(f),c[d].indexOf(this.model.axis[d])>-1&&(b=this.model.axis[d]),c[e]=f[b].scales;var g=this.el_select_indicator.selectAll("option").data(c[d],function(a){return a}),h=this.el_select_scaletype.selectAll("option").data(c[e],function(a){return a});g.exit().remove(),h.exit().remove(),g.enter().append("option").attr("value",function(a){return a}),h.enter().append("option").attr("value",function(a){return a}),g.text(function(b){return a.translator("indicator/"+b)}),h.text(function(b){return a.translator("scaletype/"+b)}),this.el_select_indicator[0][0].value=this.model.axis[d],this.el_select_scaletype[0][0].value=this.model.axis[e],this.el_select_indicator.style("display",this.ui.selectIndicator?"auto":"none").attr("disabled",c[d].length<=1?"true":null),this.el_select_scaletype.style("display",this.ui.selectScaletype?"auto":"none").attr("disabled",c[e].length<=1?"true":null)},_setModel:function(a,b){var c=this.model.axis,e={};e[a]=b,a==d&&(e.use=f[b].use,e.unit=f[b].unit,-1==f[b].scales.indexOf(c.scaleType)&&(e.scaleType=f[b].scales[0])),c.set(e)}})}}.call(this),function(){"use strict";var a=this.Vizabi;a.utils;a._require("d3")&&a.Component.extend("gapminder-simplecheckbox",{init:function(a,b){this.template='<span class="vzb-sc-holder vzb-dialog-checkbox"><input type="checkbox"><label></label></span>';var c=this;this.checkbox=a.checkbox,this.submodel=a.submodel,this.model_expects=[{name:"mdl"},{name:"language",type:"language"}],this.model_binds={"change:language":function(a){c.updateView()}},this.model_binds["change:mdl:"+this.submodel+":"+this.checkbox]=function(){c.updateView()},this._super(a,b)},ready:function(){this.updateView()},readyOnce:function(){var a=this;this.element=d3.select(this.element);var b="-check-"+1e3*Math.random();this.labelEl=this.element.select("label").attr("for",b),this.checkEl=this.element.select("input").attr("id",b).on("change",function(){a._setModel(d3.select(this).property("checked"))})},updateView:function(){this.translator=this.model.language.getTFunction(),this.labelEl.text(this.translator("check/"+this.checkbox)),this.checkEl.property("checked",!!this.model.mdl[this.submodel][this.checkbox])},_setModel:function(a){this.model.mdl[this.submodel][this.checkbox]=a}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=(b.Promise,b.utils);if(b._require("d3")){var d="vzb-playing",e="vzb-ts-hide-play-button",f="vzb-ts-dragging",g="vzb-ts-axis-aligned",h="vzb-ts-show-value",i="vzb-ts-show-value-when-drag-play",j={year:d3.time.format("%Y"),month:d3.time.format("%b"),week:d3.time.format("week %U"),day:d3.time.format("%d/%m/%Y"),hour:d3.time.format("%d/%m/%Y %H"),minute:d3.time.format("%d/%m/%Y %H:%M"),second:d3.time.format("%d/%m/%Y %H:%M:%S")},k={small:{margin:{top:9,right:15,bottom:10,left:15},radius:8,label_spacing:10},medium:{margin:{top:9,right:15,bottom:10,left:15},radius:10,label_spacing:12},large:{margin:{top:9,right:15,bottom:10,left:15},radius:11,label_spacing:14}};b.Component.extend("gapminder-timeslider",{init:function(a,b){this.template=this.template||"src/components/_gapminder/timeslider/timeslider.html",this.model_expects=[{name:"time",type:"time"}];var d=this;this.model_binds={"change:time":function(a,b){-1!==["change:time:start","change:time:end"].indexOf(a)&&d.changeLimits(),d.changeTime();var c=d.model.time.playing;d._setHandle(c)}},this.ui=c.extend({show_limits:!1,show_value:!1,show_value_when_drag_play:!0,show_button:!0,class_axis_aligned:!1},a.ui,this.ui),this._super(a,b),this.width=0,this.height=0},readyOnce:function(){var a=this;this.element=d3.select(this.element),this.slider_outer=this.element.select(".vzb-ts-slider"),this.slider=this.slider_outer.select("g"),this.axis=this.element.select(".vzb-ts-slider-axis"),this.slide=this.element.select(".vzb-ts-slider-slide"),this.handle=this.slide.select(".vzb-ts-slider-handle"),this.valueText=this.slide.select(".vzb-ts-slider-value"),this.xScale=d3.time.scale().clamp(!0),this.xAxis=d3.svg.axis().orient("bottom").tickSize(0),this.valueText.attr("text-anchor","middle").attr("dy","-1em");var b=a._getBrushed(),d=a._getBrushedEnd();this.brush=d3.svg.brush().x(this.xScale).extent([0,0]).on("brush",function(){c.throttle(b.bind(this),10)}).on("brushend",function(){c.throttle(d.bind(this),10)}),this.slide.call(this.brush),this.slide.selectAll(".extent,.resize").remove(),this.parent.on("myEvent",function(b,c,d){a.element.select(".vzb-ts-slider-wrapper").style("right",d+"px"),k[a.getLayoutProfile()].margin={bottom:0,left:0,right:0,top:0},a.xScale.range([0,c]),a.resize()});var a=this},ready:function(){var a=this.element.select(".vzb-ts-btn-play"),b=this.element.select(".vzb-ts-btn-pause"),c=this;a.on("click",function(){c.model.time.play()}),b.on("click",function(){c.model.time.pause()}),this.format=j[this.model.time.unit],this.changeLimits(),this.changeTime(),this.resize(),this._setHandle(this.model.time.playing)},changeLimits:function(){var a=this.model.time.start,b=this.model.time.end;this.xScale.domain([a,b]),this.xAxis.tickValues([a,b]).tickFormat(this.format)},changeTime:function(){this.ui.format=this.model.time.unit;this.model.time.value;this._optionClasses()},resize:function(){this.model.time.pause(),this.profile=k[this.getLayoutProfile()];var a=parseInt(this.slider_outer.style("width"),10),b=parseInt(this.slider_outer.style("height"),10);this.width=a-this.profile.margin.left-this.profile.margin.right,this.height=b-this.profile.margin.bottom-this.profile.margin.top;this.slider.attr("transform","translate("+this.profile.margin.left+","+this.profile.margin.top+")"),(this.xScale.range()[1]=1)&&this.xScale.range([0,this.width]),this.xAxis=this.xAxis.scale(this.xScale).tickPadding(this.profile.label_spacing),this.axis.attr("transform","translate(0,"+this.height/2+")").call(this.xAxis),this.slide.select(".background").attr("height",this.height),this.handle.attr("transform","translate(0,"+this.height/2+")").attr("r",this.profile.radius),this._setHandle()},_getBrushed:function(){var a=this;return function(){a.model.time.pause(),a._blockUpdate||(a._optionClasses(),a._blockUpdate=!0,a.element.classed(f,!0));var b=a.brush.extent()[0];d3.event.sourceEvent&&(b=a.xScale.invert(d3.mouse(this)[0])),b-a.model.time.value!==0&&a._setTime(b),a._setHandle(a.model.time.playing)}},_getBrushedEnd:function(){var a=this;return function(){a._blockUpdate=!1,a.model.time.pause(),a.element.classed(f,!1),a.model.time.snap()}},_setHandle:function(a){var b=this.model.time.value;this.slide.call(this.brush.extent([b,b])),this.valueText.text(this.format(b));var c=this.model.time.speed,d=this.handle.attr("cx"),e=this.xScale(b);a?(this.handle.attr("cx",d).transition().duration(c).ease("linear").attr("cx",e),this.valueText.attr("transform","translate("+d+","+this.height/2+")").transition().duration(c).ease("linear").attr("transform","translate("+e+","+this.height/2+")")):(this.handle.attr("cx",e),this.valueText.attr("transform","translate("+e+","+this.height/2+")"))},_setTime:function(a){var b=this,c=50,d=new Date;null!=this._updTime&&d-this._updTime<c||(this._updTime=d,b.model.time.value=a)},_optionClasses:function(){var a=this.ui.show_limits,b=this.ui.show_value,c=this.ui.show_value_when_drag_play,f=this.ui.axis_aligned,j=this.ui.show_button&&this.model.time.playable;a||this.xAxis.tickValues([]).ticks(0),this.element.classed(e,!j),this.element.classed(d,this.model.time.playing),this.element.classed(h,b),this.element.classed(i,c),this.element.classed(g,f)}})}}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils;if(b._require("d3")){({year:d3.time.format("%Y"),month:d3.time.format("%Y-%m"),week:d3.time.format("%Y-W%W"),day:d3.time.format("%Y-%m-%d"),hour:d3.time.format("%Y-%m-%d %H"),minute:d3.time.format("%Y-%m-%d %H:%M"),second:d3.time.format("%Y-%m-%d %H:%M:%S")});b.Model.extend("axis",{init:function(a,b,d){this._type="axis",a=c.extend({use:"value",unit:"",which:void 0},a),this._super(a,b,d)},validate:function(){var a=["log","linear","time","pow"];(!this.scaleType||"indicator"===this.use&&-1===a.indexOf(this.scaleType))&&(this.scaleType="linear"),"indicator"!==this.use&&"ordinal"!==this.scaleType&&(this.scaleType="ordinal"),(this.which_1!=this.which||this.scaleType_1!=this.scaleType)&&(this.scale=null),this.which_1=this.which,this.scaleType_1=this.scaleType},buildScale:function(){var a,b=this.scaleType||"linear";if("time"==this.scaleType){var c=this.getLimits(this.which);return void(this.scale=d3.time.scale().domain([c.min,c.max]))}switch(this.use){case"indicator":var c=this.getLimits(this.which),d=(c.max-c.min)/20;a=[c.min-d,c.max+d],"log"==b&&(a=[c.min-c.min/4,c.max+c.max/4]);break;case"property":a=this.getUnique(this.which);break;case"value":default:a=[this.which]}this.scale=d3.scale[b]().domain(a)}})}}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils;if(b._require("d3")){var d={"geo.region":{asi:"#FF5872",eur:"#FFE700",ame:"#7FEB00",afr:"#00D5E9",_default:"#ffb600"},geo:{color1:"#F77481",color2:"#E1CE00",color3:"#B4DE79",color4:"#62CCE3"},time:{0:"#F77481",1:"#E1CE00",2:"#B4DE79"},lex:{0:"#F77481",1:"#E1CE00",2:"#B4DE79"},gdp_per_cap:{0:"#F77481",1:"#E1CE00",2:"#B4DE79",3:"#62CCE3"},pop:{0:"#F77481",1:"#E1CE00",2:"#B4DE79"},_default:{_default:"#fa5ed6"}},e={"geo.region":!1};b.Model.extend("color",{init:function(a,b,d){this._type="color",a=c.extend({use:"value",unit:"",palette:null,which:void 0},a),this._super(a,b,d),this.firstLoad=!0,this.hasDefaultColor=!1},getPalettes:function(){return d},isUserSelectable:function(a){return null==e[a]?!0:e[a]},validate:function(){var a=["log","genericLog","linear","time","pow"];(!this.scaleType||"indicator"===this.use&&-1===a.indexOf(this.scaleType))&&(this.scaleType="linear"),"indicator"!==this.use&&"ordinal"!==this.scaleType&&(this.scaleType="ordinal"),(null==this.palette||this.firstLoad===!1&&this.which_1!=this.which||this.firstLoad===!1&&this.scaleType_1!=this.scaleType)&&(this.set("palette",null,!1),this.scale=null,d[this.which]?this.palette=c.clone(d[this.which]):"value"==this.use?this.palette={_default:this.which}:this.palette=c.clone(d._default)),this.which_1=this.which,this.scaleType_1=this.scaleType,this.firstLoad=!1},setColor:function(a,b){var d=this.palette.getObject();d[b]=a,this.scale.range(c.values(d)),this.palette[b]=a},mapValue:function(a){return null!=this.scale&&"property"==this.use&&this.hasDefaultColor&&-1==this.scale.domain().indexOf(a)&&(a="_default"),this._super(a)},buildScale:function(){var a=this,b=Object.keys(a.palette.getObject()),d=c.values(a.palette.getObject());if(this.hasDefaultColor=b.indexOf("_default")>-1,"time"==this.scaleType){var e=this.getLimits(this.which);return void(this.scale=d3.time.scale().domain([e.min,e.max]).range(d))}switch(this.use){case"indicator":var e=this.getLimits(this.which),f=(e.max-e.min)/(d.length-1);if(b=d3.range(e.min,e.max,f).concat(e.max),"log"==this.scaleType){var g=d3.scale.log().domain([e.min,e.max]).range([e.min,e.max]);b=b.map(function(a){return g.invert(a)})}return void(this.scale=d3.scale[this.scaleType]().domain(b).range(d).interpolate(d3.interpolateRgb));default:return void(this.scale=d3.scale.ordinal().domain(b).range(d))}}})}}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils;b.Model.extend("data",{init:function(a,b,d){this._type="data",a=c.extend({reader:"local-json"},a),this._super(a,b,d)}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils;b.Model.extend("entities",{init:function(a,b,d){this._type="entities",a=c.extend({show:{},select:[],brush:[],opacitySelectDim:.3,opacityRegular:.8},a),this._visible=[],this._super(a,b,d)},validate:function(a){var b=this.getDimension(),c=this._visible.map(function(a){return a[b]});this.select=this.select.filter(function(a){return-1!==c.indexOf(a[b])}),this.brush=this.brush.filter(function(a){return-1!==c.indexOf(a[b])})},getDimension:function(){return this.show.dim},getFilter:function(){return this.show.filter.getObject()},getSelected:function(){var a=this.getDimension();return this.select.map(function(b){return b[a]})},selectEntity:function(a,b){var c=this.getDimension(),d=a[c];if(this.isSelected(a))this.select=this.select.filter(function(a){return a[c]!==d});else{var e={};e[c]=d,e.labelOffset=[0,0],b&&(e.trailStartTime=b(a.time)),this.select=this.select.concat(e)}},setLabelOffset:function(a,b){var d=this.getDimension(),e=a[d];c.find(this.select,function(a){return a[d]===e}).labelOffset=b,this.set("select",this.select,!0)},isSelected:function(a){var b=this.getDimension(),c=a[this.getDimension()],d=this.select.map(function(a){return a[b]});return-1!==d.indexOf(c)},clearSelected:function(){this.select=[]},setHighlighted:function(a){this.brush=[].concat(a)},highlightEntity:function(a,b){var c=this.getDimension(),d=a[c];if(!this.isHighlighted(a)){var e={};e[c]=d,b&&(e.trailStartTime=b(a.time)),this.brush=this.brush.concat(e)}},unhighlightEntity:function(a,b){var c=this.getDimension(),d=a[c];this.isHighlighted(a)&&(this.brush=this.brush.filter(function(a){return a[c]!==d}))},isHighlighted:function(a){var b=this.getDimension(),c=a[this.getDimension()],d=this.brush.map(function(a){return a[b]});return-1!==d.indexOf(c)},clearHighlighted:function(){this.brush=[]}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils;b.Model.extend("language",{init:function(a,b,d){this._type="language",a=c.extend({id:"en",strings:{}},a),this._super(a,b,d)},getUIString:function(a,b,c){return b=b||this.id,c=c||this.strings,c&&c.hasOwnProperty(b)&&c[b].hasOwnProperty(a)?c[b][a]:a},getTFunction:function(){var a=this.id,b=this.strings,c=this;return function(d){return c.getUIString(d,a,b)}}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils;b._require("d3")&&b.Model.extend("size",{init:function(a,b,d){this._type="size",a=c.extend({use:"value",unit:"",which:void 0},a),this._super(a,b,d)},validate:function(){("undefined"==typeof this.min||this.min<0)&&(this.min=0),("undefined"==typeof this.max||this.max>1)&&(this.max=1),this.min>this.max&&(this.min=this.max),"value"===this.use&&this.which>this.max?this.which=this.max:"value"===this.use&&this.which<this.min&&(this.which=this.min),this.scaleType||(this.scaleType="linear"),"property"===this.use&&(this.scaleType="ordinal"),(this.which_1!=this.which||this.scaleType_1!=this.scaleType)&&(this.scale=null),this.which_1=this.which,this.scaleType_1=this.scaleType},buildScale:function(){"value"===this.use&&(this.scale=d3.scale.linear().domain([0,1])),this._super()}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils;if(b._require("d3")){var d={year:d3.time.format("%Y"),month:d3.time.format("%Y-%m"),week:d3.time.format("%Y-W%W"),day:d3.time.format("%Y-%m-%d"),hour:d3.time.format("%Y-%m-%d %H"),minute:d3.time.format("%Y-%m-%d %H:%M"),second:d3.time.format("%Y-%m-%d %H:%M:%S")},e=Object.keys(d),f=c.values(d);b.Model.extend("time",{init:function(a,b,d){this._type="time",a=c.extend({value:"1800",start:"1800",end:"2014",playable:!0,playing:!1,loop:!1,round:!0,speed:500,unit:"year",format:"%Y",step:1,adaptMinMaxZoom:!1},a),this._super(a,b,d);var e=this;this._playing_now=!1,this.on({"change:playing":function(){e.playing===!0?e._startPlaying():e._stopPlaying()},set:function(){e.playing===!0&&e.set("playing",!0,!0),this.snap("start"),this.snap("end"),this.snap("value")}})},_formatToDates:function(){for(var a=["value","start","end"],b=0;b<a.length;b++){var d=a[b];if(!c.isDate(this[d]))for(var e=0;e<f.length;e++){var g=f[e],h=g.parse(this[d].toString());if(c.isDate(h)){this.set(d,h);break}}}},validate:function(){-1===e.indexOf(this.unit)&&(this.unit="year"),this.step<1&&(this.step="year"),c.isDate(this.start)&&c.isDate(this.end)&&c.isDate(this.value)||this._formatToDates(),this.end<this.start&&(this.end=this.start),this.value<this.start?this.value=this.start:this.value>this.end&&(this.value=this.end),this.playable===!1&&this.playing===!0&&(this.playing=!1)},play:function(){this.playing=!0},pause:function(){this.playing=!1},getRange:function(){return d3.time[this.unit].range(this.start,this.end,this.step)},getDimension:function(){return"time"},getFilter:function(){var a=d3.time.format(this.format||"%Y")(this.start),b=d3.time.format(this.format||"%Y")(this.end),c={time:[[a,b]]};return c},getFormatted:function(a,b){a||(a="%Y"),b||(b="value");var c=d3.time.format(a);return c(this[b])},snap:function(a){if(this.round){null==a&&(a="value");var b="round";"ceil"===this.round&&(b="ceil"),"floor"===this.round&&(b="floor");var c=d3.time[this.unit][b](this[a]);this.set(a,c,!0)}},_startPlaying:function(){if(this.playable&&!this._playing_now){this._playing_now=!0;var a=this,b=this.value,c=this.speed;this.snap(),a.end-b<=0&&(b=this.start,a.value=b),this._intervals.setInterval("playInterval_"+this._id,function(){return b>=a.end?void(a.loop?(b=a.start,a.value=b):a.playing=!1):(b=d3.time[a.unit].offset(b,a.step),void(a.value=b))},c),this.trigger("play")}},_stopPlaying:function(){this._playing_now=!1,this._intervals.clearInterval("playInterval_"+this._id),this.snap(),this.trigger("pause")}})}}.call(this),function(){"use strict";var a=this,b=a.Vizabi;b.Reader.extend("inline",{init:function(a){this.name="inline",this._super(a)},read:function(){return(new b.Promise).resolve()}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils,d=b.Promise;b.Reader.extend("local-json",{init:function(a){this._name="local-json",this._data=[],this._basepath=a.path,this._basepath||c.error("Missing base path for local-json reader")},read:function(a,b){var e=this,f=new d,g=this._basepath.replace("{{LANGUAGE}}",b);return e._data=[],function(a,b){d3.json(g,function(d,f){if(d)return void c.error("Error Happened While Loading File: "+g,d);var h=f[0],i=a.where;i["geo.category"]&&(i["geo.cat"]=c.clone(i["geo.category"]),delete i["geo.category"]);for(var j in i){var k=i[j];if("*"!==k[0])if("time"!==j)h=h.filter(function(a){var b=a[j],d=-1;return c.isArray(b)||(b=[b]),c.forEach(b,function(a,b){return-1!==k.indexOf(a)?(d=b,!1):void 0}),-1!==d});else{var l=k[0],m=l[0],n=l[1]||m;h=h.filter(function(a){var b=a[j];return b>=m&&n>=b})}}h=h.map(function(b){return c.clone(b,a.select)}),e._data=h,b.resolve()})}(a,f),f},getData:function(){return this._data}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils,d=b.Promise;b.Reader.extend("waffle-server",{init:function(a){this._name="waffle-reader",this._data=[],this._basepath=a.path||"https://waffle.gapminder.org/api/v1/query"},read:function(a,b){var e,f=this,g=new d;this._data=[];var h=a.where;h.time&&(h.time=h.time[0].join("-")),h["geo.category"]&&(h["geo.cat"]=c.clone(h["geo.category"]),delete h["geo.category"]),e={SELECT:a.select,WHERE:h,FROM:"humnum"};var i={query:[e],lang:b};return c.post(this._basepath,i,function(a){f._data=a,g.resolve()},function(){console.log("Error loading from Waffle Server:",f._basepath),g.reject("Could not read from waffle server")},!0),g},getData:function(){return this._data}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi;b.utils;if(b._require("d3")){var c="src/tools/barchart/barchart.html";b.Component.extend("gapminder-barchart",{init:function(a,b){this.name="barchart",this.template=c,this.model_expects=[{name:"time",type:"time"},{name:"entities",type:"entities"},{name:"marker",type:"model"},{name:"language",type:"language"}];var d=this;this.model_binds={"change:time:value":function(a){d.updateEntities()}},this._super(a,b),this.xScale=null,this.yScale=null,this.cScale=d3.scale.category10(),this.xAxis=d3.svg.axisSmart(),this.yAxis=d3.svg.axisSmart()},readyOnce:function(){this.element=d3.select(this.element),this.graph=this.element.select(".vzb-bc-graph"),this.yAxisEl=this.graph.select(".vzb-bc-axis-y"),this.xAxisEl=this.graph.select(".vzb-bc-axis-x"),this.yTitleEl=this.graph.select(".vzb-bc-axis-y-title"),this.bars=this.graph.select(".vzb-bc-bars");var a=this;this.on("resize",function(){a.updateEntities()})},ready:function(){this.updateIndicators(),this.resize(),this.updateEntities()},updateIndicators:function(){var a=this;this.translator=this.model.language.getTFunction(),this.duration=this.model.time.speed,this.timeFormatter=d3.time.format(this.model.time.formatInput);var b=this.translator("indicator/"+this.model.marker.axis_y.which),c=this.yTitleEl.selectAll("text").data([0]);c.enter().append("text"),c.attr("y","-6px").attr("x","-9px").attr("dx","-0.72em").text(b),this.yScale=this.model.marker.axis_y.getScale(),this.xScale=this.model.marker.axis_x.getScale(),this.cScale=this.model.marker.color.getScale(),this.yAxis.tickFormat(a.model.marker.axis_y.tickFormatter),this.xAxis.tickFormat(a.model.marker.axis_x.tickFormatter)},updateEntities:function(){var a=this,b=this.model.time,c=b.value,d=b.playing?b.speed:0,e=this.model.marker.label.getItems({time:c});this.entityBars=this.bars.selectAll(".vzb-bc-bar").data(e),this.entityBars.exit().remove(),this.entityBars.enter().append("rect").attr("class","vzb-bc-bar").on("mousemove",function(a,b){}).on("mouseout",function(a,b){}).on("click",function(a,b){});var f=(this.bars.selectAll(".vzb-bc-bar"),this.xScale.rangeBand());this.bars.selectAll(".vzb-bc-bar").attr("width",f).attr("fill",function(b){return a.cScale(a.model.marker.color.getValue(b))}).attr("x",function(b){return a.xScale(a.model.marker.axis_x.getValue(b))}).transition().duration(d).ease("linear").attr("y",function(b){return a.yScale(a.model.marker.axis_y.getValue(b))}).attr("height",function(b){return a.height-a.yScale(a.model.marker.axis_y.getValue(b))})},resize:function(){var a=this;this.profiles={small:{margin:{top:30,right:20,left:40,bottom:40},padding:2,minRadius:2,maxRadius:40},medium:{margin:{top:30,right:60,left:60,bottom:40},padding:2,minRadius:3,maxRadius:60},large:{margin:{top:30,right:60,left:60,bottom:40},padding:2,minRadius:4,maxRadius:80}},this.activeProfile=this.profiles[this.getLayoutProfile()];var b=this.activeProfile.margin;this.height=parseInt(this.element.style("height"),10)-b.top-b.bottom,this.width=parseInt(this.element.style("width"),10)-b.left-b.right,this.graph.attr("transform","translate("+b.left+","+b.top+")"),"ordinal"!==this.model.marker.axis_y.scaleType?this.yScale.range([this.height,0]):this.yScale.rangePoints([this.height,0],a.activeProfile.padding).range(),"ordinal"!==this.model.marker.axis_x.scaleType?this.xScale.range([0,this.width]):this.xScale.rangePoints([0,this.width],a.activeProfile.padding).range(),this.yAxis.scale(this.yScale).orient("left").tickSize(6,0).tickSizeMinor(3,0).labelerOptions({scaleType:this.model.marker.axis_y.scaleType,toolMargin:b,limitMaxTickNumber:6}),this.xAxis.scale(this.xScale).orient("bottom").tickSize(6,0).tickSizeMinor(3,0).labelerOptions({scaleType:this.model.marker.axis_x.scaleType,toolMargin:b}),this.xAxisEl.attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.xScale.rangeRoundBands([0,this.width],.1,.2),this.yAxisEl.call(this.yAxis),this.xAxisEl.call(this.xAxis)},drawBars:function(){}}),b.Tool.extend("BarChart",{init:function(a,b){this.name="barchart",this.components=[{component:"gapminder-barchart",placeholder:".vzb-tool-viz",model:["state.time","state.entities","state.marker","language"]},{component:"gapminder-timeslider",placeholder:".vzb-tool-timeslider",model:["state.time"]},{component:"gapminder-buttonlist",placeholder:".vzb-tool-buttonlist",model:["state","ui","language"]}],this.default_options={state:{time:{start:"1952",end:"2012",value:"2000",step:1,speed:300,formatInput:"%Y"},entities:{show:{dim:"geo",filter:{_defs_:{geo:["*"],"geo.category":["region"]}}}},marker:{dimensions:["entities","time"],label:{use:"property",which:"geo.name"},axis_y:{use:"indicator",which:"lex",scaleType:"linear"},axis_x:{use:"property",which:"geo.name"},color:{use:"property",which:"geo.region",palette:{_defs_:{_default:"#ffb600",world:"#ffb600",eur:"#FFE700",afr:"#00D5E9",asi:"#FF5872",ame:"#7FEB00"}}}}},data:{reader:"local-json",path:"local_data/waffles/{{LANGUAGE}}/basic-indicators.json"},ui:{buttons:["fullscreen"]},language:{id:"en",strings:{_defs_:{en:{title:"","buttons/expand":"Full screen","buttons/unexpand":"Leave full screen","buttons/lock":"Lock","buttons/find":"Find","buttons/colors":"Colors","buttons/size":"Size","buttons/more_options":"Options","indicator/lex":"Life expectancy","indicator/gdp_per_cap":"GDP per capita","indicator/pop":"Population","indicator/geo.region":"Region","indicator/geo":"Geo code","indicator/time":"","indicator/geo.category":"Geo category"}}}}},this._super(a,b)},validate:function(a){a=this.model||a;var b=a.state.time,c=a.state.marker.label;if(c.getItems()&&!(c.getItems().length<1)){var d=c.getLimits("time").min,e=c.getLimits("time").max;b.start<d&&(b.start=d),b.end>e&&(b.end=e)}}})}}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils;b._require("d3")&&b.Component.extend("gapminder-bubblechart",{init:function(a,d){var e=this;this.name="bubblechart",this.template="src/tools/bubblechart/bubblechart.html",this.model_expects=[{name:"time",type:"time"},{name:"entities",type:"entities"},{name:"marker",type:"model"},{name:"language",type:"language"}],this.model_binds={"change:time:trails":function(a){e._trails.toggle(e.model.time.trails),e.redrawDataPoints()},"change:time:lockNonSelected":function(a){e.redrawDataPoints(500)},"change:entities:show":function(a){e.entitiesUpdatedRecently=!0},"change:marker":function(a){e._readyOnce&&"change:marker:size:max"!=a&&(a.indexOf("change:marker:color:palette")>-1||(e.updateUIStrings(),e.updateIndicators(),e.updateSize(),e.updateMarkerSizeLimits(),e._trails.create(),e._trails.run("findVisible"),e.resetZoomer(),e._trails.run(["recolor","reveal"])))},"change:entities:select":function(){e._readyOnce&&(e.selectDataPoints(),e.redrawDataPoints(),e._trails.run(["resize","recolor","findVisible","reveal"]),e.updateBubbleOpacity())},"change:entities:brush":function(){e._readyOnce&&e.highlightDataPoints()},readyOnce:function(a){},ready:function(a){e._readyOnce&&e.entitiesUpdatedRecently&&(e.entitiesUpdatedRecently=!1,e.updateEntities(),e.redrawDataPoints(),e.updateBubbleOpacity())},"change:time:value":function(){e.updateTime(),e._trails.run("findVisible"),e.model.time.adaptMinMaxZoom?e.adaptMinMaxZoom():e.redrawDataPoints(),e._trails.run("reveal")},"change:time:adaptMinMaxZoom":function(){e.model.time.adaptMinMaxZoom?e.adaptMinMaxZoom():e.resetZoomer()},"change:marker:size:max":function(){e.updateMarkerSizeLimits(),e._trails.run("findVisible"),e.redrawDataPointsOnlySize(),e._trails.run("resize")},"change:marker:color:palette":function(){e.redrawDataPointsOnlyColors(),e._trails.run("recolor")},"change:entities:opacitySelectDim":function(){e.updateBubbleOpacity()},"change:entities:opacityRegular":function(){e.updateBubbleOpacity()}},this._super(a,d),this.xScale=null,this.yScale=null,this.sScale=null,this.cScale=null,this.xAxis=d3.svg.axisSmart(),this.yAxis=d3.svg.axisSmart(),this.cached={},this.xyMaxMinMean={},this.currentZoomFrameXY=null,this.ui=c.extend({whenHovering:{},labels:{}},this.ui["vzb-tool-"+this.name]),this.ui.whenHovering=c.extend({showProjectionLineX:!0,showProjectionLineY:!0,higlightValueX:!0,higlightValueY:!0},this.ui.whenHovering),this.ui.labels=c.extend({autoResolveCollisions:!1,dragging:!0},this.ui.labels);var f=b.Helper.get("gapminder-bublechart-trails");this._trails=new f(this),this.dragger=d3.behavior.drag().on("dragstart",function(a,b){d3.event.sourceEvent.stopPropagation()}).on("drag",function(a,b){if(e.ui.labels.dragging){var c=e.cached[a.geo];c.labelFixed=!0,c.labelX_+=d3.event.dx/e.width,c.labelY_+=d3.event.dy/e.height;var d=e.xScale(c.labelX0)+c.labelX_*e.width,f=e.yScale(c.labelY0)+c.labelY_*e.height,g=e.xScale(c.labelX0),h=e.yScale(c.labelY0);e._repositionLabels(a,b,this,d,f,g,h,0)}}).on("dragend",function(a,b){e.model.entities.setLabelOffset(a,[Math.round(100*e.cached[a.geo].labelX_)/100,Math.round(100*e.cached[a.geo].labelY_)/100])}),this.gragRectangle=d3.behavior.drag().on("dragstart",function(a,b){(d3.event.sourceEvent.ctrlKey||d3.event.sourceEvent.metaKey)&&(this.ctrlKeyLock=!0,this.origin={x:d3.mouse(this)[0]-e.activeProfile.margin.left,y:d3.mouse(this)[1]-e.activeProfile.margin.top},e.zoomRect.classed("vzb-invisible",!1))}).on("drag",function(a,b){if(this.ctrlKeyLock){var c=this.origin,d={x:d3.event.x-e.activeProfile.margin.left,y:d3.event.y-e.activeProfile.margin.top};e.zoomRect.attr("x",Math.min(d.x,c.x)).attr("y",Math.min(d.y,c.y)).attr("width",Math.abs(d.x-c.x)).attr("height",Math.abs(d.y-c.y))}}).on("dragend",function(a){this.ctrlKeyLock&&(this.ctrlKeyLock=!1,e.zoomRect.attr("width",0).attr("height",0).classed("vzb-invisible",!0),this.target={x:d3.mouse(this)[0]-e.activeProfile.margin.left,y:d3.mouse(this)[1]-e.activeProfile.margin.top},e._zoomOnRectangle(d3.select(this),this.origin.x,this.origin.y,this.target.x,this.target.y,!0,500))}),this.zoomer=d3.behavior.zoom().scaleExtent([1,100]).on("zoom",function(){if(null==d3.event.sourceEvent||!d3.event.sourceEvent.ctrlKey&&!d3.event.sourceEvent.metaKey){var a=d3.event.scale,b=d3.event.translate,c=e.zoomer.ratioY,d=e.zoomer.ratioX;(isNaN(a)||null==a)&&(a=e.zoomer.scale()),(isNaN(a)||null==a)&&(a=1),(isNaN(b[0])||isNaN(b[1])||null==b[0]||null==b[1])&&(b=e.zoomer.translate()),(isNaN(b[0])||isNaN(b[1])||null==b[0]||null==b[1])&&(b=[0,0]),1>a*c&&(c=1/a,e.zoomer.ratioY=c),1>a*d&&(d=1/a,e.zoomer.ratioX=d),b[0]>0&&(b[0]=0),b[1]>0&&(b[1]=0),b[0]<(1-a*d)*e.width&&(b[0]=(1-a*d)*e.width),b[1]<(1-a*c)*e.height&&(b[1]=(1-a*c)*e.height),e.zoomer.translate(b),e.xScale.range([0*a*d+b[0],e.width*a*d+b[0]]),e.yScale.range([e.height*a*c+b[1],0*a*c+b[1]]);var f=e.yAxis.labelerOptions(),g=e.xAxis.labelerOptions();f.limitMaxTickNumber=2>a*c?7:14,f.transitionDuration=e.zoomer.duration,g.transitionDuration=e.zoomer.duration,e.xAxisEl.call(e.xAxis.labelerOptions(g)),e.yAxisEl.call(e.yAxis.labelerOptions(f)),e.redrawDataPoints(e.zoomer.duration),e._trails.run("resize",null,e.zoomer.duration),
e.zoomer.duration=0}}),this.zoomer.ratioX=1,this.zoomer.ratioY=1},readyOnce:function(){var a=this;this.element=d3.select(this.element),this.graph=this.element.select(".vzb-bc-graph"),this.yAxisElContainer=this.graph.select(".vzb-bc-axis-y"),this.yAxisEl=this.yAxisElContainer.select("g"),this.xAxisElContainer=this.graph.select(".vzb-bc-axis-x"),this.xAxisEl=this.xAxisElContainer.select("g"),this.yTitleEl=this.graph.select(".vzb-bc-axis-y-title"),this.xTitleEl=this.graph.select(".vzb-bc-axis-x-title"),this.sTitleEl=this.graph.select(".vzb-bc-axis-s-title"),this.cTitleEl=this.graph.select(".vzb-bc-axis-c-title"),this.yearEl=this.graph.select(".vzb-bc-year"),this.projectionX=this.graph.select(".vzb-bc-projection-x"),this.projectionY=this.graph.select(".vzb-bc-projection-y"),this.trailsContainer=this.graph.select(".vzb-bc-trails"),this.bubbleContainerCrop=this.graph.select(".vzb-bc-bubbles-crop"),this.bubbleContainer=this.graph.select(".vzb-bc-bubbles"),this.labelsContainer=this.graph.select(".vzb-bc-labels"),this.zoomRect=this.element.select(".vzb-bc-zoomRect"),this.entityBubbles=null,this.entityLabels=null,this.tooltip=this.element.select(".vzb-tooltip"),this.on("resize",function(){a.updateSize(),a.updateMarkerSizeLimits(),a._trails.run("findVisible"),a.resetZoomer()}),d3.select("body").on("keydown",function(){(d3.event.metaKey||d3.event.ctrlKey)&&a.element.select("svg").classed("vzb-zoomin",!0)}).on("keyup",function(){d3.event.metaKey||d3.event.ctrlKey||a.element.select("svg").classed("vzb-zoomin",!1)}),this.element.call(this.zoomer).call(this.gragRectangle),a.updateUIStrings(),a.updateIndicators(),a.updateEntities(),a.updateTime(),a.updateSize(),a.updateMarkerSizeLimits(),a.selectDataPoints(),a.updateBubbleOpacity(),a._trails.create(),a.resetZoomer(),a._trails.run(["recolor","findVisible","reveal"]),a.model.time.adaptMinMaxZoom&&a.adaptMinMaxZoom()},updateIndicators:function(){var a=this;this.yScale=this.model.marker.axis_y.getScale(),this.xScale=this.model.marker.axis_x.getScale(),this.sScale=this.model.marker.size.getScale(),this.cScale=this.model.marker.color.getScale(),this.yAxis.tickFormat(a.model.marker.axis_y.tickFormatter),this.xAxis.tickFormat(a.model.marker.axis_x.tickFormatter),this.xyMaxMinMean={x:this.model.marker.axis_x.getMaxMinMean(this.timeFormatter),y:this.model.marker.axis_y.getMaxMinMean(this.timeFormatter),s:this.model.marker.size.getMaxMinMean(this.timeFormatter)}},updateUIStrings:function(){var a=this;this.translator=this.model.language.getTFunction(),this.timeFormatter=d3.time.format(a.model.time.formatInput);var b=this.translator("indicator/"+this.model.marker.axis_y.which),c=this.translator("indicator/"+this.model.marker.axis_x.which),d=this.translator("indicator/"+this.model.marker.size.which),e=this.translator("indicator/"+this.model.marker.color.which);this.model.marker.axis_y.unit&&(b=b+", "+this.model.marker.axis_y.unit),this.model.marker.axis_x.unit&&(c=c+", "+this.model.marker.axis_x.unit),this.model.marker.size.unit&&(d=d+", "+this.model.marker.size.unit),this.model.marker.color.unit&&(e=e+", "+this.model.marker.color.unit);var f=this.yTitleEl.selectAll("text").data([0]);f.enter().append("text"),f.attr("y","-6px").attr("x","-9px").attr("dx","-0.72em").text(b);var g=this.xTitleEl.selectAll("text").data([0]);g.enter().append("text"),g.attr("text-anchor","end").attr("y","-0.32em").text(c);var h=this.sTitleEl.selectAll("text").data([0]);h.enter().append("text"),h.attr("text-anchor","end").text(this.translator("buttons/size")+": "+d+", "+this.translator("buttons/colors")+": "+e)},updateEntities:function(){var a=this,b=a.model.time.end;this.model.entities._visible=this.model.marker.label.getItems().map(function(c){return{geo:c.geo,time:b,sortValue:a.model.marker.size.getValue({geo:c.geo,time:b})}}).sort(function(a,b){return b.sortValue-a.sortValue}),this.entityBubbles=this.bubbleContainer.selectAll(".vzb-bc-entity").data(this.model.entities._visible,function(a){return a.geo}),this.entityBubbles.exit().remove(),this.entityBubbles.enter().append("circle").attr("class","vzb-bc-entity").on("mousemove",function(b,c){a.model.entities.highlightEntity(b);var d="";a.model.entities.isSelected(b)&&a.model.time.trails?(d=a.timeFormatter(a.time),a.entityLabels.filter(function(a){return a.geo==b.geo}).classed("vzb-highlighted",!0)):d=a.model.marker.label.getValue(b),a._setTooltip(d)}).on("mouseout",function(b,c){a.model.entities.clearHighlighted(),a._setTooltip(),a.entityLabels.classed("vzb-highlighted",!1)}).on("click",function(b,c){a.model.entities.selectEntity(b,a.timeFormatter)}),this.entityTrails=this.trailsContainer.selectAll(".vzb-bc-entity").data(this.model.entities._visible,function(a){return a.geo}),this.entityTrails.exit().remove(),this.entityTrails.enter().append("g").attr("class",function(a){return"vzb-bc-entity "+a.geo})},adaptMinMaxZoom:function(){var a=this,b=a.xyMaxMinMean.x[a.timeFormatter(a.time)],d=a.xyMaxMinMean.y[a.timeFormatter(a.time)],e=c.areaToRadius(a.sScale(a.xyMaxMinMean.s[a.timeFormatter(a.time)].max)),f=a.currentZoomFrameXY,g={x1:a.xScale(b.min)-e,y1:a.yScale(d.min)+e,x2:a.xScale(b.max)+e,y2:a.yScale(d.max)-e},h=.3;if(!f||g.x1<f.x1*(1-h)||g.x2>f.x2*(1+h)||g.y2<f.y2*(1-h)||g.y1>f.y1*(1+h)){a.currentZoomFrameXY=c.clone(g);var f=a.currentZoomFrameXY;a._zoomOnRectangle(a.element,f.x1,f.y1,f.x2,f.y2,!1,a.duration)}else a.redrawDataPoints(a.duration)},_zoomOnRectangle:function(a,b,c,d,e,f,g){var h=this,i=h.zoomer;if(!(Math.abs(b-d)<10||Math.abs(c-e)<10)){if(Math.abs(b-d)>Math.abs(c-e))var j=h.height/Math.abs(c-e)*i.scale(),k=h.width/Math.abs(b-d)*i.scale()/j*i.ratioX,l=i.ratioY;else var j=h.width/Math.abs(b-d)*i.scale(),l=h.height/Math.abs(c-e)*i.scale()/j*i.ratioY,k=i.ratioX;f&&i.translate([i.translate()[0]+b-d,i.translate()[1]+c-e]);var m=[(i.translate()[0]-Math.min(b,d))/i.scale()/i.ratioX*j*k,(i.translate()[1]-Math.min(c,e))/i.scale()/i.ratioY*j*l];i.scale(j),i.ratioY=l,i.ratioX=k,i.translate(m),i.duration=g?g:0,i.event(a)}},resetZoomer:function(a){this.zoomer.scale(1),this.zoomer.ratioY=1,this.zoomer.ratioX=1,this.zoomer.translate([0,0]),this.zoomer.duration=0,this.zoomer.event(a||this.element)},updateTime:function(){this.time_1=null==this.time?this.model.time.value:this.time,this.time=this.model.time.value,this.duration=this.model.time.playing&&this.time-this.time_1>0?this.model.time.speed:0,this.yearEl.text(this.timeFormatter(this.time))},updateSize:function(){var a=this;this.profiles={small:{margin:{top:30,right:20,left:40,bottom:40},padding:2,minRadius:2,maxRadius:40},medium:{margin:{top:30,right:60,left:60,bottom:40},padding:2,minRadius:3,maxRadius:60},large:{margin:{top:30,right:60,left:60,bottom:40},padding:2,minRadius:4,maxRadius:80}},this.activeProfile=this.profiles[this.getLayoutProfile()];var b=this.activeProfile.margin;this.height=parseInt(this.element.style("height"),10)-b.top-b.bottom,this.width=parseInt(this.element.style("width"),10)-b.left-b.right,this.graph.attr("transform","translate("+b.left+","+b.top+")"),this.yearEl.attr("x",this.width/2).attr("y",this.height/3*2).style("font-size",Math.max(this.height/4,this.width/4)+"px"),"ordinal"!==this.model.marker.axis_y.scaleType?this.yScale.range([this.height,0]):this.yScale.rangePoints([this.height,0],a.activeProfile.padding).range(),"ordinal"!==this.model.marker.axis_x.scaleType?this.xScale.range([0,this.width]):this.xScale.rangePoints([0,this.width],a.activeProfile.padding).range(),this.yAxis.scale(this.yScale).orient("left").tickSize(6,0).tickSizeMinor(3,0).labelerOptions({scaleType:this.model.marker.axis_y.scaleType,toolMargin:b,limitMaxTickNumber:6}),this.xAxis.scale(this.xScale).orient("bottom").tickSize(6,0).tickSizeMinor(3,0).labelerOptions({scaleType:this.model.marker.axis_x.scaleType,toolMargin:b}),this.bubbleContainerCrop.attr("width",this.width).attr("height",this.height),this.xAxisElContainer.attr("width",this.width).attr("height",this.activeProfile.margin.bottom).attr("y",this.height),this.xAxisEl.attr("transform","translate(0,1)"),this.yAxisElContainer.attr("width",this.activeProfile.margin.left).attr("height",this.height).attr("x",-this.activeProfile.margin.left),this.yAxisEl.attr("transform","translate("+(this.activeProfile.margin.left-1)+",0)"),this.xTitleEl.attr("transform","translate("+this.width+","+this.height+")"),this.sTitleEl.attr("transform","translate("+this.width+",0) rotate(-90)"),this.yAxisEl.call(this.yAxis),this.xAxisEl.call(this.xAxis),this.projectionX.attr("y1",a.yScale.range()[0]),this.projectionY.attr("x2",a.xScale.range()[0])},updateMarkerSizeLimits:function(){var a=this,b=this.activeProfile.minRadius,d=this.activeProfile.maxRadius;this.minRadius=Math.max(d*this.model.marker.size.min,b),this.maxRadius=d*this.model.marker.size.max,"ordinal"!==this.model.marker.size.scaleType?this.sScale.range([c.radiusToArea(a.minRadius),c.radiusToArea(a.maxRadius)]):this.sScale.rangePoints([c.radiusToArea(a.minRadius),c.radiusToArea(a.maxRadius)],0).range()},redrawDataPointsOnlyColors:function(){var a=this;this.entityBubbles.style("fill",function(b){var c=a.model.marker.color.getValue({geo:b.geo,time:a.time});return a.cScale(c)})},redrawDataPointsOnlySize:function(){var a=this;this.someSelected?a.entityBubbles.each(function(b,c){a._updateBubble(b,c,d3.select(this),0)}):this.entityBubbles.each(function(b,d){var e=a.model.marker.size.getValue(b);null!=e&&d3.select(this).attr("r",c.areaToRadius(a.sScale(e)))})},redrawDataPoints:function(a){var b=this;null==a&&(a=b.duration),this.entityBubbles.each(function(c,d){var e=d3.select(this);b._updateBubble(c,d,e,a)}),0==b.duration&&d3.timer.flush(),b.ui.labels.autoResolveCollisions&&(clearTimeout(b.collisionTimeout),b.collisionTimeout=setTimeout(function(){},1.2*b.model.time.speed))},_updateBubble:function(a,b,d,e){var f=this;f.model.time.lockNonSelected&&f.someSelected&&!f.model.entities.isSelected(a)?a.time=f.timeFormatter.parse(""+f.model.time.lockNonSelected):a.time=f.time;var g=f.model.marker.axis_y.getValue(a),h=f.model.marker.axis_x.getValue(a),i=f.model.marker.size.getValue(a),j=f.model.marker.label.getValue(a),k=f.model.marker.color.getValue(a);if(null==j||null==g||null==h||null==i)d.classed("vzb-invisible",!0);else{var l=c.areaToRadius(f.sScale(i));d.classed("vzb-invisible",!1).style("fill",f.cScale(k)).transition().duration(e).ease("linear").attr("cy",f.yScale(g)).attr("cx",f.xScale(h)).attr("r",l),f._updateLabel(a,b,h,g,l,j,e)}},_updateLabel:function(a,b,d,e,f,g,h){var i=this;if(null==h&&(h=i.duration),i.model.entities.isSelected(a)&&null!=i.entityLabels){null==i.cached[a.geo]&&(i.cached[a.geo]={});var j=i.cached[a.geo],k=c.find(i.model.entities.select,function(b){return b.geo==a.geo}),l=i.timeFormatter.parse(""+k.trailStartTime);j.valueX=d,j.valueY=e,(!i.model.time.trails||l-i.time>0||null==k.trailStartTime)&&(k.trailStartTime=i.timeFormatter(i.time),j.scaledS0=f,j.labelX0=d,j.labelY0=e),(null==j.scaledS0||null==j.labelX0||null==j.labelX0)&&(j.scaledS0=f,j.labelX0=d,j.labelY0=e),i.entityLabels.filter(function(b){return b.geo==a.geo}).each(function(c){var d=d3.select(this),e=d.selectAll("text.vzb-bc-label-content").text(g+(i.model.time.trails?" "+k.trailStartTime:"")),f=(d.select("line").style("stroke-dasharray","0 "+(j.scaledS0+2)+" 100%"),d.select("rect")),l=e[0][0].getBBox();j.contentBBox&&j.contentBBox.width==l.width||(j.contentBBox=l,d.select("text.vzb-bc-label-x").attr("x",l.width+0*l.height+2).attr("y",0*l.height-4),d.select("circle").attr("cx",l.width+0*l.height+2).attr("cy",0*l.height-4).attr("r",.5*l.height),f.attr("width",l.width+4).attr("height",l.height+4).attr("x",-2).attr("y",-4).attr("rx",.2*l.height).attr("ry",.2*l.height)),j.labelX_=k.labelOffset[0]||j.scaledS0/i.width,j.labelY_=k.labelOffset[1]||j.scaledS0/i.width;var m=i.xScale(j.labelX0)+j.labelX_*i.width,n=i.yScale(j.labelY0)+j.labelY_*i.height,o=m>0?m<i.width-j.contentBBox.width?m:i.width-j.contentBBox.width:0,p=n>0?n<i.height-j.contentBBox.height?n:i.height-j.contentBBox.height:0,q=i.xScale(j.labelX0),r=i.yScale(j.labelY0);j.stuckOnLimit=o!=m||p!=n,f.classed("vzb-transparent",!j.stuckOnLimit),i._repositionLabels(a,b,this,o,p,q,r,h)})}else null!=i.cached[a.geo]&&delete i.cached[a.geo]},_repositionLabels:function(a,b,c,d,e,f,g,h){var i=d3.select(c);i.transition().duration(h||0).ease("linear").attr("transform","translate("+d+","+e+")"),i.selectAll("line").attr("x1",f-d).attr("y1",g-e)},selectDataPoints:function(){var a=this;a.someSelected=a.model.entities.select.length>0,this.entityLabels=this.labelsContainer.selectAll(".vzb-bc-entity").data(a.model.entities.select,function(a){return a.geo}),this.entityLabels.exit().each(function(b){a._trails.run("remove",b)}).remove(),this.entityLabels.enter().append("g").attr("class","vzb-bc-entity").call(a.dragger).each(function(b,d){var e=d3.select(this);e.append("line").attr("class","vzb-bc-label-line"),e.append("rect").attr("class","vzb-transparent").on("click",function(b,d){if(!d3.event.defaultPrevented){var e=a.cached[b.geo].maxMinValues,f=c.areaToRadius(a.sScale(e.valueSmax));a._zoomOnRectangle(a.element,a.xScale(e.valueXmin)-f,a.yScale(e.valueYmin)+f,a.xScale(e.valueXmax)+f,a.yScale(e.valueYmax)-f,!1,500)}}),e.append("text").attr("class","vzb-bc-label-content vzb-bc-label-shadow"),e.append("text").attr("class","vzb-bc-label-content"),e.append("circle").attr("class","vzb-bc-label-x vzb-bc-label-shadow vzb-transparent").on("click",function(b,c){d3.event.defaultPrevented||a.model.entities.selectEntity(b)}),e.append("text").attr("class","vzb-bc-label-x vzb-transparent").text("x"),a._trails.create(b)}).on("mousemove",function(){d3.select(this).selectAll(".vzb-bc-label-x").classed("vzb-transparent",!1),d3.select(this).select("rect").classed("vzb-transparent",!1)}).on("mouseout",function(b){d3.select(this).selectAll(".vzb-bc-label-x").classed("vzb-transparent",!0),d3.select(this).select("rect").classed("vzb-transparent",!a.cached[b.geo].stuckOnLimit)})},_setTooltip:function(a){if(a){var b=d3.mouse(this.graph.node()).map(function(a){return parseInt(a)});this.tooltip.classed("vzb-hidden",!1).attr("style","left:"+(b[0]+50)+"px;top:"+(b[1]+50)+"px").html(a)}else this.tooltip.classed("vzb-hidden",!0)},_axisProjections:function(a){if(null!=a){var b=this.model.marker.axis_y.getValue(a),d=this.model.marker.axis_x.getValue(a),e=this.model.marker.size.getValue(a),f=c.areaToRadius(this.sScale(e));this.ui.whenHovering.showProjectionLineX&&this.projectionX.style("opacity",1).attr("y2",this.yScale(b)+f).attr("x1",this.xScale(d)).attr("x2",this.xScale(d)),this.ui.whenHovering.showProjectionLineY&&this.projectionY.style("opacity",1).attr("y1",this.yScale(b)).attr("y2",this.yScale(b)).attr("x1",this.xScale(d)-f),this.ui.whenHovering.higlightValueX&&this.xAxisEl.call(this.xAxis.highlightValue(d)),this.ui.whenHovering.higlightValueY&&this.yAxisEl.call(this.yAxis.highlightValue(b))}else this.projectionX.style("opacity",0),this.projectionY.style("opacity",0),this.xAxisEl.call(this.xAxis.highlightValue("none")),this.yAxisEl.call(this.yAxis.highlightValue("none"))},highlightDataPoints:function(){var a=this;if(this.someHighlighted=this.model.entities.brush.length>0,this.updateBubbleOpacity(),1===this.model.entities.brush.length){var b=c.clone(this.model.entities.brush[0]);a.model.time.lockNonSelected&&a.someSelected&&!a.model.entities.isSelected(b)?b.time=a.timeFormatter.parse(""+a.model.time.lockNonSelected):b.time=a.time,this._axisProjections(b)}else this._axisProjections()},updateBubbleOpacity:function(a){var b=this,c=1,d=.3,e=.8,f=this.model.entities.opacityRegular,g=this.model.entities.opacitySelectDim;this.entityBubbles.style("opacity",function(a){return b.someHighlighted&&b.model.entities.isHighlighted(a)?c:b.someSelected?b.model.entities.isSelected(a)?e:g:b.someHighlighted?d:f});var h=b.someSelected&&b.model.entities.opacitySelectDim<.01;h!=this.someSelectedAndOpacityZero_1&&this.entityBubbles.style("pointer-events",function(a){return!h||b.model.entities.isSelected(a)?"visible":"none"}),this.someSelectedAndOpacityZero_1=b.someSelected&&b.model.entities.opacitySelectDim<.01}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi;b.utils;b._require("d3")&&b.Tool.extend("BubbleChart",{init:function(a,b){this.name="bubblechart",this.components=[{component:"gapminder-bubblechart",placeholder:".vzb-tool-viz",model:["state.time","state.entities","state.marker","language"]},{component:"gapminder-timeslider",placeholder:".vzb-tool-timeslider",model:["state.time"]},{component:"gapminder-buttonlist",placeholder:".vzb-tool-buttonlist",model:["state","ui","language"]}],this.default_options={state:{time:{start:"1990",end:"2012",value:"2000",step:1,speed:300,formatInput:"%Y",round:"ceil",trails:!0,lockNonSelected:0,adaptMinMaxZoom:!1},entities:{show:{dim:"geo",filter:{_defs_:{geo:["afg","alb","dza","ago","atg","arg","arm","abw","aus","aut","aze","bhs","bhr","bgd","brb","blr","bel","blz","ben","btn","bol","bih","bwa","bra","chn","brn","bgr","bfa","bdi","khm","cmr","can","cpv","caf","tcd","_cis","chl","col","com","cod","cog","cri","civ","hrv","cub","cyp","cze","dnk","dji","dom","ecu","egy","slv","gnq","eri","est","eth","fji","fin","fra","guf","pyf","gab","gmb","geo","deu","gha","grc","grd","glp","gum","gtm","gin","gnb","guy","hti","hnd","hkg","hun","isl","ind","idn","irn","irq","irl","isr","ita","jam","jpn","jor","kaz","ken","kir","prk","kor","kwt","kgz","lao","lva","lbn","lso","lbr","lby","ltu","lux","mac","mkd","mdg","mwi","mys","mdv","mli","mlt","mtq","mrt","mus","myt","mex","fsm","mda","mng","mne","mar","moz","mmr","nam","npl","nld","ant","ncl","nzl","nic","ner","nga","nor","omn","pak","pan","png","pry","per","phl","pol","prt","pri","qat","reu","rou","rus","rwa","lca","vct","wsm","stp","sau","sen","srb","syc","sle","sgp","svk","svn","slb","som","zaf","sds","esp","lka","sdn","sur","swz","swe","che","syr","twn","tjk","tza","tha","tls","tgo","ton","tto","tun","tur","tkm","uga","ukr","are","gbr","usa","ury","uzb","vut","ven","pse","esh","vnm","vir","yem","zmb","zwe"],"geo.cat":["country"]}}}},marker:{dimensions:["entities","time"],type:"geometry",shape:"circle",label:{use:"property",which:"geo.name"},axis_y:{use:"indicator",which:"lex",scaleType:"linear",unit:"years"},axis_x:{use:"indicator",which:"gdp_per_cap",scaleType:"log",unit:"$/year/person"},color:{use:"property",which:"geo.region",scaleType:"ordinal",unit:"",palette:{_defs_:{_default:"#ffb600",world:"#ffb600",eur:"#FFE700",afr:"#00D5E9",asi:"#FF5872",ame:"#7FEB00"}}},size:{use:"indicator",which:"pop",scaleType:"linear",max:.75,unit:""}}},data:{reader:"local-json",path:"local_data/waffles/{{LANGUAGE}}/basic-indicators.json"},ui:{"vzb-tool-bubble-chart":{whenHovering:{showProjectionLineX:!0,showProjectionLineY:!0,higlightValueX:!0,higlightValueY:!0},labels:{autoResolveCollisions:!0,dragging:!0}},buttons:["moreoptions","find","axes","size","colors","fullscreen","trails","lock"]},language:{id:"en",strings:{en:{title:"Bubble Chart Title","buttons/expand":"Go big","buttons/unexpand":"Go small","buttons/trails":"Trails","buttons/lock":"Lock","buttons/find":"Find","buttons/deselect":"Deselect","buttons/ok":"OK","buttons/colors":"Colors","buttons/size":"Size","buttons/axes":"Axes","buttons/more_options":"Options","indicator/lex":"Life expectancy","indicator/gdp_per_cap":"GDP per capita","indicator/pop":"Population","indicator/geo.region":"Region","indicator/geo":"Geo code","indicator/time":"Time","indicator/geo.category":"Geo category","scaletype/linear":"Linear","scaletype/log":"Logarithmic","scaletype/genericLog":"Generic log","scaletype/time":"Time","scaletype/ordinal":"Ordinal","color/geo.region/asi":"Asia","color/geo.region/eur":"Europe","color/geo.region/ame":"Americas","color/geo.region/afr":"Afrika","color/geo.region/_default":"Other"}}}},this._super(a,b)},validate:function(a){a=this.model||a;var b=a.state.time,c=a.state.marker.label;if(c.getItems()&&!(c.getItems().length<1)){var d=c.getLimits("time").min,e=c.getLimits("time").max;b.start<d&&(b.start=d),b.end>e&&(b.end=e)}}})}.call(this),function(){var a=this,b=a.Vizabi,c=b.utils;b.Helper.extend("gapminder-bublechart-trails",{init:function(a){this.context=a},toggle:function(a){var b=this.context;a?(b._trails.create(),b._trails.run(["resize","recolor","findVisible","reveal"])):(b._trails.run("remove"),b.model.entities.select.forEach(function(a){a.trailStartTime=null}))},create:function(a){var b=this.context;if(b.model.time.trails&&b.model.entities.select.length){for(var c=+b.timeFormatter(b.model.time.start),d=+b.timeFormatter(b.model.time.end),e=b.model.time.step,f=[],g=c;d>=g;g+=e)f.push(g);a=null==a?b.model.entities.select:[a],a.forEach(function(a){var c=f.map(function(a){return{t:b.timeFormatter.parse(""+a)}});null==b.cached[a.geo]&&(b.cached[a.geo]={}),b.cached[a.geo].maxMinValues={valueXmax:null,valueXmin:null,valueYmax:null,valueYmin:null,valueSmax:null};var d=b.cached[a.geo].maxMinValues,e=b.entityTrails.filter(function(b){return b.geo==a.geo}).selectAll("g").data(c);e.exit().remove(),e.enter().append("g").attr("class","trailSegment").on("mousemove",function(a,c){var d=d3.select(this.parentNode).data()[0].geo;b._axisProjections({geo:d,time:a.t}),b._setTooltip(b.timeFormatter(a.t)),b.entityLabels.filter(function(a){return a.geo==d}).classed("vzb-highlighted",!0)}).on("mouseout",function(a,c){b._axisProjections(),b._setTooltip(),b.entityLabels.classed("vzb-highlighted",!1)}).each(function(a,b){var c=d3.select(this);c.append("circle"),c.append("line")}),e.each(function(c,e){c.valueY=b.model.marker.axis_y.getValue({geo:a.geo,time:c.t}),c.valueX=b.model.marker.axis_x.getValue({geo:a.geo,time:c.t}),c.valueS=b.model.marker.size.getValue({geo:a.geo,time:c.t}),c.valueC=b.model.marker.color.getValue({geo:a.geo,time:c.t}),(c.valueX>d.valueXmax||null==d.valueXmax)&&(d.valueXmax=c.valueX),(c.valueX<d.valueXmin||null==d.valueXmin)&&(d.valueXmin=c.valueX),(c.valueY>d.valueYmax||null==d.valueYmax)&&(d.valueYmax=c.valueY),(c.valueY<d.valueYmin||null==d.valueYmin)&&(d.valueYmin=c.valueY),(c.valueS>d.valueSmax||null==d.valueSmax)&&(d.valueSmax=c.valueS)})})}},run:function(a,b,c){var d=this.context;(d.model.time.trails&&d.model.entities.select.length||"remove"==a)&&(c||(c=0),a=[].concat(a),b=null==b?d.model.entities.select:[b],b.forEach(function(b){var e=d.entityTrails.filter(function(a){return a.geo==b.geo}).selectAll("g");a.forEach(function(a){d._trails["_"+a](e,c,b)})}))},_remove:function(a,b,c){a.remove()},_resize:function(a,b,d){var e=this.context;a.each(function(a,b){var d=d3.select(this);d.select("circle").attr("cy",e.yScale(a.valueY)).attr("cx",e.xScale(a.valueX)).attr("r",c.areaToRadius(e.sScale(a.valueS)));var f=this.parentNode.children[b+1];null!=f&&(f=f.__data__,d.select("line").attr("x1",e.xScale(f.valueX)).attr("y1",e.yScale(f.valueY)).attr("x2",e.xScale(a.valueX)).attr("y2",e.yScale(a.valueY)))})},_recolor:function(a,b,c){var d=this.context;a.each(function(a,b){var c=d3.select(this);c.select("circle").style("fill",d.cScale(a.valueC)),c.select("line").style("stroke",d.cScale(a.valueC))})},_findVisible:function(a,b,d){var e=this.context,f=!0,g=e.timeFormatter.parse(""+d.trailStartTime);a.each(function(a,b){a.transparent=a.t-e.time>=0||g-a.t>0||d.trailStartTime-e.timeFormatter(e.time)>=0,f&&!a.transparent&&(e.cached[d.geo].labelX0=a.valueX,e.cached[d.geo].labelY0=a.valueY,e.cached[d.geo].scaledS0=c.areaToRadius(e.sScale(a.valueS)),f=!1)})},_reveal:function(a,b,c){var d=this.context;a.each(function(a,b){var e=d3.select(this);if(e.classed("vzb-invisible",a.transparent),!a.transparent){var f=this.parentNode.children[b+1];null!=f&&(f=f.__data__,a.t-d.time<=0&&d.time-f.t<=0?(f=d.cached[c.geo],e.select("line").attr("x2",d.xScale(a.valueX)).attr("y2",d.yScale(a.valueY)).attr("x1",d.xScale(a.valueX)).attr("y1",d.yScale(a.valueY)).attr("x1",d.xScale(f.valueX)).attr("y1",d.yScale(f.valueY))):e.select("line").attr("x2",d.xScale(a.valueX)).attr("y2",d.yScale(a.valueY)).attr("x1",d.xScale(f.valueX)).attr("y1",d.yScale(f.valueY)))}})}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi,c=b.utils;b._require("d3")&&b.Component.extend("gapminder-linechart",{init:function(a,b){var d=this;this.name="linechart",this.template="src/tools/linechart/linechart.html",this.model_expects=[{name:"time",type:"time"},{name:"entities",type:"entities"},{name:"marker",type:"model"},{name:"language",type:"language"}],this.model_binds={change:function(a){d._readyOnce&&-1==a.indexOf("change:time")&&(d.updateShow(),d.redrawDataPoints())},ready:function(a){d._readyOnce&&(d.updateShow(),d.updateSize(),d.updateTime(),d.redrawDataPoints())},"change:time:value":function(){d._readyOnce&&(d.updateTime(),d.redrawDataPoints())}},this._super(a,b),this.xScale=null,this.yScale=null,this.xAxis=d3.svg.axisSmart().orient("bottom"),this.yAxis=d3.svg.axisSmart().orient("left"),this.isDataPreprocessed=!1,this.timeUpdatedOnce=!1,this.sizeUpdatedOnce=!1,this.ui=c.extend({entity_labels:{},whenHovering:{}},this.ui["vzb-tool-"+this.name]),this.ui.entity_labels=c.extend({min_number_of_entities_when_values_hide:10},this.ui.entity_labels),this.ui.whenHovering=c.extend({hideVerticalNow:!0,showProjectionLineX:!0,showProjectionLineY:!0,higlightValueX:!0,higlightValueY:!0,showTooltip:!0},this.ui.whenHovering)},readyOnce:function(){var a=this;this.element=d3.select(this.element),this.graph=this.element.select(".vzb-lc-graph"),this.yAxisEl=this.graph.select(".vzb-lc-axis-y"),this.xAxisEl=this.graph.select(".vzb-lc-axis-x"),this.yTitleEl=this.graph.select(".vzb-lc-axis-y-title"),this.xValueEl=this.graph.select(".vzb-lc-axis-x-value"),this.yValueEl=this.graph.select(".vzb-lc-axis-y-value"),this.linesContainer=this.graph.select(".vzb-lc-lines"),this.labelsContainer=this.graph.select(".vzb-lc-labels"),this.verticalNow=this.labelsContainer.select(".vzb-lc-vertical-now"),this.tooltip=this.element.select(".vzb-tooltip"),this.projectionX=this.graph.select("g").select(".vzb-lc-projection-x"),this.projectionY=this.graph.select("g").select(".vzb-lc-projection-y"),this.entityLines=null,this.entityLabels=null,this.totalLength_1={},this.on("resize",function(){a.updateSize(),a.updateTime(),a.redrawDataPoints()}),a.updateShow(),a.updateSize(),a.updateTime(),a.redrawDataPoints()},updateShow:function(){var a=this;this.duration=this.model.time.speed,this.translator=this.model.language.getTFunction();var b=this.translator("indicator/"+this.model.marker.axis_y.which),c=this.yTitleEl.selectAll("text").data([0]);c.enter().append("text"),c.attr("y","-0px").attr("x","-9px").attr("dy","-0.36em").attr("dx","-0.72em").text(b),this.cached={},this.yScale=this.model.marker.axis_y.getScale(),this.xScale=this.model.marker.axis_x.getScale(),this.cScale=this.model.marker.color.getScale(),this.cShadeScale=this.model.marker.color_shadow.getScale(),this.yAxis.tickSize(6,0).tickFormat(this.model.marker.axis_y.tickFormatter),this.xAxis.tickSize(6,0).tickFormat(this.model.marker.axis_x.tickFormatter),this.collisionResolver=d3.svg.collisionResolver().selector(".vzb-lc-label").value("valueY").scale(this.yScale),this.line=d3.svg.line().interpolate("basis").x(function(b){return a.xScale(b[0])}).y(function(b){return a.yScale(b[1])})},updateTime:function(){var a=null===this.time?this.model.time.value:this.time;this.time=this.model.time.value,this.duration=this.model.time.playing&&this.time-a>0?.9*this.model.time.speed:0,this.data=this.model.marker.label.getItems({time:this.time}),this.entityLines=this.linesContainer.selectAll(".vzb-lc-entity").data(this.data),this.entityLabels=this.labelsContainer.selectAll(".vzb-lc-entity").data(this.data),this.timeUpdatedOnce=!0},updateSize:function(){var a=this,b=2;this.profiles={small:{margin:{top:30,right:20,left:40,bottom:30},tick_spacing:60,text_padding:8,lollipopRadius:6,limitMaxTickNumberX:5},medium:{margin:{top:40,right:60,left:60,bottom:40},tick_spacing:80,text_padding:12,lollipopRadius:7,limitMaxTickNumberX:10},large:{margin:{top:50,right:60,left:60,bottom:50},tick_spacing:100,text_padding:20,lollipopRadius:9,limitMaxTickNumberX:0}},this.activeProfile=this.profiles[this.getLayoutProfile()],this.margin=this.activeProfile.margin,this.tick_spacing=this.activeProfile.tick_spacing;var c=this.model.marker.label.getItems().map(function(b,c){return a.model.marker.label.getValue(b)}),d=0,e=this.linesContainer.selectAll(".samplingView").data(c);e.enter().append("text").attr("class","samplingView vzb-lc-labelName").style("opacity",0).text(function(a){return a.length<13?a:a.substring(0,10)+"..."}).each(function(a){d>this.getComputedTextLength()||(d=this.getComputedTextLength())}).remove(),this.margin.right=Math.max(this.margin.right,d+this.activeProfile.text_padding+20),this.height=parseInt(this.element.style("height"),10)-this.margin.top-this.margin.bottom,this.width=parseInt(this.element.style("width"),10)-this.margin.left-this.margin.right,this.collisionResolver.height(this.height),this.graph.attr("width",this.width+this.margin.right+this.margin.left).attr("height",this.height+this.margin.top+this.margin.bottom).select("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),"ordinal"!==this.model.marker.axis_y.scaleType?this.yScale.range([this.height,0]):this.yScale.rangePoints([this.height,0],b).range(),"ordinal"!==this.model.marker.axis_x.scaleType,this.xScale.range([0,this.width]),this.yAxis.scale(this.yScale).labelerOptions({scaleType:this.model.marker.axis_y.scaleType,toolMargin:{top:0,right:this.margin.right,left:this.margin.left,bottom:this.margin.bottom},limitMaxTickNumber:6}),this.xAxis.scale(this.xScale).labelerOptions({scaleType:this.model.marker.axis_x.scaleType,toolMargin:this.margin,limitMaxTickNumber:this.activeProfile.limitMaxTickNumberX}),this.yAxisEl.call(this.yAxis),this.xAxisEl.call(this.xAxis),this.xAxisEl.attr("transform","translate(0,"+this.height+")"),this.xValueEl.attr("transform","translate(0,"+this.height+")").attr("y",this.xAxis.tickPadding()+this.xAxis.tickSize()),this.verticalNow.attr("y1",this.yScale.range()[0]).attr("y2",this.yScale.range()[1]).attr("x1",0).attr("x2",0),this.projectionX.attr("y1",a.yScale.range()[0]),this.projectionY.attr("x2",a.xScale.range()[0]),this.parent.trigger("myEvent",this.xScale.range()[1],this.margin.right),this.sizeUpdatedOnce=!0},redrawDataPoints:function(){var a=this;this.timeUpdatedOnce||this.updateTime(),this.sizeUpdatedOnce||this.updateSize(),this.entityLabels.exit().remove(),this.entityLines.exit().remove(),this.entityLines.enter().append("g").attr("class","vzb-lc-entity").on("mousemove",function(b,c){a.entityMousemove(b,c,a)}).on("mouseout",function(b,c){a.entityMouseout(b,c,a)}).each(function(b,c){var d=d3.select(this),e=a.cScale(a.model.marker.color.getValue(b)),f=a.cShadeScale(a.model.marker.color_shadow.getValue(b));d.append("path").attr("class","vzb-lc-line-shadow").style("stroke",f).attr("transform","translate(0,2)"),d.append("path").attr("class","vzb-lc-line").style("stroke",e)}),this.entityLabels.enter().append("g").attr("class","vzb-lc-entity").on("mousemove",function(b,c){a.entityMousemove(b,c,a)}).on("mouseout",function(b,c){a.entityMouseout(b,c,a)}).each(function(b,c){var d=d3.select(this),e=a.cScale(a.model.marker.color.getValue(b)),f=a.cShadeScale(a.model.marker.color_shadow.getValue(b));a.model.marker.label.getValue(b);d.append("circle").attr("class","vzb-lc-circle").style("fill",e).attr("cx",0);var g=d.append("g").attr("class","vzb-lc-label");g.append("text").attr("class","vzb-lc-labelName").style("fill",f).attr("dy",".35em"),g.append("text").attr("class","vzb-lc-labelValue").style("fill",f).attr("dy","1.6em")}),this.entityLines.each(function(b,d){var e=d3.select(this),f=(a.model.marker.label.getValue(b),a.model.marker.axis_x.getValues(b)),g=a.model.marker.axis_y.getValues(b),h=f.map(function(a,b){return[+f[b],+g[b]]});h=h.filter(function(a){return!c.isNaN(a[1])}),a.cached[b.geo]={valueY:h[h.length-1][1]};var i=e.select(".vzb-lc-line-shadow").attr("d",a.line(h)),j=e.select(".vzb-lc-line").attr("d",a.line(h));if(a.model.time.playing){var k=j.node().getTotalLength();null===a.totalLength_1[b.geo]&&(a.totalLength_1[b.geo]=k),
i.attr("stroke-dasharray",k).attr("stroke-dashoffset",k-a.totalLength_1[b.geo]).transition().duration(a.duration).ease("linear").attr("stroke-dashoffset",0),j.attr("stroke-dasharray",k).attr("stroke-dashoffset",k-a.totalLength_1[b.geo]).transition().duration(a.duration).ease("linear").attr("stroke-dashoffset",0),a.totalLength_1[b.geo]=k}else a.totalLength_1[b.geo]=null,i.attr("stroke-dasharray","none").attr("stroke-dashoffset","none"),j.attr("stroke-dasharray","none").attr("stroke-dashoffset","none")}),this.entityLabels.each(function(b,c){var d=d3.select(this),e=a.model.marker.label.getValue(b);d.select(".vzb-lc-circle").transition().duration(a.duration).ease("linear").attr("r",a.profiles[a.getLayoutProfile()].lollipopRadius).attr("cy",a.yScale(a.cached[b.geo].valueY)+1),d.select(".vzb-lc-label").transition().duration(a.duration).ease("linear").attr("transform","translate(0,"+a.yScale(a.cached[b.geo].valueY)+")");var f=a.yAxis.tickFormat()(a.cached[b.geo].valueY),g=e.length<13?e:e.substring(0,10)+"...",h=a.ui.entity_labels.min_number_of_entities_when_values_hide,i=d.select(".vzb-lc-labelName").attr("dx",a.activeProfile.text_padding).text(g+" "+(a.data.length<h?f:""));if(d.select(".vzb-lc-labelValue").attr("dx",a.activeProfile.text_padding).text(""),a.data.length<h){var j=a.xScale(a.time)+i[0][0].getComputedTextLength()+a.activeProfile.text_padding,k=a.width+a.margin.right;j>k&&(d.select(".vzb-lc-labelName").text(g),d.select(".vzb-lc-labelValue").text(f))}}),this.labelsContainer.transition().duration(a.duration).ease("linear").attr("transform","translate("+a.xScale(a.time)+",0)"),this.verticalNow.style("opacity",this.time-this.model.time.start===0||a.hoveringNow?0:1),this.hoveringNow||this.xAxisEl.call(this.xAxis.highlightValue(a.time).highlightTransDuration(a.duration)),0==a.duration&&d3.timer.flush(),clearTimeout(a.collisionTimeout),a.collisionTimeout=setTimeout(function(){a.entityLabels.call(a.collisionResolver.data(a.cached))},1.5*a.model.time.speed)},entityMousemove:function(a,b,d){var e=d;e.hoveringNow=a,e.graph.selectAll(".vzb-lc-entity").each(function(){d3.select(this).classed("vzb-dimmed",function(a){return a.geo!==e.hoveringNow.geo}).classed("vzb-hovered",function(a){return a.geo===e.hoveringNow.geo})});var f=d3.mouse(e.graph.node()).map(function(a){return parseInt(a)}),g=e.xScale.invert(f[0]-e.margin.left);e.time-g<0&&(g=e.time);var h=e.model.marker.axis_y.getValue({geo:a.geo,time:g});if(!c.isNaN(h)){var i=e.xScale(g),j=e.yScale(h);e.ui.whenHovering.showTooltip&&e.tooltip.style("right",e.width-i+e.margin.left+e.margin.right+"px").style("bottom",e.height-j+e.margin.bottom+"px").text(e.yAxis.tickFormat()(h)).classed("vzb-hidden",!1),e.ui.whenHovering.hideVerticalNow&&e.verticalNow.style("opacity",0),e.ui.whenHovering.showProjectionLineX&&e.projectionX.style("opacity",1).attr("y2",j).attr("x1",i).attr("x2",i),e.ui.whenHovering.showProjectionLineY&&e.projectionY.style("opacity",1).attr("y1",j).attr("y2",j).attr("x1",i),e.ui.whenHovering.higlightValueX&&e.xAxisEl.call(e.xAxis.highlightValue(g).highlightTransDuration(0)),e.ui.whenHovering.higlightValueY&&e.yAxisEl.call(e.yAxis.highlightValue(h).highlightTransDuration(0)),clearTimeout(e.unhoverTimeout)}},entityMouseout:function(a,b,c){var d=c;d.unhoverTimeout=setTimeout(function(){d.tooltip.classed("vzb-hidden",!0),d.verticalNow.style("opacity",1),d.projectionX.style("opacity",0),d.projectionY.style("opacity",0),d.xAxisEl.call(d.xAxis.highlightValue(d.time)),d.yAxisEl.call(d.yAxis.highlightValue("none")),d.graph.selectAll(".vzb-lc-entity").each(function(){d3.select(this).classed("vzb-dimmed",!1).classed("vzb-hovered",!1)}),d.hoveringNow=null},300)}})}.call(this),function(){"use strict";var a=this,b=a.Vizabi;b.utils;b._require("d3")&&b.Tool.extend("LineChart",{init:function(a,b){this.name="linechart",this.components=[{component:"gapminder-linechart",placeholder:".vzb-tool-viz",model:["state.time","state.entities","state.marker","language"]},{component:"gapminder-timeslider",placeholder:".vzb-tool-timeslider",model:["state.time"],ui:{show_value_when_drag_play:!1,axis_aligned:!0}},{component:"gapminder-buttonlist",placeholder:".vzb-tool-buttonlist",model:["state","ui","language"]}],this.default_options={state:{time:{start:1990,end:2012,value:2012,step:1,speed:300,formatInput:"%Y"},entities:{show:{dim:"geo",filter:{geo:["*"],"geo.cat":["region"]}}},marker:{dimensions:["entities","time"],label:{use:"property",which:"geo.name"},axis_y:{use:"indicator",which:"gdp_per_cap",scaleType:"log"},axis_x:{use:"indicator",which:"time",scaleType:"time"},color:{use:"property",which:"geo.region",palette:{_default:"#ffb600",eur:"#FFE700",afr:"#00D5E9",asi:"#FF5872",ame:"#7FEB00"}},color_shadow:{use:"property",which:"geo.region",palette:{_default:"#fbbd00",eur:"#fbaf09",afr:"#0098df",asi:"#da0025",ame:"#00b900"}}}},data:{reader:"local-json",path:"local_data/waffles/{{LANGUAGE}}/basic-indicators.json"},ui:{"vzb-tool-line-chart":{entity_labels:{min_number_of_entities_when_values_hide:2},whenHovering:{hideVerticalNow:0,showProjectionLineX:!0,showProjectionLineY:!0,higlightValueX:!0,higlightValueY:!0,showTooltip:0}},buttons:["colors","fullscreen"]},language:{id:"en",strings:{en:{title:"Line Chart Title","buttons/find":"Find","buttons/expand":"Expand","buttons/colors":"Colors","buttons/size":"Size","buttons/more_options":"Options","indicator/lex":"Life expectancy","indicator/gdp_per_cap":"GDP per capita","indicator/pop":"Population"},pt:{title:"Título do Linulaula Chart","buttons/expand":"Expandir","buttons/find":"Encontre","buttons/colors":"Cores","buttons/size":"Tamanho","buttons/more_options":"Opções","indicator/lex":"Expectables Livappulo","indicator/gdp_per_cap":"PIB pers capitous","indicator/pop":"Peoples"}}}},this._super(a,b)},validate:function(a){a=this.model||a;var b=a.state.time,c=a.state.marker.label;if(c.getItems()&&!(c.getItems().length<1)){var d=c.getLimits("time").min,e=c.getLimits("time").max;b.start<d&&(b.start=d),b.end>e&&(b.end=e)}}})}.call(this),function(){"use strict";Vizabi._require("d3")&&(d3.svg.axisSmart=function(){return function a(b){function c(a,b,c){return c.indexOf(a)===b}function d(a){if(null!=o)return void d.highlightValueRun(a);var c=a.append("g").attr("class","tick widthSampling"),e=c.append("text").text("0");u.cssMarginTop=e.style("margin-top"),u.cssMarginBottom=e.style("margin-bottom"),u.cssMarginLeft=e.style("margin-left"),u.cssMarginRight=e.style("margin-right"),u.widthOfOneDigit=e[0][0].getBBox().width,u.heightOfOneDigit=e[0][0].getBBox().height,c.remove(),d.labelFactory(u),b(u.transitionDuration>0?a.transition().duration(u.transitionDuration):a);var f="top"==d.orient()||"bottom"==d.orient()?i:h,g=f==i&&d.pivot()||f==h&&!d.pivot()?k:j;a.selectAll(".vzb-axis-value").data([null]).enter().append("g").attr("class","vzb-axis-value").append("text").style("opacity",0),a.selectAll("text").each(function(a,b){var c=d3.select(this);if(null!=d.pivot()&&(c.attr("transform","rotate("+(d.pivot()?-90:0)+")"),c.style("text-anchor",g==j?"middle":"end"),c.attr("x",g==j?0:-d.tickPadding()-d.tickSize()),c.attr("y",g==j?(f==h?-1:1)*(d.tickPadding()+d.tickSize()):0),c.attr("dy",g==j?f==h?0:".72em":".32em"),null!=d.repositionLabels())){var e=d.repositionLabels()[b]||{x:0,y:0};c.attr("x",+c.attr("x")+e.x),c.attr("y",+c.attr("y")+e.y)}}),null==d.tickValuesMinor()&&d.tickValuesMinor([]);var l=a.selectAll(".tickMinor").data(s);l.exit().remove(),l.enter().append("line").attr("class","tickMinor");var m=d.tickSizeMinor().outbound,n=d.tickSizeMinor().inbound,p=d.scale();l.attr("y1",f==i?("top"==d.orient()?1:-1)*n:p).attr("y2",f==i?("top"==d.orient()?-1:1)*m:p).attr("x1",f==h?("right"==d.orient()?-1:1)*n:p).attr("x2",f==h?("right"==d.orient()?1:-1)*m:p)}function e(a,b){null==b&&(b=!0);var c=[],d=[];-1!=a.indexOf(0)&&(c.push([0]),d.push(a.indexOf(0)));for(var e=a.length;e>=1;e=4>e?e-1:e/2)c.push(a.filter(function(a,c){return c%Math.floor(e)!=0||-1!=d.indexOf(c)&&b?!1:(d.push(c),!0)}));return c}function f(a,b,c,d,e){if(null==a)return null;var f=c==h?{head:b.toolMargin.top,tail:b.toolMargin.bottom}:{head:b.toolMargin.right,tail:b.toolMargin.left},g={};return a.forEach(function(j,k){if(0==k||k==a.length-1){var l=f.head+(c==i?1:0)*d3.max(d.range())-(c==i?0:1)*d3.min(d.range())+(c==i?-1:1)*d(j)-("x"==e)*b.formatter(j).length*b.widthOfOneDigit/2-("y"==e)*b.heightOfOneDigit/2,m=Math.min(f.tail,b.widthOfOneDigit)+(c==h?1:0)*d3.max(d.range())-(c==h?0:1)*d3.min(d.range())+(c==h?-1:1)*d(j)-("x"==e)*b.formatter(j).length*b.widthOfOneDigit/2-("y"==e)*b.heightOfOneDigit/2;l>0&&(l=0),m>0&&(m=0),g[k]={x:0,y:0},g[k][e]=("y"==e&&c==h?-1:1)*(l-m)}}),a.forEach(function(f,j){if(0!=j&&j!=a.length-1){var k=Math.abs(d(f)-d(a[a.length-1]))-("y"==e&&c==i?-1:1)*g[a.length-1][e]-("x"==e)*b.widthOfOneDigit/2*b.formatter(f).length-("x"==e)*b.widthOfOneDigit/2*b.formatter(a[a.length-1]).length-("y"==e)*b.heightOfOneDigit*.7,l=Math.abs(d(f)-d(a[0]))-("y"==e&&c==h?-1:1)*g[0][e]-("x"==e)*b.widthOfOneDigit/2*b.formatter(f).length-("x"==e)*b.widthOfOneDigit/2*b.formatter(a[0]).length-("y"==e)*b.heightOfOneDigit*.7;k>0&&(k=0),l>0&&(l=0),g[j]={x:0,y:0},g[j][e]=("y"==e&&c==h?-1:1)*(k-l)}}),g}function g(a,b,c,e,f){return d.labelerOptions().isDevMode?null!=f?void console.log(a,b,c,e,f):null!=e?void console.log(a,b,c,e):null!=c?void console.log(a,b,c):null!=b?void console.log(a,b):null!=a?void console.log(a):void 0:void 0}var h="vertical axis",i="horizontal axis",j="labels stack side by side",k="labels stack top to bottom",l="optimistic approximation: labels have different lengths",m="pessimistic approximation: all labels have the largest length",n=10;d.highlightValueRun=function(a){var b="top"==d.orient()||"bottom"==d.orient()?i:h;a.selectAll(".tick").each(function(a,b){d3.select(this).select("text").transition().duration(p).ease("linear").style("opacity","none"==o?1:Math.min(1,Math.pow(Math.abs(d.scale()(a)-d.scale()(o))/(d.scale().range()[1]-d.scale().range()[0])*5,2)))}),a.select(".vzb-axis-value").transition().duration(p).ease("linear").attr("transform","none"==o?"translate(0,0)":"translate("+(b==i?d.scale()(o):0)+","+(b==h?d.scale()(o):0)+")"),a.select(".vzb-axis-value").select("text").text(d.tickFormat()("none"==o?0:o)).style("opacity","none"==o?0:1),o=null};var o=null;d.highlightValue=function(a){return arguments.length?(o=a,d):o};var p=0;d.highlightTransDuration=function(a){return arguments.length?(p=a,d):p};var q=null;d.repositionLabels=function(a){return arguments.length?(q=a,d):q};var r=!1;d.pivot=function(a){return arguments.length?(r=!!a,d):r};var s=[];d.tickValuesMinor=function(a){return arguments.length?(s=a,d):s};var t={outbound:0,inbound:0};d.tickSizeMinor=function(a,b){return arguments.length?(t={outbound:a,inbound:b||0},g("setting",t),d):t};var u={};return d.labelerOptions=function(a){return arguments.length?(u=a,d):u},d.labelFactory=function(a){function b(b,c){return null==c&&(c=a.logBase),Math.log(b)/Math.log(c)}if(this.METHOD_REPEATING="repeating specified powers",this.METHOD_DOUBLING="doubling the value",null==a&&(a={}),"linear"!=a.scaleType&&"time"!=a.scaleType&&"genericLog"!=a.scaleType&&"log"!=a.scaleType&&"ordinal"!=a.scaleType)return d.ticks(v).tickFormat(null).tickValues(null).tickValuesMinor(null).pivot(null).repositionLabels(null);if("ordinal"==a.scaleType)return d.tickValues(null);null==a.logBase&&(a.logBase=n),null==a.baseValues&&(a.stops=[1,2,5,3,7,4,6,8,9]),null==a.removeAllLabels&&(a.removeAllLabels=!1),null==a.formatterRemovePrefix&&(a.formatterRemovePrefix=!1),null==a.formatter&&(a.formatter=function(b){if("time"==a.scaleType)return b instanceof Date||(b=new Date(b)),d3.time.format("%Y")(b);var c="f",d=0;Math.abs(b)<1&&(d=1,c="r");var e="";if(a.formatterRemovePrefix)return d3.format("."+d+c)(b);switch(Math.floor(Math.log10(Math.abs(b)))){case-13:b=1e12*b,e="p";break;case-10:b=1e9*b,e="n";break;case-7:b=1e6*b,e="µ";break;case-6:b=1e6*b,e="µ";break;case-5:b=1e6*b,e="µ";break;case-4:break;case-3:break;case-2:break;case-1:break;case 0:break;case 1:break;case 2:break;case 3:break;case 4:break;case 5:b/=1e3,e="k";break;case 6:b/=1e6,e="M",d=1;break;case 7:b/=1e6,e="M";break;case 8:b/=1e6,e="M";break;case 9:b/=1e9,e="B",d=1;break;case 10:b/=1e9,e="B";break;case 11:b/=1e9,e="B";break;case 12:b/=1e12,e="T",d=1;break;default:return d3.format("."+d+"s")(b).replace("G","B")}return(d3.format("."+d+c)(b)+e).replace("G","B")}),a.cssLabelMarginLimit=5,(null==a.cssMarginLeft||parseInt(a.cssMarginLeft)<a.cssLabelMarginLimit)&&(a.cssMarginLeft=a.cssLabelMarginLimit+"px"),(null==a.cssMarginRight||parseInt(a.cssMarginRight)<a.cssLabelMarginLimit)&&(a.cssMarginRight=a.cssLabelMarginLimit+"px"),(null==a.cssMarginTop||parseInt(a.cssMarginTop)<a.cssLabelMarginLimit)&&(a.cssMarginTop=a.cssLabelMarginLimit+"px"),(null==a.cssMarginBottom||parseInt(a.cssMarginBottom)<a.cssLabelMarginLimit)&&(a.cssMarginBottom=a.cssLabelMarginLimit+"px"),null==a.toolMargin&&(a.toolMargin={left:30,bottom:30,right:30,top:30}),null==a.pivotingLimit&&(a.pivotingLimit=a.toolMargin[this.orient()]),null==a.showOuter&&(a.showOuter=!1),null==a.limitMaxTickNumber&&(a.limitMaxTickNumber=0);var j="top"==this.orient()||"bottom"==this.orient()?i:h;null==a.isPivotAuto&&(a.isPivotAuto=j==h),null==a.cssFontSize&&(a.cssFontSize="13px"),null==a.widthToFontsizeRatio&&(a.widthToFontsizeRatio=.75),null==a.heightToFontsizeRatio&&(a.heightToFontsizeRatio=1.2),null==a.widthOfOneDigit&&(a.widthOfOneDigit=parseInt(a.cssFontSize)*a.widthToFontsizeRatio),null==a.heightOfOneDigit&&(a.heightOfOneDigit=parseInt(a.cssFontSize)*a.heightToFontsizeRatio),g("********** "+j+" **********");var k=d.scale().domain(),o=d.scale().range(),p=(Math.abs(k[k.length-1]-k[0]),Math.abs(o[o.length-1]-o[0])),q=d3.min([k[0],k[k.length-1]]),r=d3.max([k[0],k[k.length-1]]),s=0>q&&r>0&&"time"!=a.scaleType;s&&"log"==a.scaleType&&console.error("It looks like your "+j+" log scale domain is crossing ZERO. Classic log scale can only be one-sided. If need crossing zero try using genericLog scale instead");var t=a.showOuter?[q,r]:[],u=[],v=5,w=d3.max(d3.range(q,r,(r-q)/17).concat(r).map(function(b){return a.formatter(b).length}))*a.widthOfOneDigit+parseInt(a.cssMarginLeft),x=a.isPivotAuto&&(w+d.tickPadding()+d.tickSize()>a.pivotingLimit&&j==h||!(w+d.tickPadding()+d.tickSize()>a.pivotingLimit)&&!(j==h)),y=j==i&&x||j==h&&!x,z=!y&&a.heightOfOneDigit>a.pivotingLimit;if(a.removeAllLabels)return d.tickValues([]);if(q==r)return d.tickValues([q]).ticks(1).tickFormat(a.formatter);var A=function(b,c,e,f){if(null==b||b.length<=1)return!0;if(null==e&&(e=m),null==f&&(scaleType="none"),y)return c>b.length*(a.heightOfOneDigit+parseInt(a.cssMarginTop)+parseInt(a.cssMarginBottom));var g=parseInt(a.cssMarginLeft)+parseInt(a.cssMarginRight),h=d3.max(b.map(function(b){return a.formatter(b).length}));return"log"==f?(c=Math.abs(d.scale()(d3.max(b))-d.scale()(d3.min(b))),c>d3.sum(b.map(function(b){return(a.widthOfOneDigit*(e==m?h:a.formatter(b).length)+g)*(1+Math.log10((b+"").substr(0,1)))}))):c>b.length*g+(e==m?a.widthOfOneDigit*b.length*h:0)+(e==l?a.widthOfOneDigit*b.map(function(b){return a.formatter(b)}).join("").length:0)},B=function(b,c){if(null==c||0==c.length)return!1;c instanceof Array||(c=[c]);for(var e=0;e<c.length;e++)if(b!=c[e]&&0!=b&&Math.abs(d.scale()(b)-d.scale()(c[e]))<(y?a.heightOfOneDigit:(a.formatter(b).length+a.formatter(c[e]).length)*a.widthOfOneDigit/2))return!0;return!1};if("genericLog"==a.scaleType||"log"==a.scaleType){var C=d.scale().eps?d.scale().eps():0,D=s?[0]:[],E=C>r?[]:d3.range(Math.floor(b(Math.max(C,q))),Math.ceil(b(r)),1).concat(Math.ceil(b(r))).map(function(b){return Math.pow(a.logBase,b)}),F=q>-C?[]:d3.range(Math.floor(b(Math.max(C,-r))),Math.ceil(b(-q)),1).concat(Math.ceil(b(-q))).map(function(b){return-Math.pow(a.logBase,b)});if(null==a.method){var G=s?Math.max(Math.abs(r),Math.abs(q))/C:Math.max(Math.abs(r),Math.abs(q))/Math.min(Math.abs(r),Math.abs(q));a.method=G>=10&&1024>=G?this.METHOD_DOUBLING:this.METHOD_REPEATING}if(a.method==this.METHOD_DOUBLING){var H=[];s&&t.push(0);var I=[].concat(t),J=C>r?null:4*E[Math.floor(E.length/2)-1],K=q>-C?null:4*F[Math.floor(F.length/2)-1];if(J)for(var L=J;r>=L;L*=2)H.push(L);if(J)for(var L=J/2;L>=Math.max(q,C);L/=2)H.push(L);if(K)for(var L=K;L>=q;L*=2)H.push(L);if(K)for(var L=K/2;L<=Math.min(r,-C);L/=2)H.push(L);H=H.sort(d3.ascending).filter(function(a){return a>=q&&r>=a}),u=u.concat(H),H=e(H,!1);for(var M=t,N=0;N<H.length;N++){var O=M.concat(H[N]).filter(function(a){return!B(a,I)}).filter(c);if(!A(O,p,m,"none"))break;t=O}}if(a.method==this.METHOD_REPEATING){var P=D.concat(E).concat(F).sort(d3.ascending);a.stops.forEach(function(a,b){u=u.concat(P.map(function(b){return b*a}))}),P=e(P);var I=D.concat(t),Q=!1;a.stops.forEach(function(b,d){if(0==d){for(var e=0;e<P.length;e++){var f=t.concat(P[e].map(function(a){return a*b})).filter(function(a){return!B(a,I)}).filter(function(a){return a>=q&&r>=a}).filter(c);if(!A(f,p,l,"none"))break;t=f}P=[].concat.apply([],P)}else{if(Q)return;var f=t.concat(P.map(function(a){return a*b})).filter(function(a){return a>=q&&r>=a}).filter(c);if(!A(f,p,m,"log"))return void(Q=!0);if(t.length>a.limitMaxTickNumber&&0!=a.limitMaxTickNumber)return void(Q=!0);t=f}})}}if("linear"==a.scaleType||"time"==a.scaleType){s&&t.push(0);var I=[].concat(t);v=Math.max(Math.floor(p/w),2),0!=a.limitMaxTickNumber&&v>a.limitMaxTickNumber&&(v=a.limitMaxTickNumber);var R=d.scale().ticks.apply(d.scale(),[v]).sort(d3.ascending).filter(function(a){return a>=q&&r>=a});u=u.concat(R),R=e(R,!1);for(var M=t,N=0;N<R.length;N++){var O=M.concat(R[N]).filter(function(a){return!B(a,I)}).filter(c);if(!A(O,p,m,"none"))break;t=O}t=t.filter(function(a){return!B(a,I)}).filter(c)}return null!=t&&t.length<=2&&!s&&(t=[q,r]),null!=t&&t.length<=3&&s&&(t=B(0,[q,r])?[q,r]:[q,0,r]),null!=t&&t.sort(function(a,b){return(j==i?-1:1)*(d.scale()(b)-d.scale()(a))}),z&&(t=[]),u=u.filter(function(a){return-1==t.indexOf(a)&&a>=q&&r>=a}),g("final result",t),d.ticks(v).tickFormat(a.formatter).tickValues(t).tickValuesMinor(u).pivot(x).repositionLabels(f(t,a,j,d.scale(),y?"y":"x"))},d.copy=function(){return a(d3.svg.axis())},d3.rebind(d,b,"scale","orient","ticks","tickValues","tickFormat","tickSize","innerTickSize","outerTickSize","tickPadding","tickSubdivide")}(d3.svg.axis())})}.call(this),function(){"use strict";Vizabi._require("d3")&&(d3.svg.collisionResolver=function(){return function(){function a(l){return null==e?void console.warn("D3 collision resolver stopped: missing data to work with. Example: data = {asi: {valueY: 45, valueX: 87}, ame: {valueY: 987, valueX: 767}}"):null==f?void console.warn("D3 collision resolver stopped: missing a CSS slector"):null==g?void console.warn("D3 collision resolver stopped: missing height of the canvas"):null==i?void console.warn("D3 collision resolver stopped: missing pointer within data objects. Example: value = 'valueY' "):(l.each(function(a,b){c[a.geo]=d3.select(this).select(f)[0][0].getBBox().height}),d=a.calculatePositions(e,i,g,h),void l.each(function(a,c){if(!e[a.geo][j]){var g=d[a.geo]||h(e[a.geo][i])||0,l=null;return null!=k?void k(a,c,this,l,g):void d3.select(this).selectAll(f).transition().duration(b).attr("transform","translate(0,"+g+")")}}))}var b=300,c={},d={};a.calculatePositions=function(a,b,d,e){var f={},g=Object.keys(a).sort(function(c,d){return a[c][b]-a[d][b]});g.forEach(function(d,h){f[d]=e(a[d][b]);for(var i=h;i>0;i--){var j=f[g[i-1]]-f[g[i]]-c[g[i]];if(0>j&&(f[g[i-1]]-=j),j>0)break}});var h=d-f[g[0]]-c[g[0]];if(0>h){f[g[0]]+=h;for(var i=0;i<g.length-1;i++){var h=f[g[i]]-f[g[i+1]]-c[g[i+1]];if(0>h&&(f[g[i+1]]+=h),h>0)break}}return f};var e=null;a.data=function(b){return arguments.length?(e=b,a):e};var f=null;a.selector=function(b){return arguments.length?(f=b,a):f};var g=null;a.height=function(b){return arguments.length?(g=b,a):g};var h=d3.scale.linear().domain([0,1]).range([0,1]);a.scale=function(b){return arguments.length?(h=b,a):h};var i=null;a.value=function(b){return arguments.length?(i=b,a):i};var j=null;a.fixed=function(b){return arguments.length?(j=b,a):j};var k=null;return a.handleResult=function(b){return arguments.length?(k=b,a):k},a}()})}.call(this),function(){"use strict";Vizabi._require("d3")&&(d3.svg.colorPicker=function(){return function(){function a(){for(var a=[],c=0;f>c;c++){var l=g+(1-g)/f*c;a.push([]);for(var m=0;d>=m;m++){var n=e+(1-e)/d*m;a[c].push({display:b(n,0==m?k:h,0==c?i:l),meaning:b(n,0==m?k:h,0==c?j:l)})}}return a}function b(a,b,c){var d,e,f;if(0==b)d=e=f=c;else{var g=function(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a},h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;d=g(i,h,a+1/3),e=g(i,h,a),f=g(i,h,a-1/3)}return"#"+Math.round(255*d).toString(16)+Math.round(255*e).toString(16)+Math.round(255*f).toString(16)}function c(b){q=a(),t=b.append("svg").style("position","absolute").style("top","0").style("left","0").style("width","100%").style("height","100%").attr("class",p.COLOR_PICKER).classed(p.INVISIBLE,!v);var c=parseInt(t.style("width")),d=parseInt(t.style("height")),e=c/2*(1-m.left-m.right);y=t.append("rect").attr("width",c).attr("height",d).attr("class",p.COLOR_BUTTON+" "+p.COLOR_BACKGR).on("mouseover",function(a){C(n)});var g=t.append("g").attr("transform","translate("+(e+c*m.left)+","+(e+d*m.top)+")");t.append("rect").attr("class",p.COLOR_SAMPLE).attr("width",c/2).attr("height",d*m.top/2),w=t.append("rect").attr("class",p.COLOR_SAMPLE).attr("width",c/2).attr("x",c/2).attr("height",d*m.top/2),t.append("text").attr("x",c*m.left).attr("y",d*m.top/2).attr("dy","0.5em").style("text-anchor","start").attr("class",p.COLOR_SAMPLE),x=t.append("text").attr("x",c*(1-m.right)).attr("y",d*m.top/2).attr("dy","0.5em").style("text-anchor","end").attr("class",p.COLOR_SAMPLE),t.append("text").attr("x",.1*c).attr("y",d*(1-m.bottom)).attr("dy","0.3em").style("text-anchor","start").text("default"),t.append("circle").attr("class",p.COLOR_DEFAULT+" "+p.COLOR_BUTTON).attr("r",c*m.left/2).attr("cx",c*m.left*1.5).attr("cy",d*(1-1.5*m.bottom)).on("mouseover",function(){d3.select(this).style("stroke","#444"),C(o)}).on("mouseout",function(){d3.select(this).style("stroke","none")}),g.append("circle").attr("r",l-1).attr("fill","#FFF").attr("class",p.COLOR_BUTTON).on("mouseover",function(){d3.select(this).style("stroke","#444"),C("#FFF")}).on("mouseout",function(){d3.select(this).style("stroke","none")}),g.selectAll("."+p.COLOR_CIRCLE).data(q).enter().append("g").attr("class",p.COLOR_CIRCLE).each(function(a,b){r.outerRadius(l+(e-l)/f*(f-b)).innerRadius(l+(e-l)/f*(f-b-1));var c=d3.select(this).selectAll("."+p.COLOR_SEGMENT).data(s(a)).enter().append("g").attr("class",p.COLOR_SEGMENT);c.append("path").attr("class",p.COLOR_BUTTON).attr("d",r).style("fill",function(a){return a.data.display}).style("stroke",function(a){return a.data.display}).on("mouseover",function(a){C(a.data.meaning,this)}).on("mouseout",function(a){D()})}),u=g.append("path").attr("class",p.COLOR_POINTER+" "+p.INVISIBLE),t.selectAll("."+p.COLOR_BUTTON).on("click",function(){B.show(E)}),A(t)}var d=15,e=0,f=4,g=.5,h=.7,i=.4,j=.3,k=0,l=15,m={top:.1,bottom:.1,left:.1,right:.1},n="#000",o="#000",p={INVISIBLE:"vzb-invisible",COLOR_POINTER:"vzb-colorPicker-colorPointer",COLOR_BUTTON:"vzb-colorPicker-colorCell",COLOR_DEFAULT:"vzb-colorPicker-defaultColor",COLOR_SAMPLE:"vzb-colorPicker-colorSample",COLOR_PICKER:"vzb-colorPicker-colorPicker",COLOR_CIRCLE:"vzb-colorPicker-colorCircle",COLOR_SEGMENT:"vzb-colorPicker-colorSegment",COLOR_BACKGR:"vzb-colorPicker-background"},q=[],r=d3.svg.arc(),s=d3.layout.pie().sort(null).value(function(a){return 1}),t=null,u=null,v=!1,w=null,x=null,y=null,z=function(a){console.info("Color picker callback example. Setting color to "+a)},A=function(a){a.select("."+p.COLOR_BACKGR).style("fill","white"),a.select("."+p.COLOR_POINTER).style("stroke-width",2).style("stroke","white").style("pointer-events","none").style("fill","none"),a.selectAll("."+p.COLOR_BUTTON).style("cursor","pointer"),a.selectAll("text").style("dominant-baseline","hanging").style("fill","#D9D9D9").style("font-size","0.7em").style("text-transform","uppercase"),a.selectAll("circle."+p.COLOR_BUTTON).style("stroke-width",2)},B=c,C=function(a,b){null!=b&&u.classed(p.INVISIBLE,!1).attr("d",d3.select(b).attr("d")),w.style("fill",a),x.text(a),z(a)},D=function(){u.classed(p.INVISIBLE,!0)},E="toggle";return c.show=function(a){return arguments.length?(null==t&&console.warn("Color picker is missing SVG element. Was init sequence performed?"),v=a==E?!v:a,void t.classed(p.INVISIBLE,!v)):v},c.nCellsH=function(a){return arguments.length?(d=a,c):d},c.minH=function(a){return arguments.length?(e=a,c):e},c.nCellsL=function(a){return arguments.length?(f=a,c):f},c.minL=function(a){return arguments.length?(g=a,c):g},c.outerL_display=function(a){return arguments.length?(i=a,c):i},c.outerL_meaning=function(a){return arguments.length?(j=a,c):j},c.satConstant=function(a){return arguments.length?(h=a,c):h},c.firstAngleSat=function(a){return arguments.length?(k=a,c):k},c.minRadius=function(a){return arguments.length?(l=a,c):l},c.margin=function(a){return arguments.length?(m=a,c):m},c.callback=function(a){return arguments.length?(z=a,c):z},c.colorDef=function(a){return arguments.length?(o=a,null==t&&console.warn("Color picker is missing SVG element. Was init sequence performed?"),t.select("."+p.COLOR_DEFAULT).style("fill",o),c):o},c.colorOld=function(a){return arguments.length?(n=a,null==t&&console.warn("Color picker is missing SVG element. Was init sequence performed?"),t.select("rect."+p.COLOR_SAMPLE).style("fill",n),t.select("text."+p.COLOR_SAMPLE).text(n),c):n},c}()})}.call(this),function(){"use strict";Vizabi._require("d3")&&(d3.scale.genericLog=function(){return function a(b){function c(a){var c=1,e=0,h=0,k=0,l=f[0]<f[f.length-1],m=g[0]<g[g.length-1];if(d3.min(f)<0&&d3.max(f)>0){var n=d3.min(j([f[0],f[f.length-1]]));c=l!=m?(d3.max(g)+d3.max(g)-b(Math.max(d,n)))/d3.max(g):(d3.max(g)+b(Math.max(d,n)))/d3.max(g),l&&!m?(e=(d3.max(g)+i(0))/c,j(f[0])>j(f[f.length-1])&&(k-=b(Math.max(d,n))/c)):l||m?l&&m?(k=d3.max(g)/c,j(f[0])<j(f[f.length-1])&&(k-=(d3.max(g)-b(Math.max(d,n)))/c)):!l&&m&&(e=(d3.max(g)+i(0))/c,j(f[0])<j(f[f.length-1])&&(k-=b(Math.max(d,n))/c)):(k=b(Math.max(d,n))/c,j(f[0])<j(f[f.length-1])&&(k+=(d3.max(g)-b(Math.max(d,n)))/c))}else d3.min(f)<0&&d3.max(f)<0&&(e=d3.max(g));return a>d?b(a)/c+k+h:-d>a?-b(-a)/c+k+e:a>=0&&d>=a?i(a)/c+k+h:a>=-d&&0>a?-i(-a)/c+k+e:void 0}var d=.001,e=5,f=b.domain(),g=b.range(),h=!1,i=d3.scale.linear().domain([0,d]).range([0,e]),j=function(a){return a instanceof Array?a.map(function(a){return Math.abs(a)}):Math.abs(a)},k=function(a){for(var b=Math.sign(a[0]),c=0;c<a.length;c++)if(Math.sign(a[c])!=b)return!1;return!0};return c.eps=function(a){return arguments.length?(d=a,c.domain(f),c):d},c.delta=function(a){return arguments.length?(e=a,c.range(g),c):e},c.domain=function(a){if(!arguments.length)return f;var e=[];switch(2!=a.length&&console.warn("generic log scale is best for 2 values in domain, but it tries to support other cases too"),a.length){case 0:e=f;break;case 1:e=[a[0]/2,2*a[0]];break;case 2:e=[a[0],a[1]];break;case 3:e=[a[0],a[2]],d=j(a[1]);break;default:e=[a[0],a[a.length-1]],d=d3.min(j(a.filter(function(b,c){return 0!=c&&c!=a.length-1})))}return e[0]==e[1]&&(e[0]=e[0]/2,e[1]=2*e[1]),k(e)&&d3.min(j(e))>=d?(e[0]>0&&e[1]>0?b.domain(e):b.domain([-e[1],-e[0]]),h=!1):k(e)&&d3.min(j(e))<d?(e[0]>0&&e[1]>0?e[0]<=e[1]?(b.domain([d,e[1]]),i.domain([0,d])):(b.domain([e[0],d]),i.domain([d,0])):e[0]<=e[1]?(b.domain([d,-e[0]]),i.domain([0,d])):(b.domain([-e[1],d]),i.domain([d,0])),h=!0):k(e)||(e[0]<=e[1]?(b.domain([d,d3.max(j(e))]),i.domain([0,d])):(b.domain([d3.max(j(e)),d]),i.domain([d,0])),h=!0),f=a,c},c.range=function(a){if(!arguments.length)return g;switch(2!=a.length&&console.warn("generic log scale is best for 2 values in range, but it tries to support other cases too"),a.length){case 0:a=g;break;case 1:a=[a[0]-100,a[0]+100];break;case 2:a=a;break;case 3:e=a[1],a=[a[0],a[2]];break;default:e=d3.min(a.filter(function(b,c){return 0!=c&&c!=a.length-1})),a=[a[0],a[a.length-1]]}return h?a[0]<a[1]?f[0]<f[f.length-1]?(b.range([e,a[1]]),i.range([0,e])):(b.range([0,a[1]-e]),i.range([a[1]-e,a[1]])):f[0]<f[f.length-1]?(b.range([a[0]-e,0]),i.range([a[0],a[0]-e])):(b.range([a[0],e]),i.range([e,0])):b.range(a),g=a,c},c.copy=function(){return a(d3.scale.log().domain([1,10])).domain(f).range(g).eps(d).delta(e)},d3.rebind(c,b,"invert","base","rangeRound","interpolate","clamp","nice","tickFormat","ticks")}(d3.scale.log().domain([1,10]))})}.call(this),function(){"use strict";Vizabi._require("d3")&&(d3.svg.worldMap=function(){return function(){function a(a){a.selectAll("svg").remove(),a.html(b),a.selectAll("g").each(function(){var a=d3.select(this),b=a.attr("id");a.selectAll("path").datum(function(){return{"geo.name":d3.select(this).attr("id"),"geo.region":b}})})}var b=' <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 950 620"> <g id="afr"> 	<path id="algeria" d="M473.88,227.49l-4.08-1.37l-16.98,3.19l-3.7,2.81l2.261,11.67l-6.75,0.27l-4.061,6.53l-9.67,2.32l0.03,4.75   l31.85,24.35l5.43,0.46l18.11-14.15l-1.81-2.28l-3.4-0.46l-2.04-3.42v-14.15l-1.359-1.37l0.229-3.65l-3.62-3.65l-0.45-3.88   l1.58-1.14l-0.68-4.11L473.88,227.49L473.88,227.49z"/> 	<path id="morocco" d="M448.289,232.28h-11.55l-2.26,5.02l-5.21,2.51l-4.3,11.64l-8.38,5.02l-11.771,19.39l11.55-0.23l0.45-5.7h2.94   v-7.76h10.189l0.23-10.04l9.74-2.28l4.08-6.62l6.34-0.23L448.289,232.28L448.289,232.28z"/> 	<path id="mauretania" d="M404.9,276.66l2.18,2.85l-0.449,12.32l3.17-2.28l2.26-0.46l3.17,1.14l3.62,5.02l3.4-2.28l16.529-0.23   l-4.08-27.61l4.38-0.02l-8.159-6.25l0.01,4.06l-10.33,0.01l-0.05,7.75l-2.97-0.01l-0.381,5.72L404.9,276.66L404.9,276.66z"/> 	<path id="senegal" d="M410.119,290.32l-3.939,2.86l-0.9,1.6l-0.279,1.6l1.449,1.04l4.84-0.07l3.11-0.84l0.351,1.53l-0.28,2.02   l2.97,1.46l0.62,0.7l3.94,0.14l0.14-1.74l-3.601-4.32l-4.01-5.43l-2.49-1.04L410.119,290.32L410.119,290.32z"/> 	<path id="gambia" d="M406.89,298.34l-0.13,1.11l6.92-0.1l0.35-1.03l-0.149-1.04l-1.99,0.81L406.89,298.34L406.89,298.34z"/> 	<path id="casamance" d="M406.789,300.22l1.24,3.01l0.69-1.86l8.41,0.88l-3.641-1.87L406.789,300.22L406.789,300.22z"/> 	<path id="bissau" d="M408.6,304.53l1.4,2.77l3.93-3.38l0.04-1.04l-4.63-0.67L408.6,304.53L408.6,304.53z"/> 	<path id="guinee" d="M410.42,307.94l3.04,4.68l3.96-3.44l4.06-0.18l3.38,4.49l2.87,1.89l1.08-2.1l0.96-0.54l-0.07-4.62l-1.91-5.48   l-5.859,0.65l-7.25-0.58l-0.04,1.86L410.42,307.94L410.42,307.94z"/> 	<path id="sierra_leone" d="M413.93,313.13l5.649,5.46l4.03-4.89l-2.52-3.95l-3.471,0.35L413.93,313.13L413.93,313.13z"/> 	<path id="liberia" d="M420.17,319.19l10.979,7.34l-0.26-5.561l-3.32-3.91l-3.24-2.869L420.17,319.19L420.17,319.19z"/> 	<path id="ivoire" d="M432.07,326.75l4.28-3.03l5.32-0.93l5.43,1.17l-2.771-4.19l-0.81-2.56l0.81-7.57l-4.85,0.23l-2.2-2.101   l-4.62,0.12l-2.2,0.351l0.23,5.12l-1.16,0.47l-1.39,2.56l3.58,4.19L432.07,326.75L432.07,326.75z"/> 	<path id="mali" d="M419.459,295.84l3.08-2.11l17.12-0.1l-3.96-27.54l4.521-0.13l21.87,16.69l2.939,0.42l-1.109,9.28l-13.75,1.25   l-10.61,7.92l-1.93,5.42l-7.37,0.31l-1.88-5.41l-5.65,0.4l0.22-1.77L419.459,295.84L419.459,295.84z"/> 	<path id="burkina" d="M450.59,294.28l3.64-0.29l5.97,8.44l-5.54,4.18l-4.01-1.03l-5.39,0.07l-0.87,3.16l-4.521,0.221l-1.239-1.69   l1.6-5.14L450.59,294.28L450.59,294.28z"/> 	<path id="niger" d="M460.89,302l2.55-0.06l2.3-3.45l3.86-0.69l4.109,2.51l8.771,0.25l6.78-2.76l2.55-2.19l0.189-2.88l4.73-4.77   l1.25-10.53l-3.11-6.52l-7.96-1.94l-18.42,14.36l-2.609-0.25l-1.12,9.97l-9.4,0.94L460.89,302L460.89,302z"/> 	<path id="ghana" d="M444.34,317.05l1.119,2.63l2.921,4.58l1.62-0.06l4.42-2.51l-0.311-14.29l-3.42-1l-4.79,0.13L444.34,317.05   L444.34,317.05z"/> 	<path id="togo" d="M455.22,321.25l2.68-1.57l-0.06-10.35l-1.74-2.82l-1.12,0.94L455.22,321.25L455.22,321.25z"/> 	<path id="benin" d="M458.709,319.49h2.12l0.12-6.021l2.681-3.89l-0.12-6.77l-2.431-0.06l-4.17,3.26l1.74,3.32L458.709,319.49   L458.709,319.49z"/> 	<path id="nigeria" d="M461.57,319.37l3.92,0.189l4.73,5.271l2.3,0.63l1.8-0.88l2.74-0.38l0.93-3.82l3.73-2.45l4.04-0.189   l7.399-13.61l-0.12-3.07l-3.42-2.63l-6.84,3.01l-9.149-0.13l-4.36-2.76l-3.11,0.69l-1.62,2.82l-0.119,7.959l-2.61,3.7   L461.57,319.37L461.57,319.37z"/> 	<path id="tunisia" d="M474.909,227.33l5.53-2.23l1.82,1.18l0.069,1.44l-0.85,1.11l0.13,1.97l0.851,0.46v3.54l-0.98,1.64l0.13,1.05   l3.71,1.31l-2.99,4.65l-1.17-0.07l-0.2,3.74l-1.3,0.2l-1.109-0.98l0.26-3.8l-3.64-3.54l-0.46-3.08l1.76-1.38L474.909,227.33   L474.909,227.33z"/> 	<path id="libya" d="M480.05,248.03l1.56-0.26l0.46-3.6h0.78l3.189-5.24l7.87,2.29l2.15,3.34l7.74,3.54l4.029-1.7l-0.39-1.7   l-1.76-1.7l0.2-1.18l2.859-2.42h5.66l2.15,2.88l4.55,0.66l0.59,36.89l-3.38-0.13l-20.42-10.62l-2.21,1.25l-8.391-2.1l-2.279-3.01   l-3.32-0.46l-1.69-3.01L480.05,248.03L480.05,248.03z"/> 	<path id="egypt" d="M521.93,243.06l2.67,0.07l5.2,1.44l2.47,0.07l3.06-2.56h1.431l2.6,1.44h3.29l0.59-0.04l2.08,5.98l0.59,1.93   l0.55,2.89L545.48,255l-1.69-0.85l-1.949-6.36l-1.761-0.13l-0.13,2.16l1.17,3.74l9.37,11.6l0.2,4.98l-2.73,3.15L522.32,273   L521.93,243.06L521.93,243.06z"/> 	<path id="chad" d="M492.789,296l0.131-2.95l4.739-4.61l1.271-11.32l-3.16-6.04l2.21-1.13l21.4,11.15l-0.13,10.94l-3.771,3.21v5.64   l2.47,4.78h-4.359l-7.221,7.14l-0.189,2.16l-5.33-0.069l-0.07,0.979l-3.04-0.399l-2.08-3.931l-1.56-0.77l0.2-1.2l1.96-1.5v-7.02   l-2.71-0.42l-3.271-2.43L492.789,296L492.789,296L492.789,296z"/> 	<path id="sudan" d="M520.15,292.43l0.18-11.83l2.46,0.07l-0.279-6.57l25.8,0.23l3.69-3.72l7.96,12.73l-4.36,5.14v7.85l-6.86,14.75   l-2.359,1.04l0.75,4.11h2.939l3.99,5.79l-3.2,0.409l-0.82,1.49l-0.079,2.15l-9.601-0.17l-0.979-1.49l-6.71-0.38l-12.32-12.681   l1.229-0.739l0.33-2.98l-2.949-1.74l-2.69-5.31l0.15-4.94L520.15,292.43L520.15,292.43z"/> 	<path id="cameroon" d="M477.82,324.28l3.22,2.96l-0.229,4.58l17.66-0.41l1.439-1.62l-5.06-5.45l-0.75-1.97l3.22-6.03l-2.189-4   l-1.841-0.99v-2.029l2.131-1.391l0.119-6.32l-1.689-0.19l-0.03,3.32l-7.42,13.85l-4.54,0.23l-3.109,2.14L477.82,324.28   L477.82,324.28z"/> 	<path id="eritrea" d="M556.71,294.7l-0.25-5.89l3.96-4.62l1.069,0.82l1.95,6.52l9.36,6.97l-1.7,2.09l-6.85-5.89H556.71   L556.71,294.7z"/> 	<path id="djibouti" d="M571.48,301.54l-0.57,3.36l3.96-0.06l0.061-4.94l-1.45-0.89L571.48,301.54L571.48,301.54z"/> 	<path id="ethiopia" d="M549.49,311.76l7.28-16.2l7.23,0.04l6.409,5.57l-0.45,4.59h4.971l0.51,2.76l8.04,4.811l4.96,0.25   l-9.43,10.13l-12.95,3.99h-3.21l-5.72-4.88l-2.261-0.95l-4.38-6.45l-2.89,0.04l-0.34-2.96L549.49,311.76L549.49,311.76z"/> 	<path id="somaliland" d="M575.74,305.04l4.08,2.78l1.21-0.061l10.13-3.48l1.15,3.71l-0.81,3.13l-2.19,1.74l-5.47-0.351l-7.83-4.81   L575.74,305.04L575.74,305.04z"/> 	<path id="soqotra" d="M599.619,299.65l2.131,2.38l2.88-1.74l1.04-0.35l-1.32-1.28l-2.53,0.75L599.619,299.65L599.619,299.65z"/> 	<path id="somalia" d="M591.97,304.05l4.37-1.68l1.55,0.93l-0.17,3.88l-4.03,11.48l-21.81,23.359l-2.53-1.739l-0.17-9.86l3.279-3.77   l6.961-2.15l10.21-10.78l2.67-2.38l0.75-3.479L591.97,304.05L591.97,304.05z"/> 	<path id="centrafrique" d="M495.659,324.05l4.66,5.04l1.84-2.38l2.931,0.12l0.63-2.32l2.88-1.8l5.979,4.12l3.45-3.42L531.42,324   L519,311.18l1.67-1.04l0.229-2.26l-2.82-1.33h-4.14l-6.67,6.61l-0.23,2.72l-5.29-0.17l-0.17,1.16l-3.45-0.351l-3.109,5.91   L495.659,324.05L495.659,324.05z"/> 	<path id="sao_tome" d="M470.74,337.15l1.15-0.58l0.86,0.699l-0.86,1.33l-1.04-0.409L470.74,337.15L470.74,337.15z"/> 	<path id="principe" d="M473.05,333.5l1.729-0.29l0.58,1.1l-0.859,0.931l-0.86-0.12L473.05,333.5L473.05,333.5z"/> 	<path id="bioko" d="M476.84,327.41l-0.46,1.97l1.38,0.75l1.319-0.99l-0.46-2.029L476.84,327.41L476.84,327.41z"/> 	<path id="gabon" d="M486.39,332.63l-0.12,2.49l-5.64-0.12l-3.45,6.67l8.109,8.87l2.011-1.68l-0.061-1.74l-1.38-0.64v-1.221   l3.11-1.97l2.76,2.09l3.05,0.061l-0.06-10.49l-4.83-0.23l-0.061-2.2L486.39,332.63L486.39,332.63z"/> 	<path id="equatorial_guinea" d="M480.99,332.69l-0.06,1.39l4.54,0.229l-0.061-1.569L480.99,332.69L480.99,332.69z"/> 	<path id="congo" d="M491,332.52l-0.061,1.45l4.78,0.12l0.17,12.41l-4.37-0.12l-2.53-1.97l-1.96,1.1l-0.09,0.55l1.01,0.49l0.29,2.55   l-2.7,2.32l0.58,1.22l2.99-2.319h1.44l0.46,1.39l1.899,0.81l6.101-5.159l-0.12-3.771l1.27-3.07l3.91-2.899l1.05-9.811l-2.779,0.011   l-3.221,4.41L491,332.52L491,332.52z"/> 	<path id="cabinda" d="M486.55,353.23l1.739,2.26l2.25-2.13l-0.659-2.21l-0.561-0.04L486.55,353.23L486.55,353.23z"/> 	<path id="drc" d="M489.38,355.71l10.31-0.18l2.09,2.97l-0.08,2.19l0.771,0.699h5.12l1.47-2.89h2.09l0.851,0.86l2.869-0.08   l0.851,10.08l4.96,0.159v0.78l13.33,6.01l0.62,1.171h2.79l-0.311-4.221l-5.04-2.42l0.311-3.2l2.17-5.08l4.96-0.159l-4.26-14.141   l0.079-6.01l6.74-10.54l0.08-1.48l-1.01-0.55l0.04-2.859l-1.23-0.11l-1.239-1.58l-20.351-0.92l-3.729,3.63l-6.11-4.02l-2.15,1.319   l-1.56,13.13l-3.86,2.98l-1.159,2.64l0.21,3.91l-6.96,5.69l-1.851-0.84l0.25,1.09L489.38,355.71L489.38,355.71z"/> 	<path id="rwanda" d="M537.82,339.9l2.811,2.59l-0.12,2.77l-4.36,0.09v-3.06L537.82,339.9L537.82,339.9z"/> 	<path id="burundi" d="M536.21,346.21l4.27-0.09l-1.11,3.74l-1.08,0.939h-1.319l-0.94-2.53L536.21,346.21L536.21,346.21z"/> 	<path id="uganda" d="M538.3,339.09l3.029,2.84l1.9-1.21l5.14-0.84l0.881,0.09l0.33-1.95l2.899-6.1l-2.439-5.08l-7.91,0.05   l-0.05,2.091l1.06,1.02l-0.16,2.09L538.3,339.09L538.3,339.09z"/> 	<path id="kenya" d="M550.829,326.52l2.66,5.19l-3.189,6.69l-0.42,2.029l15.93,9.851l4.94-7.761l-2.5-2.029l-0.051-10.221l3.13-3.42   l-4.989,1.66l-3.771,0.05l-5.899-4.979l-1.86-0.8l-3.45,0.319l-0.609,1.021L550.829,326.52L550.829,326.52z"/> 	<path id="tanzania" d="M550.57,371.42l17.47-2.14l-3.93-7.601l-0.21-7.279l1.271-3.48l-16.62-10.439l-5.21,0.859l-1.811,1.34   l-0.16,3.05l-1.17,4.23l-1.22,1.45l-1.75,0.16l3.35,11.609l5.471,2.57l3.77,0.11L550.57,371.42L550.57,371.42z"/> 	<path id="zambia" d="M514.55,384.7l3.17,4.399l4.91,0.301l1.739,0.96l5.141,0.06l4.43-6.21l12.38-5.54l1.08-4.88l-1.44-6.99   l-6.46-3.68l-4.31,0.3l-2.15,4.76l0.061,2.17l5.08,2.471l0.3,5.37l-4.37,0.239l-1.08-1.81l-12.14-5.18l-0.36,3.979l-5.74,0.18   L514.55,384.7L514.55,384.7z"/> 	<path id="angola" d="M488.619,356.71l3.41,12.73l-0.08,4.02l-4.989,5.36l-0.75,8.71l19.199,0.17l6.24,2.26l5.15-0.67l-3-3.76   l0.01-10.74l5.9-0.25v-4.19l-4.79-0.199l-0.96-9.921l-2.021,0.03l-1.09-0.979l-1.19,0.06l-1.579,3.061H502l-1.41-1.421l0.42-2.01   l-1.66-2.43L488.619,356.71L488.619,356.71z"/> 	<path id="malawi" d="M547.159,379.4l3.11,3.25l-0.061,4.159l0.601,1.75l4.13-4.46l-0.48-5.67l-2.21-1.689l-1.97-9.95l-3.41-0.12   l1.551,7.17L547.159,379.4L547.159,379.4z"/> 	<path id="mozambique" d="M541.17,413.28l2.689,2.229l6.34-3.859l1.021-5.73v-9.46l10.17-8.32l1.74,0.061l6.159-5.91l-0.96-12.18   L552,372.17l0.479,3.68l2.81,2.17l0.66,6.631l-5.5,5.369l-1.319-3.01l0.239-3.979l-3.17-3.44l-7.779,3.62l7.239,3.68l0.24,10.73   l-4.79,7.11L541.17,413.28L541.17,413.28z"/> 	<path id="zimbabwe" d="M524.659,392.3l8.971,10.13l6.88,1.75l4.609-7.229l-0.359-9.58l-7.48-3.86l-2.81,1.271l-4.19,6.39l-5.8-0.06   L524.659,392.3L524.659,392.3z"/> 	<path id="namibia" d="M496.55,421.96l3.35,0.24l1.97,1.99l4.67,0.06l1.141-13.26v-8.681l2.99-0.6l1.14-9.1l7.6-0.24l2.69-2.23   l-4.55-0.18l-6.16,0.84l-6.64-2.41h-18.66l0.479,5.3l6.22,9.16l-1.079,4.7l0.06,2.47L496.55,421.96L496.55,421.96z"/> 	<path id="botswana" d="M508.51,411.23l2.149,0.659l-0.3,6.15l2.21,0.3l5.08-4.58l6.101,0.66l1.619-4.1l7.721-7.051l-9.271-10.67   l-0.12-1.75l-1.02-0.3l-2.811,2.59l-7.3,0.181l-1.02,9.1l-2.87,0.66L508.51,411.23L508.51,411.23z"/> 	<path id="swaziland" d="M540.869,414l-2.51,0.42l-1.08,2.95l1.92,1.75h2.33l1.97-2.83L540.869,414L540.869,414z"/> 	<path id="lesotho" d="M527.409,425.39l3.05-2.35l1.44,0.06l1.74,2.17l-0.181,2.171l-2.93,1.079v0.841l-3.229-0.181l-0.78-2.35   L527.409,425.39L527.409,425.39z"/> 	<path id="south_africa" d="M534.159,403.63l-7.899,7.3l-1.88,4.511l-6.261-0.78l-5.21,4.63l-3.46-0.34l0.28-6.4l-1.23-0.43   l-0.859,13.09l-6.141-0.06l-1.85-2.181l-2.71-0.029l2.47,7.09l4.41,4.17l-3.149,3.67l2.039,4.6l4.721,1.801l3.76-3.2l10.77,0.06   l0.771-0.96l4.78-0.84l16.17-16.1l-0.061-5.07l-1.729,2.24h-2.59l-3.15-2.641l1.6-3.979l2.75-0.561l-0.25-8.18L534.159,403.63   L534.159,403.63z M530.369,422.13l1.511-0.06l2.449,2.66l-0.069,3.079l-2.87,1.45l-0.18,1.021l-4.381,0.05l-1.369-3.3l1.25-2.42   L530.369,422.13L530.369,422.13z"/> 	<path id="mauritius" d="M613.01,398.99l-1.521,1.99l0.3,2.149l3.2-2.61L613.01,398.99L613.01,398.99z"/> 	<path id="reunion" d="M607.38,402.37l-2.28,0.149l-0.15,1.99l1.521,0.311l2.28-1.07L607.38,402.37L607.38,402.37z"/> 	<path id="madagascar" d="M592.3,372.92l-2.13,5.061l-3.65,6.439l-6.39,0.46l-2.74,3.22l0.46,9.82l-3.96,4.6l0.46,7.82l3.35,3.83   l3.96-0.46l3.96-2.92l-0.909-4.6l9.13-15.801l-1.83-1.989l1.83-3.83l1.979,0.609l0.61-1.529l-1.83-7.82l-1.07-3.22L592.3,372.92   L592.3,372.92z"/> 	<path id="grande_comore" d="M577.69,371.23l0.46,1.529l1.98,0.311l0.76-1.99L577.69,371.23L577.69,371.23z"/> 	<path id="mayotte" d="M580.579,374.3l0.761,1.69h1.22l0.61-2.15L580.579,374.3L580.579,374.3z"/> 	<path id="aldabra" d="M602.35,358.34l-0.61,1.23l1.67,1.38l1.221-1.38L602.35,358.34L602.35,358.34z"/> 	<path id="praslin" d="M610.88,349.14l-1.83,1.23l1.37,2.149h1.83L610.88,349.14L610.88,349.14z"/> 	<path id="mahe" d="M611.64,354.51l-1.22,1.38l0.909,1.38L613,357.58l0.149-2.92L611.64,354.51L611.64,354.51z"/> 	<path id="flores_1_" d="M372.64,217.02l-1.36,1.37l2.44,1.37l0.27-1.91L372.64,217.02L372.64,217.02z"/> 	<path id="terceira" d="M379.97,216.2l-1.63,1.09l1.359,1.09l2.171-0.55L379.97,216.2L379.97,216.2z"/> 	<path id="pico" d="M381.05,220.03l-0.811,2.19l1.08,1.37l1.36-1.09L381.05,220.03L381.05,220.03z"/> 	<path id="sao_miguel" d="M387.56,224.4l-0.54,1.37l0.811,0.82l2.17-1.37L387.56,224.4L387.56,224.4z"/> 	<path id="madeira" d="M408.18,236.42l-1.08,1.37l1.08,1.37l1.63-0.82L408.18,236.42L408.18,236.42z"/> 	<path id="lanzarote" d="M415.619,253.73l-1.75,1.01l0.811,0.82L415.619,253.73L415.619,253.73z"/> 	<path id="gran_canaria" d="M409.539,253.92l-2.17,0.55l1.08,1.64h1.63L409.539,253.92L409.539,253.92z"/> 	<path id="tenerife" d="M404.38,252.28l-1.36,1.37l1.9,1.64l1.08-2.46L404.38,252.28L404.38,252.28z"/> 	<path id="santo_antao" d="M387.56,290.54l-1.899,1.09l1.359,1.09l1.63-0.82L387.56,290.54L387.56,290.54z"/> 	<path id="boa_vista" d="M392.23,292.74l-1.24,1.1l0.881,1.63l2.119-0.95L392.23,292.74L392.23,292.74z"/> 	<path id="santiago" d="M389.52,295.83l-1.59,0.95l1.71,2.29l1.35-0.71L389.52,295.83L389.52,295.83z"/> </g> <g id="ame"> 	<path id="mexico" d="M137.49,225.43l4.83,15.21l-2.25,1.26l0.25,3.02l4.25,3.27v6.05l5.25,5.04l-2.25-14.86l-3-9.83l0.75-6.8   l2.5,0.25l1,2.27l-1,5.79l13,25.44v9.07l10.5,12.34l11.5,5.29l4.75-2.77l6.75,5.54l4-4.03l-1.75-4.54l5.75-1.76l1.75,1.01   l1.75-1.76h2.75l5-8.82l-2.5-2.27l-9.75,2.27l-2.25,6.55l-5.75,1.01l-6.75-2.77l-3-9.57l2.271-12.07l-4.64-2.89l-2.211-11.59   l-1.85-0.79l-3.38,3.43l-3.88-2.07l-1.521-7.73l-15.37-1.61l-7.939-5.97L137.49,225.43L137.49,225.43z"/> 	<path id="disko" d="M342.89,92.49l1.63,2.45l-0.819,2.99h-1.631l-2.18-2.45l0.54-1.9L342.89,92.49L342.89,92.49z"/> 	<path id="st._lawrence_island_west" d="M69.17,53.35l3.46,6.47l2.22-0.5v-2.24L69.17,53.35L69.17,53.35z"/> 	<path id="unalaska_west" d="M49.66,110.26l-0.17,3.01l2.159-0.5v-1.34L49.66,110.26L49.66,110.26z"/> 	<path id="umnak_west" d="M46.34,111.6l-4.32,2.18l0.67,2.34l1.66-1.34l3.32-1.51L46.34,111.6L46.34,111.6z"/> 	<path id="another_aleutian_west" d="M28.39,114.44l-2.99-0.67l-0.5,1.34l0.33,2.51L28.39,114.44L28.39,114.44z"/> 	<path id="adak_west" d="M22.07,114.28l-2.829-1.17l-1,1.84l1.829,1.84L22.07,114.28L22.07,114.28z"/> 	<path id="amchitka_west" d="M12.27,111.6l-1.33-1.84l-1.33,0.5v2.51l1.5,1L12.27,111.6L12.27,111.6z"/> 	<path id="path13641" d="M10,248.7l-0.141,2.33l2.04,1.37l1.221-1.09L10,248.7L10,248.7z"/> 	<path id="path13643" d="M15.29,252.13l-1.9,1.37l1.63,2.05l1.9-1.64L15.29,252.13L15.29,252.13z"/> 	<path id="path13645" d="M19.1,255.41l-1.63,2.19l0.54,1.37l2.31-1.09L19.1,255.41L19.1,255.41z"/> 	<path id="hawaii" d="M21.81,259.65l-0.95,5.47l0.95,2.05l3.12-0.96l1.63-2.74l-3.399-3.15L21.81,259.65L21.81,259.65z"/> 	<path id="raiatea" d="M27.25,402.68l-1.9-0.14l-0.14,1.78l1.49,0.96l1.77-1.09L27.25,402.68L27.25,402.68z"/> 	<path id="tahiti" d="M33.77,404.6l-2.72,1.78l2.04,2.46l1.77-0.41l0.95-1.229L33.77,404.6L33.77,404.6z"/> 	<path id="guadeloupe" d="M276.6,283.37l-1.5,0.62l0.53,1.33l1.76-1.15l-0.35-0.36L276.6,283.37L276.6,283.37z"/> 	<path id="dominica" d="M279.07,284.88l-0.88,1.87l1.061,1.42l1.319-1.15L279.07,284.88L279.07,284.88z"/> 	<path id="martinique" d="M282.07,290.03l-1.06,0.98l0.79,1.6l1.5-0.44L282.07,290.03L282.07,290.03z"/> 	<path id="st._lucia" d="M281.98,294.03l-0.71,1.51l1.15,1.24l1.5-0.8L281.98,294.03L281.98,294.03z"/> 	<path id="st._vincent" d="M282.07,297.85l-1.229,0.89l0.97,1.78l1.59-0.89L282.07,297.85L282.07,297.85z"/> 	<path id="grenada" d="M280.57,301.31l-1.149,1.15l0.439,0.71h1.41l0.44-1.16L280.57,301.31L280.57,301.31z"/> 	<path id="trinidad" d="M282.24,304.78l-1.06,0.98l-1.15,0.18v1.42l2.12,1.949l0.88-1.42l0.53-1.6l-0.18-1.33L282.24,304.78   L282.24,304.78z"/> 	<path id="puerto_rico" d="M271.05,281.06l-2.64-0.89l-2.12,1.33l1.06,1.24l3.61,0.53L271.05,281.06L271.05,281.06z"/> 	<path id="haiti-dominican_border" d="M250.87,275.38l-1.67,1.71l1.909,0.78l0.28,2.39l-4.229,0.37l0.43,2.3l1.229,0.09l0.71-1.06   l4.94,0.16l0.89,1.71l1.141-1.34l3.33-0.9l2.93,0.62l0.34-1.77l-5.28-3.45l-3.42-1.28L250.87,275.38L250.87,275.38z"/> 	<path id="domincan_republic" d="M263.11,280.44l-5.29-3.46l-2.5-0.85l-0.84,6l0.88,1.69l1.15-1.33l3.35-0.89l2.91,0.62   L263.11,280.44L263.11,280.44z"/> 	<path id="haiti" d="M250.86,275.38l3.44,0.36l-0.41,4.22l-0.34,2.22l-4.01-0.22l-0.71,1.07l-1.23-0.09l-0.439-2.31l4.229-0.35   l-0.26-2.4l-1.94-0.8L250.86,275.38L250.86,275.38z"/> 	<path id="falklands_west" d="M307.95,508.18l-2.631-0.29l-2.619,1.761l1.899,2.06L307.95,508.18L307.95,508.18z"/> 	<path id="falklands_east" d="M310.57,506.86l-0.869,2.79l-2.48,2.199l0.15,0.73l4.229-1.62l1.75-2.2L310.57,506.86L310.57,506.86z"/> 	<path id="cuba" d="M220.85,266.92v1.27l5.32,0.1l2.51-1.46l0.39,1.07l5.221,1.27l4.64,4.19l-1.06,1.46l0.189,1.66l3.87,0.97   l3.87-1.75l1.74-1.75l-2.511-1.27l-12.949-7.6l-4.54-0.49L220.85,266.92L220.85,266.92z"/> 	<path id="bimini" d="M239.61,259.13l-1.26-0.39l-0.1,2.43l1.55,1.56l1.06-1.56L239.61,259.13L239.61,259.13z"/> 	<path id="andros" d="M242.12,262.93l-1.74,0.97l1.64,2.34l0.87-1.17L242.12,262.93L242.12,262.93z"/> 	<path id="inagua" d="M247.73,264.68l-1.84-0.1l0.19,1.17l1.35,1.95l1.16-1.27L247.73,264.68L247.73,264.68z"/> 	<path id="eleuthera" d="M246.86,262.35l-3-1.27l-0.58-3.02l1.16-0.49l1.16,2.34l1.16,0.88L246.86,262.35L246.86,262.35z"/> 	<path id="grand_bahama" d="M243.96,256.21l-1.55-0.39l-0.29-1.95l-1.641-0.58l1.061-1.07l1.93,0.68l1.45,0.88L243.96,256.21   L243.96,256.21z"/> 	<path id="jamaica" d="M238.93,279.59l-3.479,0.88v0.97l2.029,1.17h2.13l1.351-1.56L238.93,279.59L238.93,279.59z"/> 	<path id="alaska_1_" d="M93.11,44.89l-8.39,1.99l1.73,9.45l9.13,2.49l0.489,1.99L82.5,65.04l-7.65,12.68l2.71,13.43L82,94.13   l3.46-3.23l0.99,1.99l-4.2,4.97l-16.29,7.46l-10.37,2.49l-0.25,3.73l23.939-6.96l9.87-2.74l9.13-11.19l10.12-6.71l-5.18,8.7   l5.68,0.75l9.63-4.23l1.73,6.96l6.66,1.49l6.91,6.71l0.489,4.97l-0.989,1.24l1.229,4.72h1.73l0.25-7.96h1.97l0.49,19.64l4.939-4.23   l-3.46-20.39h-5.18l-5.68-7.21l27.89-47.25l-27.64-21.63L99.02,32.19l-1.229,9.45l6.66,3.98l-2.471,6.47L93.11,44.89L93.11,44.89z"/> 	<path id="galapagos" d="M194.97,338.18l-0.62,2.75l-1.149,1.16l0.789,1.42l2.03-0.8l0.97-1.69l-0.619-1.779L194.97,338.18   L194.97,338.18z"/> 	<path id="banks" d="M203.73,35.89l0.221,4.02l-7.98,8.27l2,6.7l5.76-1.56l3.33-4.92l8.42-3.13l6.87-0.45l-5.32-5.81l-2.659,2.01   l-2-0.67l-1.11-2.46l-2.44-2.46L203.73,35.89L203.73,35.89z"/> 	<path id="prince_patrick" d="M214.15,24.05l-1.77,3.13l8.649,3.13l3.101-4.69l1.33,3.13h2.22l4.21-4.69l-5.1-1.34l-2-1.56   l-2.66,2.68L214.15,24.05L214.15,24.05z"/> 	<path id="eglinton" d="M229.23,30.31l-6.87,2.9v2.23l8.87,3.35l-2,2.23l1.33,2.9l5.54-2.46h4.66l2.22,3.57l3.771-3.8l-0.891-3.58   l-3.1,1.12l-0.44-4.47l1.551-2.68h-1.551l-2.439,1.56l-1.11,0.89l0.67,3.13l-1.77,1.34l-2.66-0.22l-0.67-4.02L229.23,30.31   L229.23,30.31z"/> 	<path id="mackenzie_king" d="M238.32,23.38l-0.67,2.23l4.21,2.01l3.101-1.79l-0.22-1.34L238.32,23.38L238.32,23.38z"/> 	<path id="king_christian" d="M241.64,19.58l-3.1,1.12l0.22,1.56l6.87-0.45l-0.22-1.56L241.64,19.58L241.64,19.58z"/> 	<path id="ellef_ringnes" d="M256.5,23.38l-0.44,1.56l-1.109,1.56v2.23l4.21-0.67l4.43,3.8h1.55v-3.8l-4.43-4.92L256.5,23.38   L256.5,23.38z"/> 	<path id="amund_ringnes" d="M267.81,27.85l1.771,2.01l-1.551,2.68l1.11,2.9l4.88-2.68v-2.01l-2.88-3.35L267.81,27.85L267.81,27.85z   "/> 	<path id="axel_heiberg" d="M274.24,22.71l0.221,3.57h5.99l1.55,1.34l-0.221,1.56l-5.319,0.67l3.77,5.14l5.101,0.89l7.09-3.13   l-10.2-15.42l-3.1,2.01l0.22,2.68l-3.55-1.34L274.24,22.71L274.24,22.71z"/> 	<path id="victoria" d="M222.58,47.96l-8.42,2.23l-4.881,4.25l0.44,4.69l8.87,2.68l-2,4.47l-6.43-4.021l-1.771,3.35l4.21,2.9   l-0.22,4.69l6.43,1.79l7.76-0.45l1.33-2.46l5.761,6.48l3.989-1.34l0.67-4.47l2.881,2.01l0.439-4.47l-3.55-2.23l0.22-14.07   l-3.1-2.46L231.89,56L222.58,47.96L222.58,47.96z"/> 	<path id="prince_of_wales" d="M249.63,57.79l-2.88-1.34l-1.55,2.01l3.1,4.92l0.22,4.69l6.65-4.02v-5.81l2.439-2.46l-2.439-1.79   h-3.99L249.63,57.79L249.63,57.79z"/> 	<path id="prescott" d="M263.82,55.78l-4.659,3.8l1.109,4.69h2.88l1.33-2.46l2,2.01l2-0.22l5.32-4.47L263.82,55.78L263.82,55.78z"/> 	<path id="cornwallis" d="M263.37,48.4l-1.11,2.23l4.88,1.79l1.33-2.01L263.37,48.4L263.37,48.4z"/> 	<path id="bathurst" d="M260.49,39.91l-4.88,0.67l-2.88,2.68l5.32,0.22l-1.55,4.02l1.109,1.79l1.551-0.22l3.77-6.03L260.49,39.91   L260.49,39.91z"/> 	<path id="devon" d="M268.92,38.35l-2.66,0.89l0.44,3.57l4.43,2.9l0.22,2.23l-1.33,1.34l0.67,4.47l17.07,5.58l4.66,1.56l4.66-4.02   l-5.54-4.47l-5.101,1.34l-7.09-0.67l-2.66-2.68l-0.67-7.37l-4.43-2.23L268.92,38.35L268.92,38.35z"/> 	<path id="baffin" d="M282.88,61.59L278,61.14l-5.761,2.23l-3.1,4.24l0.89,11.62l9.53,0.45l9.09,4.47l6.431,7.37l4.88-0.22   l-1.33,6.92l-4.43,7.37l-4.881,2.23l-3.55-0.67l-1.77-1.56l-2.66,3.57l1.11,3.57l3.77,0.22l4.66-2.23l3.99,10.28l9.979,6.48   l6.87-8.71l-5.76-9.38l3.33-3.8l4.659,7.82l8.421-7.37l-1.551-3.35l-5.76,1.79l-3.99-10.95l3.771-6.25l-7.54-8.04l-4.21,2.9   l-3.99-8.71l-8.42,1.12l-2.22-10.5l-6.87,4.69l-0.67,5.81h-3.771l0.44-5.14L282.88,61.59L282.88,61.59z"/> 	<path id="bylot" d="M292.86,65.61l-1.77,1.79l1.55,2.46l7.32,0.89l-4.66-4.92L292.86,65.61L292.86,65.61z"/> 	<path id="ellesmere" d="M285.77,40.36v2.01l-4.88,1.12l1.33,2.229l5.54,2.23l6.21,0.67l4.43,3.13l4.431-2.46l-3.101-3.13h3.99   l2.44-2.68l5.989-0.89v-1.34l-3.33-2.23l0.44-2.46l9.31,1.56l13.75-5.36l-5.1-1.56l1.33-1.79h10.64l1.771-1.79l-21.511-7.6   l-5.1-1.79l-5.54,4.02l-6.21-5.14l-3.33-0.22l-0.67,4.25l-4.21-3.8l-4.88,1.56l0.89,2.46l7.32,1.56l-0.44,3.57l3.99,2.46l9.76-2.46   l0.221,3.35l-7.98,3.8l-4.88-3.8l-4.43,0.45l4.43,6.26l-2.22,1.12l-3.33-2.9l-2.44,1.56l2.221,4.24h3.77l-0.89,4.02l-3.101-0.45   l-3.99-4.25L285.77,40.36L285.77,40.36z"/> 	<path id="southhampton" d="M266.01,101.85l-4.23,5.32l-0.26,5.86l3.7-2.13h4.49l3.17,2.93l2.91-2.4L266.01,101.85L266.01,101.85z"/> 	<path id="newfoundland" d="M317.52,171.05l-10.569,10.12l1.06,2.4l12.939,4.79l1.851-3.19l-1.061-5.32l-4.229,0.53l-2.38-2.66   l3.96-3.99L317.52,171.05L317.52,171.05z"/> 	<path id="canada" d="M158.22,48.66l1.99,3.01l1,4.02l4.979,1.25l3.49-3.76l2.99,1.51l8.47,0.75l5.98-2.51l1,8.28h3.489V57.7   l3.49,0.25l8.72,10.29l5.73,3.51l-2.99,4.77l1.25,1.25L219,80.03l0.25,5.02l2.989,0.5l0.75-7.53l4.73-1.25l3.49,5.27l7.47,3.51   l3.74,0.75l2.49-3.01l0.25-4.77l4.479-2.76l1.49,4.02l-3.99,7.03l0.5,3.51l2.24-3.51l4.479-4.02l0.25-5.27l-2.489-4.02l0.75-3.26   l5.979-3.01l2.74,2.01l0.5,17.57l4.229-3.76l2.49,1.51l-3.49,6.02l4.48,1l6.479-10.04l5.48,5.77l-2.24,10.29l-5.479,3.01   l-5.23-2.51l-9.46,2.01l1,3.26l-2.49,4.02l-7.72,1.76l-8.72,6.78l-7.72,10.29l-1,3.26l5.229,2.01l1.99,5.02l7.22,7.28l11.46,5.02   l-2.49,11.54l-0.25,3.26l2.99,2.01l3.99-5.27l0.5-10.04l6.229-0.25l2.99-5.77l0.5-8.78l7.97-15.56l9.961,3.51l5.229,7.28   l-2.24,7.28l3.99,2.26l9.71-6.53l2.74,17.82l8.97,10.79l0.25,5.52l-9.96,2.51l-4.729,5.02l-9.96-2.26l-4.98-0.25l-8.72,6.78   l5.229-1.25l6.48-1.25l1.25,1.51l-1.74,5.52l0.25,5.02l2.99,2.01l2.99-0.75l1.5-2.26h1.989l-3.239,6.02l-6.23,0.25l-2.74,4.02   h-3.49l-1-3.01l4.98-5.02l-5.98,2.01l-0.27-8.53l-1.72-1l-5.23,2.26l-0.5,4.27h-11.96l-10.21,7.03l-13.7,4.52l-1.489-2.01   l6.899-10.3l-3.92-3.771l-2.49-4.78l-5.069-3.87l-5.44-0.45l-9.75-6.83l-70.71-11.62l-1.17-4.79l-6.48-6.02v-5.02l1-4.52l-0.5-2.51   l-2.489-2.51l-0.5-4.02l6.479-4.521l-3.99-21.58l-5.479-0.25l-4.98-6.53L158.22,48.66L158.22,48.66z"/> 	<path id="usa" d="M148.76,158.34l-1,4.02l-3.49-2.26h-1.74l-1,4.27l-12.21,27.36l3.24,23.84l3.99,2.01l0.75,6.53h8.22l7.97,6.02   l15.69,1.51l1.74,8.03l2.49,1.76l3.489-3.51l2.74,1.25l2.49,11.54l4.229,2.76l3.49-6.53l10.71-7.78l6.97,3.26l5.98,0.5l0.25-3.76   l12.45,0.25l2.49,2.76l0.5,6.27l-1.49,3.51l1.74,6.02h3.739l3.74-5.77l-1.49-2.76l-1.489-6.02l2.239-6.78l10.21-8.78l7.721-2.26   l-1-7.28l10.71-11.55l10.71-1.76L272.8,199l10.46-6.02v-8.03l-1-0.5l-3.74,1.25l-0.5,4.92l-12.43,0.15l-9.74,6.47l-15.29,5   l-2.439-2.99l6.939-10.5l-3.43-3.27l-2.33-4.44l-4.83-3.88l-5.25-0.44l-9.92-6.77L148.76,158.34L148.76,158.34z"/> 	<path id="haida_gwaii" d="M133.83,128.41l-1.7,3.26l0.59,2.31l1.11,0.69l-0.261,0.94l-1.189,0.34l0.34,3.43l1.28,1.29l1.02-1.11   l-1.28-3.34l0.761-2.66l1.87-2.49l-1.36-2.31L133.83,128.41L133.83,128.41z"/> 	<path id="vancouver" d="M139.45,147.95l-1.53,0.6l2.81,3.26l0.681,3.86l2.81,3l2.38-0.43v-3.94l-2.89-1.8L139.45,147.95   L139.45,147.95z"/> 	<path id="guatemala" d="M194.88,291.52l5.93,4.34l5.98-7.43l-1.021-1.54l-2.04-0.07v-4.35l-1.529-0.93l-4.631,1.38l1.771,4.08   L194.88,291.52L194.88,291.52z"/> 	<path id="honduras" d="M207.55,288.78l9.24-0.35l2.739,3.26l-1.71-0.39l-3.29,0.14l-4.3,4.04l-1.84,4.09l-1.21-0.64l-0.01-4.48   l-2.66-1.78L207.55,288.78L207.55,288.78z"/> 	<path id="el_salvador" d="M201.65,296.27l4.7,2.34l-0.07-3.71l-2.409-1.47L201.65,296.27L201.65,296.27z"/> 	<path id="nicaragua" d="M217.74,292.11l2.19,0.44l0.07,4.49l-2.55,7.28l-6.87-0.68l-1.53-3.51l2.04-4.26l3.87-3.6L217.74,292.11   L217.74,292.11z"/> 	<path id="costa_rica" d="M217.38,304.98l1.39,2.72l1.13,1.5l-1.52,4.51l-2.9-2.04l-4.74-4.34v-2.87L217.38,304.98L217.38,304.98z"/> 	<path id="panama" d="M220.59,309.61l-1.46,4.56l4.82,1.25l2.989,0.59l0.511-3.529l3.21-1.62l2.85,1.47l1.12,1.79l1.359-0.16   l1.07-3.25l-3.56-1.47l-2.7-1.471l-2.7,1.841l-3.21,1.62l-3.28-1.32L220.59,309.61L220.59,309.61z"/> 	<path id="colombia" d="M253.73,299.78l-2.06-0.21l-13.62,11.23l-1.44,3.95l-1.859,0.21l0.83,8.73l-4.75,11.649l5.159,4.37   l6.61,0.42l4.54,6.66l6.6,0.21l-0.21,4.99H256l2.68-9.15l-2.479-3.12l0.619-5.819l5.16-0.42l-0.62-13.521l-11.56-3.74l-2.68-7.279   L253.73,299.78L253.73,299.78z"/> 	<path id="venezuela" d="M250.46,305.92l0.439,2.59l3.25,1.03l0.74-4.77l3.43-3.55l3.431,4.02l7.89,2.149l6.68-1.399l4.551,5.609   l3.43,2.15l-3.76,5.73l1.26,4.34l-2.15,2.66l-2.229,1.869l-4.83-2.43l-1.11,1.12v3.46l3.53,1.68l-2.6,2.811l-2.601,2.81l-3.43-0.28   l-3.45-3.789L262.2,319.47l-11.78-4.02l-2.141-6.271L250.46,305.92L250.46,305.92z"/> 	<path id="guyana" d="M285.05,314.13l7.22,6.54l-2.87,3.32l-0.229,1.97l3.77,3.89l-0.09,3.74l-6.56,2.5l-3.931-5.31l0.841-6.38   l-1.681-4.75L285.05,314.13L285.05,314.13z"/> 	<path id="suriname" d="M293.13,321.14l2.04,1.87l3.16-1.96l2.88,0.09l-0.37,1.12l-1.21,2.521l-0.19,6.27l-5.75,2.34l0.28-4.02   l-3.71-3.46l0.19-1.78L293.13,321.14L293.13,321.14z"/> 	<path id="guyane" d="M302.13,321.8l5.85,3.65l-3.06,6.08l-1.11,1.399l-3.25-1.87l0.09-6.55L302.13,321.8L302.13,321.8z"/> 	<path id="ecuador" d="M230.2,335.85l-4.73,2.94l-0.34,4.36l-0.95,1.43l2.98,2.86l-1.29,1.409l0.3,3.601l5.33,1.27l8.069-9.55   l-0.02-3.33l-3.87-0.25L230.2,335.85L230.2,335.85z"/> 	<path id="peru" d="M225.03,349.52l-1.939,1.961l0.13,3.13l16.94,30.88l17.59,11.34l2.72-4.561l0.65-10.029l-1.42-6.25l-4.79-8.08   l-2.851,0.91l-1.29,1.43l-5.689-6.52l1.42-7.69l6.6-4.3l-0.52-4.04l-6.721-0.26l-3.489-5.86l-1.94-0.65l0.13,3.521l-8.66,10.29   l-6.47-1.561L225.03,349.52L225.03,349.52z"/> 	<path id="bolivia" d="M258.71,372.79l8.229-3.59l2.721,0.26l1.81,7.56l12.54,4.171l2.07,6.39l5.17,0.65l2.2,5.47l-1.551,4.95   l-8.409,0.649l-3.101,7.95l-6.6-0.13l-2.07-0.39l-3.81,3.699l-1.881-0.18l-6.47-14.99l1.79-2.68l0.63-10.6l-1.6-6.311   L258.71,372.79L258.71,372.79z"/> 	<path id="paraguay" d="M291.76,399.51l2.2,2.4l-0.26,5.08l6.34-0.391l4.79,6.131l-0.391,5.47l-3.1,4.689L295,423.15l-0.261-2.61   l1.811-4.3l-6.21-3.91h-5.17l-3.88-4.17l2.819-8.061L291.76,399.51L291.76,399.51z"/> 	<path id="uruguay" d="M300.36,431.93l-2.05,2.19l0.851,11.78l6.439,1.869l8.19-8.21L300.36,431.93L300.36,431.93z"/> 	<path id="argentina" d="M305.47,418.2l1.94,1.819l-7.37,10.95l-2.59,2.87l0.899,12.51l5.69,6.91l-4.78,8.34l-3.62,1.561h-4.14   l1.16,6.51l-6.471,2.22l1.55,5.471l-3.88,12.38l4.79,3.91l-2.59,6.38l-4.399,6.91l2.329,4.819l-5.689,0.91l-4.66-5.729   l-0.78-17.851l-7.239-30.32l2.189-10.6l-4.66-13.55l3.101-17.59l2.85-3.391l-0.7-2.569l3.66-3.34l8.16,0.56l4.56,4.87l5.271,0.09   l5.4,3.3l-1.591,3.72l0.38,3.761l7.65-0.36L305.47,418.2L305.47,418.2z"/> 	<path id="tierra_del_fuego_chile" d="M285.04,514.1l-4.271,9.381l7.37,0.779l0.13-6.25L285.04,514.1L285.04,514.1z"/> 	<path id="tierra_del_fuego_argentina" d="M288.92,518.79l0.26,5.729l4.4-0.39l3.75-2.479l-6.34-1.301L288.92,518.79L288.92,518.79z   "/> 	<path id="chile" d="M283.59,512.63l-3.21,3.55l-0.391,4.17l-6.21-3.52l-6.6-9.51l-1.94-3.391l2.721-3.52l-0.26-4.431l-3.101-1.3   l-2.46-1.819l0.521-2.48l3.229-0.91l0.65-14.33l-5.04-2.87l-3.29-74.59l0.85-1.479l6.44,14.85l2.06,0.04l0.67,2.37l-2.74,3.32   l-3.149,17.87l4.479,13.76l-2.069,10.42l7.3,30.64l0.77,17.92l5.23,6.051L283.59,512.63L283.59,512.63z"/> 	<path id="chiloe" d="M262.28,475.14l-1.29,1.95l0.65,3.391l1.29,0.13l0.65-4.3L262.28,475.14L262.28,475.14z"/> 	<path id="brazil" d="M314.24,438.85l6.25-12.02l0.23-10.1l11.66-7.521h6.53l5.13-8.69l0.93-16.68l-2.1-4.46l12.359-11.28   l0.47-12.449l-16.789-8.221l-20.28-6.34l-9.561-0.939l2.57-5.4l-0.7-8.22l-2.09-0.69l-3.09,6.141l-1.62,2.029l-4.16-1.84   l-13.99,4.93l-4.659-5.869l0.75-6.131l-4.4,4.48l-4.86-2.62l-0.489,0.69l0.01,2.13l4.189,2.25l-6.289,6.63l-3.971-0.04l-4.02-4.09   l-4.55,0.14l-0.561,4.86l2.61,3.17l-3.08,9.87l-3.601,0.279l-5.729,3.62l-1.4,7.11l4.971,5.32l0.909-1.03l3.49-0.94l2.98,5.021   l8.529-3.66l3.311,0.19l2.28,8.069l12.17,3.86l2.1,6.439l5.18,0.62l2.471,6.15l-1.67,5.47l2.18,2.86l-0.32,4.26l5.84-0.55   l5.351,6.76l-0.42,4.75l3.17,2.68l-7.601,11.511L314.24,438.85L314.24,438.85z"/> 	<path id="belize" d="M204.56,282.4l-0.05,3.65h0.84l2.86-5.34h-1.94L204.56,282.4L204.56,282.4z"/> </g> <g id="asi"> 	<path id="kalimantan" d="M781.68,324.4l-2.311,8.68l-12.529,4.229l-3.75-4.399l-1.82,0.5l3.4,13.12l5.09,0.569l6.79,2.57v2.57   l3.109-0.57l4.53-6.27v-5.131l2.55-5.13l2.83,0.57l-3.399-7.13l-0.521-4.59L781.68,324.4L781.68,324.4z"/> 	<path id="papua_new_guinea" d="M852.76,348.29l-0.37,24.44l3.52-0.19l4.63-5.41l3.891,0.19l2.5,2.239l0.83,6.9l7.96,4.2l2.04-0.75   v-2.521l-6.391-5.319l-3.149-7.28l2.5-1.21l-1.851-4.01l-3.699-0.09l-0.931-4.29l-9.81-6.62L852.76,348.29L852.76,348.29z"/> 	<path id="australia" d="M761.17,427.98l-0.351,25.38l-3.899,2.859l-0.351,2.5l5.32,3.57l13.13-2.5h6.74l2.479-3.58l14.9-2.86   l10.64,3.221l-0.71,4.29l1.42,4.29l8.16-1.431l0.35,2.141l-5.319,3.93l1.77,1.43l3.9-1.43l-1.061,11.8l7.45,5.721L830,485.88   l2.13,2.141l12.42-1.79l11.71-18.95l4.26-1.07l8.51-15.729l2.13-13.58l-5.319-6.79l2.13-1.431l-4.261-13.229l-4.609-3.22   l0.71-17.87l-4.26-3.221l-1.061-10.01h-2.13l-7.1,23.59l-3.9,0.36l-8.87-8.94l4.97-13.229l-9.22-1.79l-10.29,2.86l-2.84,8.22   l-4.609,1.069l-0.351-5.72l-18.8,11.44l0.35,4.29l-2.84,3.93h-7.1l-15.26,6.43L761.17,427.98L761.17,427.98z"/> 	<path id="tasmania" d="M825.74,496.26l-1.77,7.15l0.35,5l5.32-0.36l6.03-9.29L825.74,496.26L825.74,496.26z"/> 	<path id="new_zealand_north_island" d="M913.02,481.96l1.061,11.8l-1.421,5.36l-5.319,3.93l0.35,4.65v5l1.42,1.79l14.55-12.511   v-2.859h-3.55l-4.97-16.8L913.02,481.96L913.02,481.96z"/> 	<path id="new_zealand_south_island" d="M902.38,507.7l2.84,5.359l-7.811,7.511l-0.71,3.93l-5.319,0.71l-8.87,8.22l-8.16-3.93   l-0.71-2.86l14.899-6.43L902.38,507.7L902.38,507.7z"/> 	<path id="new_caledonia" d="M906.64,420.47l-0.351,1.79l4.61,6.431l2.48,1.069l0.35-2.5L906.64,420.47L906.64,420.47z"/> 	<path id="sumatra" d="M722.48,317.57l-0.28,2.279l6.79,11.41h1.98l14.149,23.67l5.66,0.57l2.83-8.27l-4.53-2.851l-0.85-4.56   L722.48,317.57L722.48,317.57z"/> 	<path id="east_malaysia" d="M764.14,332.92l3.02,3.49l11.58-4.01l2.29-8.841l5.16-0.369l4.72-3.421l-6.12-4.46l-1.399-2.449   l-3.021,5.569l1.11,3.2l-1.84,2.67l-3.47-0.89l-8.41,6.17l0.22,3.57L764.14,332.92L764.14,332.92z"/> 	<path id="brunei" d="M779.77,319.25l-2.88,3.49l2.36,0.74l1.329-1.86L779.77,319.25L779.77,319.25z"/> 	<path id="sulawesi" d="M789.53,349.11l2.26,2.77l-1.47,4.16v0.79h3.34l1.181-10.4l1.08,0.301l1.96,9.5l1.87,0.5l1.77-4.061   l-1.77-6.14l-1.471-2.67l4.62-3.37l-1.08-1.49l-4.42,2.87h-1.18l-2.16-3.17l0.69-1.391l3.64-1.779l5.5,1.68l1.67-0.1l4.13-3.86   l-1.67-1.68l-3.83,2.97h-2.46L798,332.76l-2.65,0.101l-2.95,4.75l-1.87,8.22L789.53,349.11L789.53,349.11z"/> 	<path id="maluku" d="M814.19,330.5l-1.87,4.55l2.95,3.86h0.98l1.279-2.57l0.69-0.89l-1.28-1.391l-1.87-0.689L814.19,330.5   L814.19,330.5z"/> 	<path id="seram" d="M819.99,345.45l-4.03,0.89l-1.18,1.29l0.98,1.68l2.649-0.989l1.67-0.99l2.46,1.98l1.08-0.891l-1.96-2.38   L819.99,345.45L819.99,345.45z"/> 	<path id="java" d="M753.17,358.32l-2.75,1.88l0.59,1.58l8.75,1.979l4.42,0.79l1.87,1.98l5.01,0.399l2.36,1.98l2.159-0.5l1.971-1.78   l-3.641-1.68l-3.14-2.67l-8.16-1.98L753.17,358.32L753.17,358.32z"/> 	<path id="bali" d="M781.77,366.93l-2.16,1.19l1.28,1.39l3.14-1.189L781.77,366.93L781.77,366.93z"/> 	<path id="lombok" d="M785.5,366.04l0.39,1.88l2.26,0.59l0.88-1.09l-0.979-1.49L785.5,366.04L785.5,366.04z"/> 	<path id="sumba" d="M790.909,370.99l-2.75,0.399l2.46,2.08h1.96L790.909,370.99L790.909,370.99z"/> 	<path id="flores" d="M791.69,367.72l-0.59,1.19l4.42,0.689l3.439-1.979l-1.96-0.59l-3.14,0.89l-1.18-0.99L791.69,367.72   L791.69,367.72z"/> 	<path id="timor" d="M806.14,368.42l-5.11,4.26l0.49,1.09l2.16-0.399l2.55-2.38l5.01-0.69l-0.979-1.68L806.14,368.42L806.14,368.42z   "/> 	<path id="new_ireland" d="M880.48,349l-0.88,1.25l4.81,4.26l0.66,2.5l1.31-0.149l0.15-2.57l-1.46-1.32L880.48,349L880.48,349z"/> 	<path id="new_britain" d="M882.89,355.03l-0.95,0.22l-0.58,2.57l-1.82,1.18l-5.47,0.96l0.22,2.06l5.761-0.289l3.649-2.28   l-0.22-3.97L882.89,355.03L882.89,355.03z"/> 	<path id="bougainville" d="M889.38,359.51l1.239,3.45l2.19,2.13l0.66-0.59l-0.22-2.28l-2.48-3.01L889.38,359.51L889.38,359.51z"/> 	<path id="choiseul" d="M895.43,364.65l0.15,2.279l1.39,1.32l1.31-0.81l-1.17-2.431L895.43,364.65L895.43,364.65z"/> 	<path id="new_georgia" d="M897.18,370.31l-1.17,1.25l1.24,2.28l1.459,0.44l-0.069-1.54L897.18,370.31L897.18,370.31z"/> 	<path id="santa_isabel" d="M900.03,368.99l1.021,2.5l1.97,2.35l1.09-1.76l-1.46-2.5L900.03,368.99L900.03,368.99z"/> 	<path id="malaita" d="M905.14,372.74l0.58,3.09l1.39,1.91l1.17-2.42L905.14,372.74L905.14,372.74z"/> 	<path id="santa_ana" d="M906.74,379.65l-0.51,0.88l1.68,2.21l1.17,0.069l-0.729-2.869L906.74,379.65L906.74,379.65z"/> 	<path id="rennell" d="M903.02,384.05l-1.75,0.811l1.53,2.13l1.31-0.74L903.02,384.05L903.02,384.05z"/> 	<path id="espiritu_santo" d="M920.869,397.22l-1.239,1.66l0.52,1.87l0.62,0.42l1.13-1.46L920.869,397.22L920.869,397.22z"/> 	<path id="malakula" d="M921.49,402.31l0.101,1.351l1.34,0.42l0.93-0.521l-0.93-1.46L921.49,402.31L921.49,402.31z"/> 	<path id="efate" d="M923.449,414.37l-0.619,0.939l0.93,1.04l1.55-0.52L923.449,414.37L923.449,414.37z"/> 	<path id="fiji" d="M948.619,412.29l-1.239,1.66l-0.101,1.87l1.44,1.46L948.619,412.29L948.619,412.29z"/> 	<path id="palawan" d="M789.369,297.53l-0.859,1.64l-0.48,2.02l-4.779,6.07l0.289,1.25l2.011-0.29l6.21-6.94L789.369,297.53   L789.369,297.53z"/> 	<path id="negros" d="M797.11,295.22l-0.1,5.01l1.819,1.83l0.671,3.56l1.819,0.39l0.86-2.22l-1.43-1.06l-0.381-6.26L797.11,295.22   L797.11,295.22z"/> 	<path id="cebu" d="M802.28,297.15l-0.1,4.43l1.05,1.73l1.82-2.12l-0.48-3.85L802.28,297.15L802.28,297.15z"/> 	<path id="samar" d="M803.42,293.29l1.819,2.41l0.86,2.31h1.63l-0.29-3.95l-1.82-1.25L803.42,293.29L803.42,293.29z"/> 	<path id="path7462" d="M806.96,302.35l0.38,2.89l-3.351,2.7l-2.77,0.29l-2.96,3.18l0.1,1.45l2.771-0.87l1.909-1.25l1.631,4.14   l2.869,2.021l1.15-0.391l1.05-1.25l-2.29-2.31l1.34-1.061l1.53,1.25l1.05-1.729l-1.05-2.12l-0.189-4.72L806.96,302.35   L806.96,302.35z"/> 	<path id="luzon" d="M791.38,272.97l-2.58,1.83l-0.29,5.78l4.02,7.8l1.34,1.06l1.721-1.16l2.96,0.48l0.569,2.6l2.2,0.19l1.05-1.44   l-1.34-1.83l-1.63-1.54l-3.439-0.38l-1.82-2.99l2.1-3.18l0.19-2.79l-1.43-3.56L791.38,272.97L791.38,272.97z"/> 	<path id="mindoro" d="M792.72,290.21l0.76,2.7l1.34,0.87l0.96-1.25l-1.529-2.12L792.72,290.21L792.72,290.21z"/> 	<path id="hainan" d="M759.829,270.17l-2.39,0.67l-1.72,2.12l1.43,2.79l2.101,0.19l2.39-2.12l0.57-2.79L759.829,270.17   L759.829,270.17z"/> 	<path id="kyushu" d="M803.23,216.42l-1.63,1.64l0.67,2.31l1.43,0.1l0.96,5.01l1.15,1.25l2.01-1.83l0.86-3.28l-2.49-3.56   L803.23,216.42L803.23,216.42z"/> 	<path id="shikoku" d="M812.03,213.15l-2.77,2.6l-0.101,2.99l0.67,0.87l3.73-3.18l-0.29-3.18L812.03,213.15L812.03,213.15z"/> 	<path id="honshu" d="M808.199,206.98l-4.88,5.59l0.86,1.35l2.39,0.29l4.49-3.47l3.16-0.58l2.87,3.37l2.199-0.77l0.86-3.28l4.11-0.1   l4.02-4.82l-2.1-8l-0.96-4.24l2.1-1.73l-4.78-7.22l-1.239,0.1l-2.58,2.89v2.41l1.149,1.35l0.38,6.36l-2.96,3.66l-1.72-1.06   l-1.34,2.99l-0.29,2.79l1.05,1.64l-0.67,1.25l-2.2-1.83h-1.529l-1.341,0.77L808.199,206.98L808.199,206.98z"/> 	<path id="hokkaido" d="M816.43,163.44l-1.53,1.35l0.771,2.89l1.34,1.35l-0.101,4.43l-1.72,0.67l-1.34,2.99l3.92,5.39l2.58-0.87   l0.479-1.35l-2.77-2.5l1.72-2.22l1.82,0.29l1.43,1.54l0.101-3.18l3.92-3.18l2.2-0.58l-1.82-3.08l-0.86-1.35l-1.43,0.96l-1.24,1.54   l-2.68-0.58l-2.771-1.83L816.43,163.44L816.43,163.44z"/> 	<path id="sri_lanka" d="M680.539,308.05l0.25,2.72l0.25,1.98l-1.47,0.25l0.74,4.45l2.21,1.24l3.43-1.98l-0.979-4.69l0.25-1.729   l-3.19-2.96L680.539,308.05L680.539,308.05z"/> 	<path id="irian_jaya" d="M831.93,339.34l-4.17,0.47l-2.68,1.96l1.109,2.24l4.54,0.84v0.841l-2.87,2.329l1.391,4.851l1.39,0.09   l1.2-4.76h2.22l0.93,4.66l10.83,8.96l0.28,7l3.7,4.01l1.67-0.09l0.37-24.721l-6.29-4.38l-5.931,4.011l-2.13,1.31l-3.52-2.24   l-0.09-7.09L831.93,339.34L831.93,339.34z"/> 	<path id="china" d="M670.4,170.07l-3.46,8.7l-4.77-0.25l-5.03,11.01l4.27,5.439l-8.8,12.15l-4.52-0.76l-3.021,3.8l0.75,2.28   l3.521,0.25l1.76,4.05l3.52,0.76l10.811,13.93v7.09l5.28,3.29l5.779-1.01l7.29,4.3l8.8,2.53l4.271-0.51l4.78-0.51l10.05-6.58   l3.27,0.51l1.25,2.97l2.771,0.83l3.77,5.57l-2.51,5.57l1.51,3.8l4.271,1.52l0.75,4.56l5.03,0.51l0.75-2.28l7.29-3.8l4.52,0.25   l5.28,5.82l3.52-1.52l2.261,0.25l1.01,2.79l1.76,0.25l2.51-3.54l10.051-3.8l9.05-10.89l3.02-10.38l-0.25-6.84l-3.77-0.76l2.26-2.53   l-0.5-4.05l-9.55-9.62v-4.81l2.76-3.54l2.76-1.27l0.25-2.79h-7.04l-1.26,3.8l-3.27-0.76l-4.021-4.3l2.51-6.58l3.521-3.8l3.27,0.25   l-0.5,5.82l1.761,1.52l4.27-4.3l1.51-0.25l-0.5-3.29l4.021-4.81l3.02,0.25l1.761-5.57l2.06-1.09l0.21-3.47l-2-2.1l-0.17-5.48   l3.85-0.25l-0.25-14.13l-2.699,1.62l-1.011,3.62l-4.51-0.01l-13.07-7.35l-9.439-11.38l-9.58-0.1l-2.44,2.12l3.101,7.1l-1.08,6.66   l-3.86,1.6l-2.17-0.17l-0.16,6.59l2.26,0.51l4.021-1.77l5.28,2.53v2.53l-3.771,0.25l-3.02,6.58l-2.761,0.25l-9.8,12.91l-10.3,4.56   l-7.04,0.51l-4.77-3.29l-6.79,3.55l-7.29-2.28l-1.76-4.81l-12.311-0.76l-6.53-10.63h-2.76l-2.22-4.93L670.4,170.07z"/> 	<path id="mongolia" d="M673.8,170.17l5.819-7.72l6.99,3.23l4.75,1.27l5.82-5.34l-3.95-2.91l2.6-3.67l7.761,2.74l2.689,4.41   l4.86,0.13l2.54-1.89l5.229-0.21l1.141,1.94l8.689,0.44l5.5-5.61l7.61,0.8l-0.44,7.64l3.33,0.76l4.09-1.86l4.33,2.14l-0.1,1.08   l-3.14,0.09l-3.271,6.86l-2.54,0.25l-9.88,12.91l-10.09,4.45l-6.311,0.49l-5.239-3.38l-6.7,3.58l-6.601-2.05l-1.869-4.79   l-12.5-0.88l-6.4-10.85l-3.11-0.2L673.8,170.17L673.8,170.17z"/> 	<path id="north_korea" d="M778.28,194.27l1.84,0.77l0.561,6.44l3.65,0.21l3.439-4.03l-1.189-1.06l0.14-4.32l3.16-3.82l-1.61-2.9   l1.05-1.2l0.58-3l-1.83-0.83l-1.56,0.79l-1.93,5.86l-3.12-0.27l-3.61,4.26L778.28,194.27L778.28,194.27z"/> 	<path id="south_korea" d="M788.34,198.2l6.18,5.04l1.05,4.88l-0.21,2.62l-3.02,3.4l-2.601,0.14l-2.95-6.37l-1.119-3.04l1.189-0.92   l-0.28-1.27l-1.47-0.66L788.34,198.2L788.34,198.2z"/> 	<path id="turkmenistan" d="M593.85,207.59l-0.62,2.63h-4.15v3.561l4.46,2.94l-1.38,4.03v1.86l1.851,0.31l2.46-3.25l5.54-1.24   l11.84,4.49l0.15,3.25l6.609,0.62l7.38-7.75l-0.92-2.48l-4.92-1.08l-13.84-8.99l-0.62-3.25h-5.229l-2.311,4.34h-2.31L593.85,207.59   L593.85,207.59z"/> 	<path id="uzbekistan" d="M628.92,219.06l3.08,0.16v-5.27l-2.921-1.7l4.921-6.2h2l2,2.33l5.229-2.01L636,203.89l-0.28-1.5   l-1.72,0.42l-1.69,2.94l-7.29-0.24l-5.35-7.57l-9.4,0.93l-4.48-4.44l-6.199-1.05l-4.5,1.83l2.609,8.68l0.03,2.92l1.9,0.04   l2.33-4.44l6.199,0.08l0.921,3.41l13.289,8.82l5.141,1.18L628.92,219.06L628.92,219.06z"/> 	<path id="tajikistan" d="M630.19,211.84l4.11-5.1h1.55l0.54,1.14l-1.9,1.38v1.14l1.25,0.9l6.01,0.36l1.96-0.84L644.6,211l0.6,1.92   l3.57,0.36l1.79,3.78l-0.54,1.14l-0.71,0.06l-0.71-1.44l-1.55-0.12l-2.681,0.36l-0.18,2.52l-2.68-0.18l0.12-3.18l-1.96-1.92   l-2.98,2.46l0.06,1.62l-2.619,0.9h-1.551l0.12-5.58L630.19,211.84L630.19,211.84z"/> 	<path id="kirgizstan" d="M636.81,199.21l-0.31,2.53l0.25,1.56l8.699,2.92l-7.64,3.08l-0.87-0.72l-1.65,1.06l0.08,0.58l0.881,0.4   l5.359,0.14l2.72-0.82l3.49-4.4l4.37,0.76l5.27-7.3l-14.1-1.92l-1.95,4.73l-2.46-2.64L636.81,199.21L636.81,199.21z"/> 	<path id="afghanistan" d="M614.119,227.05l1.591,12.46l3.96,0.87l0.369,2.24l-2.84,2.37l5.29,4.27l10.28-3.7l0.82-4.38l6.47-4.04   l2.479-9.36l1.851-1.99l-1.92-3.34l6.26-3.87l-0.8-1.12l-2.891,0.18l-0.26,2.66l-3.88-0.04l-0.07-3.55l-1.25-1.49l-2.1,1.91   l0.06,1.75l-3.17,1.2l-5.85-0.37l-7.6,7.96L614.119,227.05L614.119,227.05z"/> 	<path id="pakistan" d="M623.13,249.84l2.6,3.86l-0.25,1.99l-3.46,1.37l-0.25,3.24h3.96l1.36-1.12h7.54l6.8,5.98l0.87-2.87h5.069   l0.12-3.61l-5.189-4.98l1.109-2.74l5.32-0.37l7.17-14.95l-3.96-3.11l-1.48-5.23l9.641-0.87l-5.69-8.1l-3.03-0.82l-1.239,1.5   l-0.931,0.07l-5.689,3.61l1.859,3.12l-2.1,2.24l-2.6,9.59l-6.431,4.11l-0.869,4.49L623.13,249.84L623.13,249.84z"/> 	<path id="india" d="M670.98,313.01l4.58-2.24l2.72-9.839l-0.12-12.08l15.58-16.82v-3.99l3.21-1.25l-0.12-4.61l-3.46-6.73l1.98-3.61   l4.33,3.99l5.56,0.25v2.24l-1.729,1.87l0.37,1l2.97,0.12l0.62,3.36h0.87l2.229-3.99l1.11-10.46l3.71-2.62l0.12-3.61l-1.48-2.87   l-2.35-0.12l-9.2,6.08l0.58,3.91l-6.46-0.02l-2.28-2.79l-1.24,0.16l0.42,3.88l-13.97-1l-8.66-3.86l-0.46-4.75l-5.77-3.58   l-0.07-7.37l-3.96-4.53l-9.1,0.87l0.989,3.96l4.46,3.61l-7.71,15.78l-5.159,0.39l-0.851,1.9l5.08,4.7l-0.25,4.75l-5.189-0.08   l-0.561,2.36l4.311-0.19l0.12,1.87l-3.091,1.62l1.98,3.74l3.83,1.25l2.35-1.74l1.11-3.11l1.359-0.62l1.61,1.62l-0.49,3.99   l-1.109,1.87l0.25,3.24L670.98,313.01L670.98,313.01z"/> 	<path id="bangladesh" d="M695.57,253.11l-1.31,2.37l3.399,6.46l0.101,5.04l0.62,1.35l3.989,0.07l2.261-2.17l1.64,0.99l0.33,3.07   l1.31-0.82l0.08-3.92l-1.1-0.13l-0.69-3.33l-2.779-0.1l-0.69-1.85l1.7-2.27l0.03-1.12h-4.94L695.57,253.11L695.57,253.11z"/> 	<path id="burma" d="M729.44,303.65l-2.77-4.44l2.01-2.82l-1.9-3.49l-1.79-0.34l-0.34-5.86l-2.68-5.19l-0.78,1.24l-1.79,3.04   l-2.24,0.34l-1.12-1.47l-0.56-3.95l-1.68-3.16l-6.841-6.45l1.681-1.11l0.31-4.67l2.5-4.2l1.08-10.45l3.62-2.47l0.12-3.81l2.17,0.72   l3.42,4.95l-2.54,5.44l1.71,4.27l4.23,1.66l0.77,4.65l5.68,0.88l-1.569,2.71l-7.16,2.82l-0.78,4.62l5.26,6.76l0.221,3.61   l-1.23,1.24l0.11,1.13l3.92,5.75l0.11,5.97L729.44,303.65L729.44,303.65z"/> 	<path id="thailand" d="M730.03,270.47l3.24,4.17v5.07l1.12,0.56l5.149-2.48l1.011,0.34l6.149,7.1l-0.22,4.85l-2.01-0.34l-1.79-1.13   l-1.34,0.11l-2.351,3.94l0.45,2.14l1.9,1.01l-0.11,2.37l-1.34,0.68l-4.59-3.16v-2.82l-1.9-0.11l-0.78,1.24l-0.399,12.62l2.97,5.42   l5.26,5.07l-0.22,1.47l-2.8-0.109l-2.57-3.83h-2.689l-3.36-2.71l-1.01-2.82l1.45-2.37l0.5-2.14l1.58-2.8l-0.07-6.44l-3.86-5.58   l-0.16-0.68l1.25-1.26l-0.29-4.43l-5.14-6.51l0.6-3.75L730.03,270.47L730.03,270.47z"/> 	<path id="malaysia" d="M732.71,315.45l2.01,4.51l0.45,5.86l2.689,4.17l6.49,3.939l2.46,0.23l-0.45-4.061l-2.13-5.18l-3.12-6.63   l-0.26,1.16l-3.76-0.17l-2.7-3.88L732.71,315.45L732.71,315.45z"/> 	<path id="cambodia" d="M740.48,299.47l4.09,4.37l7.61-5.64l0.67-8.9l-3.93,2.71l-2.04-1.14l-2.771-0.37l-1.55-1.09l-0.75,0.04   l-2.03,3.33l0.33,1.54l2.061,1.15l-0.25,3.13L740.48,299.47L740.48,299.47z"/> 	<path id="laos" d="M735.47,262.93l-2.42,1.23l-2.011,5.86l3.36,4.28l-0.56,4.73l0.56,0.23l5.59-2.71l7.5,8.38l-0.18,5.28l1.63,0.88   l4.03-3.27l-0.33-2.59l-11.63-11.05l0.109-1.69l1.45-1.01l-1.01-2.82l-4.81-0.79L735.47,262.93L735.47,262.93z"/> 	<path id="vietnam" d="M745.06,304.45l1.19,1.87l0.22,2.14l3.13,0.34l3.8-5.07l3.58-1.01l1.9-5.18l-0.891-8.34l-3.689-5.07   l-3.891-3.11l-4.95-8.5l3.551-5.94l-5.08-5.83l-4.07-0.18l-3.66,1.97l1.09,4.71l4.881,0.86l1.31,3.63l-1.72,1.12l0.109,0.9   l11.45,11.2l0.45,3.29l-0.69,10.4L745.06,304.45L745.06,304.45z"/> 	<path id="georgia" d="M555.46,204.16l3.27,4.27l4.08,1.88l2.51-0.01l4.311-1.17l1.08-1.69l-12.75-4.77L555.46,204.16L555.46,204.16   z"/> 	<path id="armenia" d="M569.72,209.89l4.8,6.26l-1.41,1.65l-3.4-0.59l-4.22-3.78l0.23-2.48L569.72,209.89L569.72,209.89z"/> 	<path id="azerbaijan" d="M571.409,207.72l-1.01,1.72l4.71,6.18l1.641-0.53l2.699,2.83l1.17-4.96l2.931,0.47l-0.12-1.42l-4.82-4.22   l-0.92,2.48L571.409,207.72L571.409,207.72z"/> 	<path id="iran" d="M569.65,217.95l-1.22,1.27l0.12,2.01l1.52,2.13l5.391,5.9l-0.82,2.36h-0.94l-0.47,2.36l3.05,3.9l2.811,0.24   l5.63,7.79l3.16,0.24l2.46,1.77l0.12,3.54l9.729,5.67h3.63l2.23-1.89l2.81-0.12l1.641,3.78l10.51,1.46l0.31-3.86l3.48-1.26   l0.16-1.38l-2.771-3.78l-6.17-4.96l3.24-2.95l-0.23-1.3l-4.06-0.63l-1.72-13.7l-0.2-3.15l-11.011-4.21l-4.88,1.1l-2.729,3.35   l-2.42-0.16l-0.7,0.59l-5.39-0.35l-6.801-4.96l-2.529-2.77l-1.16,0.28l-2.09,2.39L569.65,217.95L569.65,217.95z"/> 	<path id="turkey" d="M558.699,209.19l-2.229,2.36l-8.2-0.24l-4.92-2.95l-4.8-0.12l-5.511,3.9l-5.159,0.24l-0.471,2.95h-5.859   l-2.34,2.13v1.18l1.409,1.18v1.3l-0.59,1.54l0.59,1.3l1.881-0.94l1.88,2.01l-0.471,1.42l-0.699,0.95l1.05,1.18l5.16,1.06l3.63-1.54   v-2.24l1.76,0.35l4.22,2.48l4.57-0.71l1.99-1.89l1.29,0.47v2.13h1.76l1.52-2.95l13.36-1.42l5.83-0.71l-1.54-2.02l-0.03-2.73   l1.17-1.4l-4.26-3.42l0.23-2.95h-2.341L558.699,209.19L558.699,209.19z"/> 	<path id="yemen" d="M571.99,289.23l1.44,4.28v4.18l3.46,3.14l24.38-9.93l0.23-2.73l-3.91-7.02l-9.811,3.13l-5.63,5.54l-6.53-3.86   L571.99,289.23L571.99,289.23z"/> 	<path id="oman" d="M598.38,280.84l7.39-4.26l1.31-6.25l-1.619-0.93l0.67-6.7l1.409-0.82l1.511,2.37l8.989,4.7v2.61l-10.89,16.03   l-5.01,0.17L598.38,280.84L598.38,280.84z"/> 	<path id="emirates" d="M594.01,264.94l0.87,3.48l9.859,0.87l0.69-7.14l1.899-1.04l0.521-2.61l-3.11,0.87l-3.46,5.23L594.01,264.94   L594.01,264.94z"/> 	<path id="qatar" d="M592.63,259.02l-0.521,4.01l1.54,1.17l1.4-0.13l0.52-5.05l-1.21-0.87L592.63,259.02L592.63,259.02z"/> 	<path id="saudi" d="M584,253.24l7.01,9.77l2.26,1.8l1.01,4.38l10.79,0.85l1.22,0.64l-1.21,5.4l-7.09,4.18l-10.37,3.14l-5.529,5.4   l-6.57-3.83l-3.98,3.48L566,279.4l-3.801-1.74l-1.38-2.09v-4.53l-13.83-16.72l-0.52-2.96h3.979l4.84-4.18l0.17-2.09l-1.38-1.39   l2.771-2.26l5.88,0.35l10.03,8.36l5.92-0.27l0.38,1.46L584,253.24L584,253.24z"/> 	<path id="syria" d="M546.67,229.13l-0.351,2.54l2.82,1.18l-0.12,7.04l2.82-0.06l2.819-2.13l1.061-0.18l6.399-5.09l1.29-7.39   l-12.79,1.3l-1.35,2.96L546.67,229.13L546.67,229.13z"/> 	<path id="iraq" d="M564.31,225.03l-1.56,7.71l-6.461,5.38l0.41,2.54l6.311,0.43l10.05,8.18l5.62-0.16l0.149-1.89l2.061-2.21   l2.88,1.63l0.38-0.36l-5.57-7.41l-2.64-0.16l-3.51-4.51l0.7-3.32l1.069-0.14l0.37-1.47l-4.78-5.03L564.31,225.03L564.31,225.03z"/> 	<path id="jordan" d="M548.9,240.78l-2.46,8.58l-0.11,1.31h3.87l4.33-3.82l0.11-1.45l-1.771-1.81l3.17-2.63l-0.46-2.44l-0.87,0.2   l-2.64,1.89L548.9,240.78L548.9,240.78z"/> 	<path id="israel" d="M545.32,238.06l-1.58,5.03l2.05,6.03l2.351-8.81v-1.89L545.32,238.06L545.32,238.06z"/> 	<path id="cyprus" d="M543.21,229.84l1.229,0.89l-3.81,3.61l-1.82-0.06l-1.35-0.95l0.18-1.77l2.76-0.18L543.21,229.84L543.21,229.84   z"/> 	<path id="lebanon" d="M546.199,232.44l0.061,1.95l-0.82,2.96l2.82,0.24l0.18-4.2L546.199,232.44L546.199,232.44z"/> 	<path id="kuwait" d="M583.289,247.17l-2.25-1.22l-1.56,1.57l0.17,3.14l3.63,1.39L583.289,247.17L583.289,247.17z"/> 	<path id="bhutan" d="M695.4,248.08l1.55,2.12l5.24,0.04l-0.53-2.9L695.4,248.08L695.4,248.08z"/> 	<path id="nepal" d="M671.19,242.56l0.46,4.27l8.08,3.66l12.95,0.96l-0.49-3.13l-8.65-2.38l-7.34-4.37L671.19,242.56L671.19,242.56z   "/> 	<path id="male" d="M656.4,320.76l0.3,2.61l1.67,0.61l0.301-2.301L656.4,320.76L656.4,320.76z"/> 	<path id="maldive" d="M658.53,326.28l-0.149,3.22l1.22,0.61l1.07-2.15L658.53,326.28L658.53,326.28z"/> 	<path id="gan" d="M658.84,332.57l-1.07,1.069l1.22,1.07l1.521-1.07L658.84,332.57L658.84,332.57z"/> 	<path id="taiwan" d="M787.46,248.31l-3.54,2.7l-0.19,5.2l3.06,3.56l0.761-0.67L787.46,248.31L787.46,248.31z"/> 	<path id="attu_west" d="M-22.16,106.33l1.66,1.17l-0.5,1.34h-1.16V106.33L-22.16,106.33z"/> 	<path id="kerguelen" d="M622.76,499.62l-0.15,4.29l5.94,1.38l1.37-3.53l-2.131,0.61l-2.739,0.61l-0.761-3.221L622.76,499.62   L622.76,499.62z"/> </g> <g id="eur"> 	<path id="estonia" d="M517.77,143.66l-5.6-0.2l-3.551,2.17l-0.05,1.61l2.3,2.17l7.15,1.21L517.77,143.66L517.77,143.66z"/> 	<path id="iceland" d="M406.36,117.31l-1.96-1.11l-2.64,1.67l-2.271,2.1l0.061,1.17l2.939,0.37l-0.18,2.1l-1.04,1.05l0.25,0.68   l2.939,0.19v3.4l4.23,0.74l2.51,1.42l2.82,0.12l4.84-2.41l3.74-4.94l0.06-3.34l-2.27-1.92l-1.9-1.61l-0.859,0.62l-1.29,1.67   l-1.471-0.19l-1.47-1.61l-1.899,0.18l-2.761,2.29l-1.66,1.79l-0.92-0.8l-0.06-1.98l0.92-0.62L406.36,117.31L406.36,117.31z"/> 	<path id="spitsbergen" d="M488.26,53.96l-1.65-1.66l-3.66,1.78h-6.72L475.17,58l3.77,3.33l1.65-0.24l2.359-4.04l2,1.43l-1.42,2.85   l-0.71,4.16l1.65,2.61l3.54-5.94l4.6-5.59l-1.77-1.54L488.26,53.96L488.26,53.96z"/> 	<path id="nordaustlandet" d="M490.26,46.83l-2.95,2.73l1.77,2.73h3.181l1.3,1.78l3.89,2.02l4.48-2.61l3.07-2.61l-1.061-2.14   l-3.07-1.78l-2.239,2.02l-1.53-1.9l-1.18,0.12l-1.53,3.33l-2.24-2.26l-0.24-1.54L490.26,46.83L490.26,46.83z"/> 	<path id="edgeoya" d="M496.98,59.07l-2.36,2.14l-2,1.54l0.94,1.66l1.89,0.59l3.07-1.43l1.42-1.78l-1.3-2.14L496.98,59.07   L496.98,59.07z"/> 	<path id="prince_george" d="M547.82,38.79l1.72,0.69l-1.21,2.08v2.95l-2.58,1.56H543l-1.551-1.91l0.17-2.08l1.21-1.56h2.41   L547.82,38.79L547.82,38.79z"/> 	<path id="salisbury" d="M554.36,36.88v2.08l1.72,1.39l2.41-0.17l2.07-1.91v-1.39h-1.89l-1.551,0.52l-1.21-1.39L554.36,36.88   L554.36,36.88z"/> 	<path id="wilczek" d="M564.18,37.06l1.21,2.6l2.41,0.17l1.72-0.69l-0.86-2.43l-2.239-0.52L564.18,37.06L564.18,37.06z"/> 	<path id="bell" d="M573.99,33.59l-1.89-0.35l-1.72,1.74l0.859,1.56l0.521,2.43l2.24-1.73l0.52-1.91L573.99,33.59L573.99,33.59z"/> 	<path id="novaya_zemlya_north" d="M584.49,51.98l-0.52,2.43l-3.96,3.47l-8.44,1.91l-6.89,11.45l-1.21,3.3l6.89,1.74l1.03-4.16   l2.069-6.42l5.341-2.78l4.479-3.47l3.271-1.39h1.72v-4.68L584.49,51.98L584.49,51.98z"/> 	<path id="novaya_zemlya_south" d="M562.28,77.31l4.65,0.52l1.55,5.38l3.96,4.16l-1.38,2.78h-2.41l-2.24-2.6l-4.989-0.17l-2.07-2.78   v-1.91l3.1-0.87L562.28,77.31L562.28,77.31z"/> 	<path id="komsomolets" d="M634.949,18.15l-2.239-1.39h-2.58l-0.521,1.56l-2.75,1.56l-2.07,0.69l-0.34,2.08l4.82,0.35L634.949,18.15   L634.949,18.15z"/> 	<path id="october" d="M640.28,18.67l-1.21,2.6l-2.41-0.17l-3.79,2.78l-1.029,3.47h2.41l1.38-2.26l3.27,2.43L642,26.13l2.239-1.91   l-0.859-2.95l-1.21-2.08L640.28,18.67L640.28,18.67z"/> 	<path id="bolshevik" d="M645.28,20.58l1.21,4.86l1.891,4.51l2.069-3.64l3.96-0.87v-2.6l-2.579-1.91L645.28,20.58L645.28,20.58z"/> 	<path id="kotelny" d="M739.76,12.8l2.689,2.26l1.91-0.79l0.561-3.17L741,8.39l-2.58,1.7l-6.28,0.57v2.83l-6.62,0.11v4.63l7.74,5.76   l2.02-1.47l-0.45-4.07l4.94-1.24l-1.01-1.92l-1.79-1.81L739.76,12.8L739.76,12.8z"/> 	<path id="novaya_sibir" d="M746.94,10.09l1.79,3.39l6.96-0.79l1.91-2.49l-0.45-2.15l-1.91-0.79l-1.79,1.36l-5.16,1.13L746.94,10.09   L746.94,10.09z"/> 	<path id="lyakhovsky" d="M746.49,23.31l-3.479-0.9L741,24.56l-0.9,2.94l4.71-0.45l3.59-1.81L746.49,23.31L746.49,23.31z"/> 	<path id="wrangel" d="M836.68,3.76l-2.92-0.9L830.4,4.1l-1.68,2.49l2.13,2.83l5.609-2.49l1.121-1.24L836.68,3.76L836.68,3.76z"/> 	<path id="russia" d="M817.97,72.93l1.76,6.08l3.521,1.01l3.52-5.57l-2.01-3.8l0.75-3.29h5.279l-1.26,2.53l0.5,9.12l-7.54,18.74   l0.75,4.05l-0.25,6.84l14.07,20.51l2.76,0.76l0.25-16.71l2.761-2.53l-3.021-6.58l2.51-2.79l-5.53-7.34l-3.02,0.25l-1-12.15   l7.79-2.03l0.5-3.55l4.021-1.01l2.26,2.03l2.76-11.14l4.77-8.1l3.771-2.03l3.271,0.25v-3.8l-5.28-1.01l-7.29-6.08l3.52-4.05   l-3.02-6.84l2.51-2.53l3.02,4.05l7.541,2.79l8.289,0.76l1.011-3.54l-4.271-4.3l4.771-6.58l-10.811-3.8l-2.76,5.57l-3.521-4.56   l-19.85-6.84l-18.85,3.29l-2.761,1.52v1.52l4.021,2.03l-0.5,4.81l-7.29-3.04l-16.08,6.33l-2.76-5.82H780.49l-5.029,5.32   l-17.841-4.05l-16.33,3.29l-2.01,5.06l2.51,0.76l-0.25,3.8l-15.829,1.77l1.01,5.06l-14.58-2.53l3.52-6.58l-14.83-0.76l1.261,6.84   l-4.771,2.28l-4.02-3.8l-16.33,2.79l-6.28,5.82l-0.25,3.54l-4.02,0.25l-0.5-4.05l12.819-11.14v-7.6l-8.29-2.28l-10.81,3.54   l-4.521-4.56h-2.01l-2.51,5.06l2.01,2.28l-14.33,7.85l-12.31,9.37l-7.54,10.38v4.3l8.04,3.29l-4.021,3.04l-8.54-3.04l-3.52,3.04   l-5.28-6.08l-1.01,2.28l5.779,18.23l1.511,0.51l4.02-2.03l2.011,1.52v3.29l-3.771-1.52l-2.26,1.77l1.51,3.29l-1.26,8.61l-7.79,0.76   l-0.5-2.79l4.52-2.79l1.011-7.6l-5.03-6.58l-1.76-11.39l-8.04-1.27l-0.75,4.05l1.51,2.03l-3.271,2.79l1.261,7.6l4.77,2.03   l1.01,5.57l-4.779-3.04l-12.311-2.28l-1.51,4.05l-9.8,3.54l-1.51-2.53l-12.82,7.09l-0.25,4.81l-5.03,0.76l1.51-3.54v-3.54   l-5.029-1.77l-3.271,1.27l2.76,5.32l2.011,3.54v2.79l-3.771-0.76l-0.75-0.76l-3.77,4.05l2.01,3.54l-8.54-0.25l2.76,3.55l-0.75,1.52   h-4.52l-3.271-2.28l-0.75-6.33l-5.28-2.03v-2.53l11.061,2.28l6.03,0.51l2.51-3.8l-2.26-4.05l-16.08-6.33l-5.551,1.38l-1.899,1.63   l0.59,3.75l2.36,0.41l-0.551,5.9l7.28,17.1l-5.26,8.34l-0.36,1.88l2.67,1.88l-2.409,1.59l-1.601,0.03l0.3,7.35l2.21,3.13l0.03,3.04   l2.83,0.26l4.33,1.65l4.58,6.3l0.05,1.66l-1.49,2.55l3.42-0.19l3.33,0.96l4.5,6.37l11.08,1.01l-0.479,7.58l-3.82,3.27l0.79,1.28   l-3.77,4.05l-1,3.8l2.26,3.29l7.29,2.53l3.02-1.77l19.351,7.34l0.75-2.03l-4.021-3.8v-4.81l-2.51-0.76l0.5-4.05l4.02-4.81   l-7.21-5.4l0.5-7.51l7.71-5.07l9.051,0.51l1.51,2.79l9.3,0.51l6.79-3.8l-3.521-3.8l0.75-7.09l17.591-8.61l13.529,6.1l4.521-4.05   l13.32,12.66l10.05-1.01l3.52,3.54l9.55,1.01l6.28-8.61l8.04,3.55l4.271,0.76l4.27-3.8l-3.77-2.53l3.27-5.06l9.3,3.04l2.011,4.05   l4.02,0.25l2.51-1.77l6.79-0.25l0.75,1.77l7.79,0.51l5.28-5.57l10.81,1.27l3.271-1.27l1-6.08l-3.271-7.34l3.271-2.79h10.3   l9.8,11.65l12.561,7.09h3.77l0.5-3.04l4.521-2.79l0.5,16.46l-4.021,0.25v4.05l2.26,2.79l-0.42,3.62l1.67,0.69l1.011-2.53l1.51,0.51   l1,1.01l4.521-1.01l4.52-13.17l0.5-16.46l-5.78-13.17l-7.29-8.86l-3.52,0.51v2.79l-8.54-3.29l3.27-7.09l2.761-18.74l11.56-3.54   l5.53-3.54h6.03L805.86,96l1.51,2.53l5.28-5.57l3.021,0.25l-0.5-3.29l-4.78-1.01l3.27-11.9L817.97,72.93L817.97,72.93z"/> 	<path id="kazakhstan" d="M576.69,188.62l4.1-1.75l4.58-0.16l0.32,7h-2.68l-2.05,3.34l2.68,4.45l3.95,2.23l0.359,2.55l1.45-0.48   l1.34-1.59l2.21,0.48l1.11,2.23h2.84v-2.86l-1.74-5.09l-0.79-4.13l5.051-2.23l6.79,1.11l4.26,4.29l9.63-0.95l5.37,7.63l6.31,0.32   l1.74-2.86l2.21-0.48l0.32-3.18l3.31-0.16l1.74,2.07l1.74-4.13l14.99,2.07l2.52-3.34l-4.26-5.25l5.68-12.4l4.58,0.32l3.16-7.63   l-6.311-0.64l-3.63-3.5l-10,1.16l-12.88-12.45l-4.54,4.03l-13.77-6.25l-16.891,8.27l-0.47,5.88l3.95,4.61l-7.7,4.35l-9.99-0.22   l-2.09-3.07l-7.83-0.43l-7.42,4.77l-0.16,6.521L576.69,188.62L576.69,188.62z"/> 	<path id="norway" d="M515.46,102.14l2.02-1.48L517.3,99l-1.28-0.74l0.18-2.03h1.101v-1.11l-4.771-1.29l-7.15,0.74l-0.729,3.14   L503,97.16l-1.101-1.85l-3.49,0.18l-0.37,3.51l-1.649,0.74l-0.92-1.85l-7.34,5.91l1.47,1.66l-2.75,1.29l-6.24,12.38l-2.2,1.48   l0.181,1.11l2.199,1.11l-0.55,2.4l-3.67-0.19l-1.1-1.29l-2.38,2.77l-1.471,1.11l-0.369,2.59l-1.28,0.74l-3.3,0.74l-1.65,5.18   l1.1,8.5l1.28,3.88l1.47,1.48l3.301-0.18l4.77-4.62l1.83-3.14l0.55,4.62l3.12-5.54l0.18-15.53l2.54-1.6l0.761-8.57l7.699-11.09   l3.67-1.29l1.65-2.03l5.5,1.29l2.75,1.66l0.92-4.62l4.59-2.77L515.46,102.14L515.46,102.14z"/> 	<path id="britain" d="M446.119,149.08l-1.83,2.77l0.73,1.11h4.22v1.85l-1.1,1.48l0.729,3.88l2.381,4.62l1.829,4.25l2.931,1.11   l1.279,2.22l-0.18,2.03l-1.83,1.11l-0.18,0.92l1.28,0.74l-1.101,1.48l-2.569,1.11l-4.95-0.55l-7.71,3.51l-2.57-1.29l7.34-4.25   l-0.92-0.55l-3.85-0.37l2.38-3.51l0.37-2.96l3.12-0.37l-0.551-5.73l-3.67-0.18l-1.1-1.29l0.18-4.25l-2.2,0.18l2.2-7.39l4.04-2.96   L446.119,149.08L446.119,149.08z"/> 	<path id="ulster" d="M438.42,161.47l-3.301,0.37l-0.18,2.96l2.2,1.48l2.38-0.55l0.92-1.66L438.42,161.47L438.42,161.47z"/> 	<path id="ireland" d="M439.51,166.55l-0.91,6l-8.07,2.96h-2.57l-1.829-1.29v-1.11l4.04-2.59l-1.101-2.22l0.181-3.14l3.489,0.18   l1.601-3.76l-0.21,3.34l2.71,2.15L439.51,166.55L439.51,166.55z"/> 	<path id="sweden" d="M497.72,104.58l1.96,1.81h3.67l2.02,3.88l0.551,6.65l-4.95,3.51v3.51l-3.49,4.81l-2.021,0.18l-2.75,4.62   l0.181,4.44l4.77,3.51l-0.37,2.03l-1.83,2.77l-2.75,2.4l0.181,7.95l-4.22,1.48l-1.471,3.14h-2.02l-1.101-5.54l-4.59-7.04   l3.771-6.31l0.26-15.59l2.6-1.43l0.631-8.92l7.409-10.61L497.72,104.58L497.72,104.58z"/> 	<path id="finland" d="M506.789,116.94l2.07,0.91l1.28,2.4l-1.28,1.66l-6.42,7.02l-1.1,3.7l1.47,5.36l4.95,3.7l6.6-3.14l5.32-0.74   l4.95-7.95l-3.67-8.69l-3.49-8.32l0.55-5.36l-2.2-0.37l-0.569-3.91l-2.961-4.83l-3.279,2.27l-1.29,5.27l-3.48-2.09l-4.84-1.18   l-1.08,1.26l1.86,1.68l3.39-0.06l2.73,4.41L506.789,116.94L506.789,116.94z"/> 	<path id="estonia_1_" d="M518.07,151.37l-6.85-1.11l0.149,3.83l6.351,3.88l2.6-0.76l-0.149-2.92L518.07,151.37L518.07,151.37z"/> 	<path id="hiumaa" d="M506.76,147.64l-1.55-0.05l-0.9,0.91l0.65,0.96l1.55,0.1l0.8-1.16L506.76,147.64L506.76,147.64z"/> 	<path id="saaremaa" d="M506.61,151.72l-1.5-0.15l-2.7,3.23v1.51l0.9,0.35l1.75,0.05l2.899-2.37l0.4-0.81L506.61,151.72   L506.61,151.72z"/> 	<path id="lithuania" d="M510.81,154.7l-2.15-0.05l-2.95,2.82h-2.5l0.15,3.53l-1.5,2.77l5.4,0.05l1.55-0.2l1.55,1.87l3.55-0.15   l3.4-4.33l-0.2-2.57L510.81,154.7L510.81,154.7z"/> 	<path id="belarus" d="M510.659,166.29l1.5,2.47l-0.6,1.97l0.1,1.56l0.551,1.87l3.1-1.76l3.85,0.1l2.7,1.11h6.85l2-4.79l1.2-1.81   v-1.21l-4.3-6.05l-3.8-1.51l-3.1-0.35l-2.7,0.86l0.1,2.72l-3.75,4.74L510.659,166.29L510.659,166.29z"/> 	<path id="poland" d="M511.459,174.76l0.851,1.56l0.2,1.66l-0.7,1.61l-1.601,3.08l-1.35,0.61l-1.75-0.76l-1.05,0.05l-2.55,0.96   l-2.9-0.86l-4.7-3.33l-4.6-2.47l-1.851-2.82l-0.35-6.65l3.6-3.13l4.7-1.56l1.75-0.2l-0.7,1.41l0.45,0.55l7.91,0.15l1.7-0.05   l2.8,4.29l-0.7,1.76l0.301,2.07L511.459,174.76L511.459,174.76z"/> 	<path id="spain" d="M448.36,205h-12.74l-2.569-1.16l-1.24,0.09l-1.5,3.12l0.53,3.21l4.869,0.45l0.62,2.05l-2.12,11.95l0.091,2.14   l3.45,1.87l3.979,0.271l7.96-1.96l3.89-4.9l0.091-4.99l6.899-6.24l0.351-2.76l-6.28-0.09L448.36,205L448.36,205z"/> 	<path id="portugal" d="M430.93,211.24l-0.62,8.65l-1.771,1.6l0.181,0.98l1.239,2.05l-0.8,2.5l1.33,0.45l3.101-0.36l-0.181-2.5   l2.03-11.59l-0.439-1.6L430.93,211.24L430.93,211.24z"/> 	<path id="majorca" d="M461.1,217.21l-1.59,0.54l0.35,1.43h2.3l0.971-1.07L461.1,217.21L461.1,217.21z"/> 	<path id="sardinia" d="M477.56,213.38l-2.65,1.34l0.351,5.17l2.12,0.36l1.59-1.52v-4.9L477.56,213.38L477.56,213.38z"/> 	<path id="corsica" d="M477.829,206.96l-1.949,1.96l-0.181,1.78l1.59,0.98l0.62-0.09l0.351-2.59L477.829,206.96L477.829,206.96z"/> 	<path id="france" d="M460.4,178.7l-2.21,0.54l-4.42,4.81l-1.33,0.09l-1.77-1.25l-1.15,0.27l-0.88,2.76l-6.46,0.18l0.18,1.43   l4.42,2.94l5.13,4.1l-0.09,4.9l-2.739,4.81l5.93,2.85l6.02,0.18l1.86-2.14l3.8,0.09l1.061,0.98l3.8-0.271l1.95-2.5l-2.48-2.94   l-0.18-1.87l0.529-2.05l-1.239-1.78l-2.12,0.62l-0.271-1.6l4.69-5.17v-3.12l-3.101-1.78l-1.59-0.27L460.4,178.7L460.4,178.7z"/> 	<path id="netherlands" d="M470.09,168.27l-4.53,2.23l0.96,0.87l0.1,2.23l-0.96-0.19l-1.06-1.65l-2.53,4.01l3.891,0.81l1.449,1.53   l0.771,0.02l0.51-3.46l2.45-1.03L470.09,168.27L470.09,168.27z"/> 	<path id="belgium" d="M461.61,176.52l-0.64,1.6l6.88,4.54l1.979,0.47l0.07-2.15l-1.729-1.94h-1.061l-1.45-1.65L461.61,176.52   L461.61,176.52z"/> 	<path id="germany" d="M471.14,167.88l3.57-0.58v-2.52l2.989-0.49l1.641,1.65l1.729,0.19l2.7-1.17l2.41,0.68l2.12,1.84l0.29,6.89   l2.12,2.82l-2.79,0.39l-4.631,2.91l0.391,0.97l4.14,3.88l-0.29,1.94l-3.85,1.939l-3.57,0.1l-0.87,1.84h-1.83l-0.87-1.94l-3.18-0.78   l-0.1-3.2l-2.7-1.84l0.29-2.33l-1.83-2.52l0.48-3.3l2.5-1.17L471.14,167.88L471.14,167.88z"/> 	<path id="denmark" d="M476.77,151.5l-4.15,4.59l-0.149,2.99l1.89,4.93l2.96-0.56l-0.37-4.03l2.04-2.28l-0.04-1.79l-1.439-3.73   L476.77,151.5L476.77,151.5z"/> 	<path id="sjælland" d="M481.44,159.64l-0.93-0.04l-1.221,1.12l0.15,1.75l2.89,0.08l0.15-1.98L481.44,159.64L481.44,159.64z"/> 	<path id="gotland" d="M498.49,150.17l-2.109,1.67l1.06,2.45l1.87-1.82L498.49,150.17L498.49,150.17z"/> 	<path id="switzerland" d="M472.909,189.38l-4.359,4.64l0.09,0.47l1.79-0.56l1.609,2.24l2.721-0.96l1.88,1.46l0.77-0.44l2.32-3.64   l-0.59-0.56l-2.29-0.06l-1.11-2.27L472.909,189.38L472.909,189.38z"/> 	<path id="czech" d="M488.43,184.87h2.97h1.46l2.37,1.69l4.39-3.65l-4.26-3.04l-4.22-2.04l-2.89,0.52l-3.921,2.52L488.43,184.87   L488.43,184.87z"/> 	<path id="slovakia" d="M495.84,187.13l0.689,0.61l0.09,1.04l7.631-0.17l5.64-2.43l-0.09-2.47l-1.08,0.48l-1.55-0.83l-0.95-0.04   l-2.5,1l-3.4-0.82L495.84,187.13L495.84,187.13z"/> 	<path id="austria" d="M480.63,190.12l-0.65,1.35l0.56,0.96l2.33-0.48h1.98l2.15,1.82l4.569-0.83l3.36-2l0.859-1.35l-0.13-1.74   l-3.02-2.26l-4.05,0.04l-0.34,2.3l-4.261,2.08L480.63,190.12L480.63,190.12z"/> 	<path id="hungary" d="M496.74,189.6l-1.16,1.82l0.091,2.78l1.85,0.95l5.689,0.17l7.931-6.68l0.04-1.48l-0.86-0.43l-5.729,2.6   L496.74,189.6L496.74,189.6z"/> 	<path id="slovenia" d="M494.8,191.99l-2.54,1.52l-4.74,1.04l0.95,2.74l3.319,0.04l3.061-2.56L494.8,191.99L494.8,191.99z"/> 	<path id="croatia" d="M495.619,195.16l-3.529,2.91h-3.58l-0.431,2.52l1.641,0.43l0.819-1.22l1.291,1.13l1.029,3.6l7.07,3.3l0.7-0.8   l-7.17-7.4l0.729-1.35l6.811-0.26l0.689-2.17l-4.439,0.13L495.619,195.16L495.619,195.16z"/> 	<path id="bosnia" d="M494.8,198.94l-0.37,0.61l6.71,6.92l2.46-3.62l-0.09-1.43l-2.15-2.61L494.8,198.94L494.8,198.94z"/> 	<path id="italy" d="M472.27,196.98l-0.62,1.57l0.17,1.71l2.391,2.79l3.76-0.13l8.3,9.64l5.18,1.5l3.061,2.89l0.729,6.59l1.641-0.96   l1.42-3.59l-0.351-2.58l2.431-0.22l0.35-1.46l-6.85-3.28l-6.5-6.39l-2.591-3.82l-0.63-3.63l3.311-0.79l-0.851-2.39l-2.029-1.71   l-1.75-0.08l-2.44,0.67l-2.3,3.22l-1.39,0.92l-2.15-1.32L472.27,196.98L472.27,196.98z"/> 	<path id="sicily" d="M492.44,223.02l-1.45-0.78l-4.95,0.78l0.17,1.34l4.45,2.24l0.67,0.73l1.171,0.17L492.44,223.02L492.44,223.02z   "/> 	<path id="malta" d="M492.61,230.47l-1.67,0.34l0.061,1.85l1.5,0.5l0.67-0.56L492.61,230.47L492.61,230.47z"/> 	<path id="ukraine" d="M515.57,173.15l-2.899,1.63l0.72,3.08l-2.681,5.65l0.021,2.49l1.26,0.8l8.08,0.4l2.26-1.87l2.42,0.81   l3.471,4.63l-2.54,4.56l3.02,0.88l3.95-4.55l2.26,0.41l2.101,1.46l-1.851,2.44l2.5,3.9h2.66l1.37-2.6l2.82-0.57l0.08-2.11   l-5.24-0.81l0.16-2.271h5.08l5.479-4.39l2.42-2.11l0.4-6.66l-10.8-0.97l-4.431-6.25l-3.06-1.05l-3.71,0.16l-1.67,4.13l-7.601,0.1   l-2.47-1.14L515.57,173.15L515.57,173.15z"/> 	<path id="moldova" d="M520.75,187.71l3.1,4.77l-0.26,2.7l1.109,0.05l2.63-4.45l-3.159-3.92l-1.79-0.74L520.75,187.71L520.75,187.71   z"/> 	<path id="romania" d="M512.18,187.6l-0.26,1.48l-5.79,4.82l4.84,7.1l3.1,2.17h5.58l1.84-1.54l2.47-0.32l1.841,1.11l3.26-3.71   l-0.63-1.86l-3.311-0.85l-2.26-0.11l0.11-3.18l-3-4.72L512.18,187.6L512.18,187.6z"/> 	<path id="serbia_and_montenegro" d="M505.55,194.54l-2.05,1.54h-1l-0.681,2.12l2.42,2.81l0.16,2.23l-3,4.24l0.42,1.27l1.74,0.32   l1.37-1.86l0.74-0.05l1.26,1.22l3.84-1.17l-0.32-5.46L505.55,194.54L505.55,194.54z"/> 	<path id="bulgaria" d="M511.44,202.39l0.16,4.98l1.68,3.5l6.311,0.11l2.84-2.01l2.79-1.11l-0.681-3.18l0.631-1.7l-1.42-0.74   l-1.95,0.16l-1.53,1.54l-6.42,0.05L511.44,202.39L511.44,202.39z"/> 	<path id="albania" d="M504.02,209.76v4.61l1.32,2.49l0.949-0.11l1.631-2.97l-0.95-1.33l-0.37-3.29l-1.26-1.17L504.02,209.76   L504.02,209.76z"/> 	<path id="macedonia" d="M510.92,208.01l-3.37,1.11l0.16,2.86l0.79,1.01l4-1.86L510.92,208.01L510.92,208.01z"/> 	<path id="greece" d="M506.709,217.6l-0.109,1.33l4.63,2.33l2.21,0.85l-1.16,1.22l-2.58,0.26l-0.369,1.17l0.89,2.01l2.89,1.54   l1.26,0.11l0.16-3.45l1.891-2.28l-5.16-6.1l0.68-2.07l1.21-0.05l1.84,1.48l1.16-0.58l0.37-2.07l5.42,0.05l0.21-3.18l-2.26,1.59   l-6.63-0.16l-4.311,2.23L506.709,217.6L506.709,217.6z"/> 	<path id="thrace" d="M523.02,209.7l-0.16,3.55l3.101-0.95l1.42-0.95l-0.42-1.54l-1.471-1.17L523.02,209.7L523.02,209.7z"/> 	<path id="crete" d="M516.76,230.59l1.63,0.05l0.68,1.01h2.37l1.58-0.58l0.53,0.64l-1.05,1.38l-4.631,0.16l-0.84-1.11l-0.89-0.53   L516.76,230.59L516.76,230.59z"/> 	<path id="iturup" d="M830.86,160.45l-2.68,3.76l0.189,1.83l1.34-0.58l3.15-3.95L830.86,160.45L830.86,160.45z"/> 	<path id="urup" d="M834.4,154.96l-0.96,2.6l0.1,1.73l1.631-1.06l1.529-3.08V154L834.4,154.96L834.4,154.96z"/> 	<path id="paramushir" d="M840.039,132.03l-1.239,1.54l0.1,2.41l1.15-0.1l1.909-3.37L840.039,132.03L840.039,132.03z"/> 	<path id="onekotan" d="M837.75,137.91v4.24l1.34,0.48l0.96-1.54v-3.27L837.75,137.91L837.75,137.91z"/> 	<path id="sakhalin" d="M798.64,122.59l-0.09,6.17l7.739,11.95l2.771,10.4l4.88,9.25l1.91,0.67l1.63-1.35l0.76-2.22l-6.979-7.61   l0.189-3.95l1.53-0.67l0.38-2.31l-13.67-19.36L798.64,122.59L798.64,122.59z"/> 	<path id="bering_island" d="M852.57,103.42l-1.91,0.19l1.15,1.64l2.39,1.64l0.67-0.77L852.57,103.42L852.57,103.42z"/> 	<path id="medny" d="M856.289,104.58l0.29,1.64l2.96,0.87l0.29-1.16L856.289,104.58L856.289,104.58z"/> 	<path id="attu" d="M872.539,110.87l1.25,2.24l2.08-0.14l0.42-1.54L872.539,110.87L872.539,110.87z"/> 	<path id="greenland" d="M321.13,50.07l-1.36,2.17l2.45,2.45l-1.09,2.45l3.54,4.62l4.35-1.36l5.71-0.54l6.53,7.07l4.35,11.69   l-3.529,7.34l4.89-0.82l2.72,1.63l0.271,3.54l-5.98,0.27l3.261,3.26l4.079,0.82l-8.97,11.96l-1.09,7.34l1.9,5.98l-1.36,3.54   l2.45,7.61l4.62,5.17l1.359-0.27l2.99-0.82l0.27,4.35l1.9,2.72l3.53-0.271l2.72-10.06l8.16-10.06l12.24-4.89l7.609-9.52l3.53,1.63   h7.34l5.98-5.98l7.34-2.99l0.819-4.62l-4.62-4.08l-4.079-1.36l-2.181-5.71l5.17-2.99l8.16,4.35l2.721-2.99l-4.351-2.45l9.25-12.51   l-1.63-5.44l-4.35-0.27l1.63-4.89l5.439-2.45l11.15-9.79l-3.26-3.53l-12.511,1.09l-6.529,6.53l3.81-8.43l-4.35-1.09l-2.45,4.35   l-3.53-2.99l-9.79,1.09l2.72-4.35l16.04-0.54l-4.08-5.44l-17.399-3.26l-7.07,1.09l0.271,3.54l-7.34-2.45l0.27-2.45l-5.17,1.09   l-1.09,2.72l5.439,1.9l-5.71,4.08l-4.079-4.62l-5.71-1.63l-0.82,4.35h-5.71l-2.181-4.62l-8.97-1.36l-4.89,2.45l-0.271,3.26   l-6.25-0.82l-3.81,1.63l0.27,3.81v1.9l-7.069,1.36l-3.261-2.17l-2.18,3.53l3.26,3.54l6.801-0.82l0.54,2.18l-5.171,2.45   L321.13,50.07L321.13,50.07z"/> 	<path id="milne" d="M410.869,85.69l4.62,1.36l-0.27,3.81l-4.891-2.45l-1.09-1.36L410.869,85.69L410.869,85.69z"/> </g> </svg> ';
return a}()})}.call(this);
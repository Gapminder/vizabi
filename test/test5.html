<html>

<head>
    <title>Test page for Vizabi</title>
    <!-- Includes vizabi main file -->
    <script src="../dist/vizabi.js"></script>
    <!-- Includes vizabi css -->
    <link rel="stylesheet" href="../dist/vizabi.css">

    <style>
    body {
        margin: 10px;
        padding: 0;
        font-family: Arial, sans-serif;
    }
    #placeholder {
        position: relative;
        width: 300px;
        height: 500px;
        margin: 20px auto;
        border: 1px solid #ccc;
    }
    #year-wrapper {
        text-align: center;
        color: #999;
    }
    #year-wrapper #year {
        color: #666;
    }
    p {
        margin-top: 10px;
    }
    </style>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

</head>

<body>

    <p align="center">Click to get a random size
        <button onclick="randomSize()">RANDOM SIZE</button>
    </p>

    <div id="placeholder"></div>

    <div id="year-wrapper">
        <p>Year div on surrounding page:</p>
        <h1 id="year"></h1>
    </div>

</body>
<script>
var ready = function(err) {
    console.log("Vizabi is ready!");
};

var options = {
    //state
    state: {
        language: 'en',
        show: {
            'world': {},
            'region': {
                filter: ['asi', 'ame']
            }
        },
        time: 2014,
        timeRange: [1800, 2018],
        yaxis: {
            indicator: 'gdp',
            scale: 'linear',
            unit: 1000000000000
        }
    },
    //path
    data: {
        path: '../dist/tools/hello-world/waffles/'
    },

    //TODO: merge bind and ready into a single object

    //ready function
    ready: ready,

    //bind to events
    bind: {
    	"change:state": function(state) {
    		var current_year = state.time;
            $("#year").html(current_year);
    	}
    }
};

var myVizabi = new Vizabi("hello-world", "#placeholder", options);

function randomSize() {
    var width = Math.floor(Math.random() * 800) + 300;
    var height = Math.floor(Math.random() * 500) + 300;
    var container = document.getElementById("placeholder");
    container.style.width = width + "px";
    container.style.height = height + "px";

    //force resize
    event = document.createEvent("HTMLEvents");
    event.initEvent("resize", true, true);
    event.eventName = "resize";
    window.dispatchEvent(event);
}
</script>

</html>